import{j as s,r as N,u as T,a as E}from"./app-nYBTD1fo.js";import{F as A}from"./formInput-B30F1vSL.js";import{F as I}from"./formDropdown-D7H9B25a.js";import{a as v,C as L,F as k}from"./index.esm-CzPujvt0.js";import{F as R,C as $}from"./FormControlLabel-DsKQTnR8.js";import{F as C}from"./FormHelperText-BvV9t2QZ.js";import{A as P,T as V,C as B,I as H}from"./TextField-B4ZE2uFw.js";import{F as W}from"./formTextArea-DuU7JFRj.js";import{F as _}from"./formSwitch-59IZkVem.js";import{a as z}from"./axiosInstance-DMOvDrDW.js";import{L as D}from"./Header-4_zpmOmo.js";const G=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:b,requiredMessage:f,classNames:c})=>{const{control:g,formState:{errors:d}}=v();return s.jsx(L,{name:r,control:g,rules:{required:p?f??`${e} is required`:!1},render:({field:o})=>{var u;return s.jsxs("div",{style:b,className:c,children:[s.jsx(R,{control:s.jsx($,{...o,checked:!!o.value,disabled:x}),label:e}),d[r]&&s.jsx(C,{error:!0,children:String((u=d[r])==null?void 0:u.message)})]})}})},J=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:b,requiredMessage:f,options:c=[],placeholder:g,classNames:d,onChangeOutside:o})=>{const{control:u,formState:{errors:j}}=v();return s.jsx(L,{name:r,control:u,rules:{required:p?f??`${e} is required`:!1},render:({field:h})=>{var q;return s.jsxs("div",{style:b,className:d,children:[s.jsx(P,{...h,multiple:!0,options:c,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,i)=>t.value===i,onChange:(t,i)=>{h.onChange(i.map(l=>l.value)),o&&o(i.map(l=>l.value))},value:c.filter(t=>{var i;return(i=h.value)==null?void 0:i.includes(t.value)}),disabled:x,renderInput:t=>s.jsx(V,{...t,label:e,placeholder:g,error:!!j[r],required:p}),renderTags:(t,i)=>t.map((l,a)=>N.createElement(B,{label:l.label,...i({index:a}),key:a}))}),j[r]&&s.jsx(C,{error:!0,children:String((q=j[r])==null?void 0:q.message)})]})}})},K=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:b,requiredMessage:f,allowedExtensions:c=[],classNames:g,onFileChangeOutside:d})=>{const[o,u]=N.useState(null),{control:j,formState:{errors:h},setError:q,clearErrors:t}=v(),i=(l,a)=>{var y;const n=l.target.files?l.target.files[0]:null;if(n){const F=(y=n.name.split(".").pop())==null?void 0:y.toLowerCase();if(c.length>0&&F&&!c.includes(F)){a(null),u(null),q(r,{type:"manual",message:`Invalid file type. Allowed types: ${c.join(", ")}`});return}t(r),u(n.name),a(n),d&&d(n)}else a(null),u(null),t(r)};return s.jsx(L,{name:r,control:j,rules:{required:p?f??`${e} is required`:!1},render:({field:l})=>{var a;return s.jsxs("div",{style:b,className:g,children:[s.jsx("label",{children:e}),s.jsx(H,{type:"file",disabled:x,onChange:n=>i(n,l.onChange)}),o&&s.jsxs("p",{children:["Selected file: ",o]}),h[r]&&s.jsx(C,{error:!0,children:String((a=h[r])==null?void 0:a.message)})]})}})},O=({model:e,onChangeOutside:r})=>{switch(e.type){case"input":return s.jsx(A,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon});case"textarea":return s.jsx(W,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames});case"select":return s.jsx(I,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:r});case"checkbox":return s.jsx(G,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(J,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:r});case"switch":return s.jsx(_,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(K,{fieldLabel:e.label,fieldName:e.name,allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:r});default:return null}},le=({formModel:e,url:r,redirectUrl:p,methods:x,onSave:b,isLoading:f,classForm:c,isCustom:g=!1,formCustom:d,formLogic:o,disableButtonSubmit:u=!1})=>{const{setError:j,watch:h}=x,{showToast:q}=T(),[t,i]=N.useState(!1),l=async a=>{var n,y,F,M;i(!0);try{const m=await z.post(r,a,{headers:{"Content-Type":"application/json"}});q(m.data.message,"success"),b&&await b(m),p&&setTimeout(()=>{window.location.href=p},2e3)}catch(m){if(E.isAxiosError(m)&&((y=(n=m.response)==null?void 0:n.data)!=null&&y.message)&&q(m.response.data.message,"error"),E.isAxiosError(m)&&((M=(F=m.response)==null?void 0:F.data)!=null&&M.errors)){const S=m.response.data.errors;Object.keys(S).forEach(w=>{j(w,{type:"server",message:S[w].join(", ")})})}}i(!1)};return s.jsxs(k,{...x,children:[s.jsx(D,{isLoading:f||t}),s.jsxs("form",{onSubmit:x.handleSubmit(l),children:[s.jsxs("div",{className:c,children:[g?s.jsx(s.Fragment,{children:d}):s.jsx(s.Fragment,{children:(e??[]).map((a,n)=>s.jsx("div",{className:`mt-8 ${a.classPosition}`,children:a.fieldCustome?a.fieldCustomeValue:s.jsx(s.Fragment,{children:!a.conditional||h(a.parameterConditional??"")===a.conditional?s.jsx(O,{model:a}):null})},n))}),o]}),!u&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{le as F};
