import{r as q,j as s,c as z,u as A,b as B}from"./app-BbUtcZJN.js";import{F as R}from"./formInput-D5Ig-dG3.js";import{a as $,C,F as P}from"./index.esm-D7cXGU7x.js";import{S as O,c as U,A as L,T as M,F as D,C as V,a as X,I as _,b as H}from"./TextField-CQopi8vt.js";import{g as W,a as G,s as F,c as k,m as N,b as E,l as J,d as K,u as Q,e as Y,F as S}from"./FormHelperText-C8cYGYDq.js";import{a as Z}from"./axiosInstance-CrBOd37P.js";import{L as ee}from"./Loading-B_xnjR2-.js";function se(e){return G("MuiSwitch",e)}const f=W("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ae=e=>{const{classes:a,edge:r,size:c,color:u,checked:g,disabled:p}=e,b={root:["root",r&&`edge${k(r)}`,`size${k(c)}`],switchBase:["switchBase",`color${k(u)}`,g&&"checked",p&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=Y(b,se,a);return{...a,...d}},re=F("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,r.edge&&a[`edge${k(r.edge)}`],a[`size${k(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${f.thumb}`]:{width:16,height:16},[`& .${f.switchBase}`]:{padding:4,[`&.${f.checked}`]:{transform:"translateX(16px)"}}}}]}),te=F(O,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.switchBase,{[`& .${f.input}`]:a.input},r.color!=="default"&&a[`color${k(r.color)}`]]}})(N(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${f.checked}`]:{transform:"translateX(20px)"},[`&.${f.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${f.checked} + .${f.track}`]:{opacity:.5},[`&.${f.disabled} + .${f.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${f.input}`]:{left:"-100%",width:"300%"}})),N(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:E(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(U(["light"])).map(([a])=>({props:{color:a},style:{[`&.${f.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:E(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${f.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?J(e.palette[a].main,.62):K(e.palette[a].main,.55)}`}},[`&.${f.checked} + .${f.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]}))),le=F("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(N(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),ie=F("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(N(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ne=q.forwardRef(function(a,r){const c=Q({props:a,name:"MuiSwitch"}),{className:u,color:g="primary",edge:p=!1,size:b="medium",sx:d,...n}=c,o={...c,color:g,edge:p,size:b},i=ae(o),h=s.jsx(ie,{className:i.thumb,ownerState:o});return s.jsxs(re,{className:z(i.root,u),sx:d,ownerState:o,children:[s.jsx(te,{type:"checkbox",icon:h,checkedIcon:h,ref:r,ownerState:o,...n,classes:{...i,root:i.switchBase}}),s.jsx(le,{className:i.track,ownerState:o})]})}),oe=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,options:p,placeholder:b,classNames:d,onChangeOutside:n})=>{var h;const{control:o,formState:{errors:i}}=$();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(C,{name:a,control:o,rules:{required:r?g??`${e} is required`:!1},render:({field:j})=>s.jsx("div",{className:`${d}`,children:s.jsx(L,{...j,options:p,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,l)=>t.value===l,onChange:(t,l)=>{j.onChange(l?l.value:null),n&&n(l?l.value:null)},sx:u,disabled:c,renderInput:t=>s.jsx(M,{...t,placeholder:b,error:!!i[a],required:r,InputProps:{...t.InputProps,sx:{height:"36px"}}})})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),i[a]&&s.jsx(S,{error:!0,children:String((h=i[a])==null?void 0:h.message)})]})]})},ce=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,classNames:p})=>{const{control:b,formState:{errors:d}}=$();return s.jsx(C,{name:a,control:b,rules:{required:r?g??`${e} is required`:!1},render:({field:n})=>{var o;return s.jsxs("div",{style:u,className:p,children:[s.jsx(D,{control:s.jsx(V,{...n,checked:!!n.value,disabled:c}),label:e}),d[a]&&s.jsx(S,{error:!0,children:String((o=d[a])==null?void 0:o.message)})]})}})},pe=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,options:p=[],placeholder:b,classNames:d,onChangeOutside:n})=>{const{control:o,formState:{errors:i}}=$();return s.jsx(C,{name:a,control:o,rules:{required:r?g??`${e} is required`:!1},render:({field:h})=>{var j;return s.jsxs("div",{style:u,className:d,children:[s.jsx(L,{...h,multiple:!0,options:p,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,l)=>t.value===l,onChange:(t,l)=>{h.onChange(l.map(x=>x.value)),n&&n(l.map(x=>x.value))},value:p.filter(t=>{var l;return(l=h.value)==null?void 0:l.includes(t.value)}),disabled:c,renderInput:t=>s.jsx(M,{...t,label:e,placeholder:b,error:!!i[a],required:r}),renderTags:(t,l)=>t.map((x,m)=>q.createElement(X,{label:x.label,...l({index:m}),key:m}))}),i[a]&&s.jsx(S,{error:!0,children:String((j=i[a])==null?void 0:j.message)})]})}})},ue=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,allowedExtensions:p=[],classNames:b,onFileChangeOutside:d})=>{const[n,o]=q.useState(null),{control:i,formState:{errors:h},setError:j,clearErrors:t}=$(),l=(x,m)=>{var y;const v=x.target.files?x.target.files[0]:null;if(v){const w=(y=v.name.split(".").pop())==null?void 0:y.toLowerCase();if(p.length>0&&w&&!p.includes(w)){m(null),o(null),j(a,{type:"manual",message:`Invalid file type. Allowed types: ${p.join(", ")}`});return}t(a),o(v.name),m(v),d&&d(v)}else m(null),o(null),t(a)};return s.jsx(C,{name:a,control:i,rules:{required:r?g??`${e} is required`:!1},render:({field:x})=>{var m;return s.jsxs("div",{style:u,className:b,children:[s.jsx("label",{children:e}),s.jsx(_,{type:"file",disabled:c,onChange:v=>l(v,x.onChange)}),n&&s.jsxs("p",{children:["Selected file: ",n]}),h[a]&&s.jsx(S,{error:!0,children:String((m=h[a])==null?void 0:m.message)})]})}})},de=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,placeholder:p,rows:b=10,maxRows:d=10,maxLength:n,classNames:o})=>{var x;const[i,h]=q.useState(0),{control:j,formState:{errors:t}}=$(),l=m=>{h(m.target.value.length)};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(C,{name:a,control:j,rules:{required:r?g??`${e} is required`:!1},render:({field:m})=>{var v;return s.jsxs("div",{style:u,className:o,children:[s.jsx(M,{...m,multiline:!0,rows:b,style:u,maxRows:d,placeholder:p,disabled:c,error:!!t[a],required:r,variant:"outlined",inputProps:{...n?{maxLength:n}:{}},onChange:y=>{m.onChange(y),l(y)}}),n&&s.jsxs(H,{variant:"caption",style:{textAlign:"right",display:"block",marginTop:4},children:[i,"/",n," characters"]}),t[a]&&s.jsx(S,{error:!0,children:String((v=t[a])==null?void 0:v.message)})]})}})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),t[a]&&s.jsx(S,{error:!0,children:String((x=t[a])==null?void 0:x.message)})]})]})},he=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:c=!1,style:u,requiredMessage:g,classNames:p,defaultChecked:b=!1})=>{var o;const{control:d,formState:{errors:n}}=$();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(C,{name:a,control:d,rules:{required:r?g??`${e} is required`:!1},render:({field:i})=>s.jsx("div",{style:u,className:p,children:s.jsx(ne,{...i,checked:!!(i.value??b),onChange:h=>i.onChange(h.target.checked),disabled:c})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),n[a]&&s.jsx(S,{error:!0,children:String((o=n[a])==null?void 0:o.message)})]})]})},xe=({model:e,onChangeOutside:a})=>{switch(e.type){case"input":return s.jsx(R,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon,iconPosition:e.iconPosition});case"textarea":return s.jsx(de,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames});case"select":return s.jsx(oe,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"checkbox":return s.jsx(ce,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(pe,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"switch":return s.jsx(he,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(ue,{fieldLabel:e.label,fieldName:e.name,allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:a});default:return null}},ye=({formModel:e,url:a,redirectUrl:r,methods:c,onSave:u,isLoading:g,classForm:p,isCustom:b=!1,formCustom:d,formLogic:n})=>{const{setError:o}=c,{showToast:i}=A(),[h,j]=q.useState(!1),t=async l=>{var x,m,v,y;j(!0);try{const w=await Z.post(a,l,{headers:{"Content-Type":"application/json"}});i(w.data.message,"success"),u&&await u(w),r&&setTimeout(()=>{},2e3)}catch(w){if(B.isAxiosError(w)&&((m=(x=w.response)==null?void 0:x.data)!=null&&m.message)&&i(w.response.data.message,"error"),B.isAxiosError(w)&&((y=(v=w.response)==null?void 0:v.data)!=null&&y.errors)){const T=w.response.data.errors;Object.keys(T).forEach(I=>{o(I,{type:"server",message:T[I].join(", ")})})}}j(!1)};return s.jsxs(P,{...c,children:[s.jsx(ee,{isLoading:g||h}),s.jsxs("form",{onSubmit:c.handleSubmit(t),children:[s.jsxs("div",{className:p,children:[b?s.jsx(s.Fragment,{children:d}):s.jsx(s.Fragment,{children:e.map((l,x)=>s.jsx("div",{className:`mt-8 ${l.classPosition}`,children:s.jsx(xe,{model:l})},x))}),n]}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{ye as F};
