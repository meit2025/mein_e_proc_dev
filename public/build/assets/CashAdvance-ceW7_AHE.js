import{r as o,j as a}from"./app-D7bkbgw5.js";import{a as y,c as u}from"./index.esm-CrR-gKib.js";import{F as l}from"./formInput-CJXbZoQk.js";import{F as w}from"./formSwitch-DKsOAcVN.js";import"./app-CfpADx9m.js";import"./rupiahCurrencyFormat-D0mkqwcl.js";import"./FormHelperText-BPYnxJzg.js";import"./DefaultPropsProvider-Bjfv3iFq.js";import"./Switch-DYF-JgpJ.js";import"./createSimplePaletteValueFilter-CXOlb8EV.js";import"./SwitchBase-C5giL6Xd.js";import"./useControlled-B9Fy1pJe.js";const T=({disable:i})=>{const{getValues:_,setValue:n,watch:m}=y(),[v,h]=o.useState(!0),x=u({name:"is_cashAdvance"}),d=u({name:"currency_from"}),p=u({name:"vendors"}),g=e=>Array.isArray(e)?e.find(t=>t&&t.winner===!0):null;o.useEffect(()=>{const e=g(p);h(!e)},[p]);const r=m("total_all_amount"),j=e=>{console.log(e);const t=_("vendors").filter(s=>(s.winner||!1)===!0),f=(t.length>0?t[0]:null).units||[],I=f.reduce((s,c)=>s+parseInt(c.total_amount),0);n("total_all_amount",I);const b=f.reduce((s,c)=>c.unit_price>s?parseInt(c.unit_price):s,0);n("amount_max",b);const A=parseInt(e)/100*parseInt(r);n("cash_advance_purchases.nominal",A)};return o.useEffect(()=>{if(r>0){const e=parseInt(m("cash_advance_purchases.dp"))/100*parseInt(r);n("cash_advance_purchases.nominal",e)}},[r]),o.useEffect(()=>{d!=="IDR"&&(n("is_cashAdvance",!1),n("entertainment.jenis_kegiatan",""),n("cash_advance_purchases.dp",""),n("cash_advance_purchases.reference",""),n("cash_advance_purchases.nominal",""))},[d]),a.jsx("div",{children:d==="IDR"&&a.jsxs(a.Fragment,{children:[a.jsx(w,{fieldLabel:"Down Payment",fieldName:"is_cashAdvance",isRequired:!1,disabled:i}),x&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(l,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:i,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>j(e.target.value)}),a.jsx(l,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:i,type:"text",placeholder:"Enter reference"}),a.jsx(l,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:v?"Please Chose The Propose Vendor":""})]})]})})};export{T as default};
