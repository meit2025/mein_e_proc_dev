import{r as b,u as U,j as e}from"./app-D0k8ANBf.js";import{F as A,a as i,b as l,c,d}from"./form-B-6Vtrbi.js";import{z as n,t as B}from"./index-D0I6mLGm.js";import{F as D,B as L}from"./button-Dii4xCf6.js";import{u as P}from"./index.esm-8RqG44Kk.js";import{S as q}from"./scroll-area-Bo4eEmGK.js";import{S as m,a as h,b as x,c as j,d as p}from"./select-BuGpz6fa.js";import{a as u}from"./axiosInstance-Cf3pQb4D.js";import"./app-wnGHkkFm.js";import"./index-Cm0-u83G.js";import"./react-icons.esm-BsMu3n0J.js";import"./index-DPiSS62f.js";import"./Combination-BWN7NW2T.js";import"./index-D-aasjTs.js";import"./index-Cez4jd-i.js";function te({onSuccess:o,type:g,listPeriodReimburse:S,listUsers:v,storeURL:w,editURL:F,updateURL:z}){const T=n.object({period:n.string("Period must choose"),type:n.string("Type must choose"),user:n.string("User must choose")}),C={period:"",type:"",user:""},a=P({resolver:B(T),defaultValues:C}),[N,V]=b.useState([]);async function f(r){const s=`/api/master/reimburse-quota/selection_grade/${r}`;try{const I=(await u.get(s)).data.data;V(I)}catch{}a.setValue("user",r)}async function R(){try{const s=(await u.get(F)).data.data[0];await f(s.user),a.reset({period:s.period,user:s.user,type:s.type})}catch{}}const{showToast:y}=U(),E=async r=>{var s;try{const t=await u.post(w,r);o==null||o(!0),y((s=t==null?void 0:t.data)==null?void 0:s.message,"success")}catch(t){o==null||o(!1),y(t.message,"error")}};return b.useEffect(()=>{g===D.edit&&R()},[g]),e.jsx(q,{className:"h-[600px] w-full",children:e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(E),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"period",render:({field:r})=>{var s;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>r.onChange(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:S.map(t=>e.jsxs(p,{value:t.id.toString(),children:[t.start," - ",t.end]},t.id))})]})}),e.jsx(d,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"User"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"user",render:({field:r})=>{var s;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>f(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:v.map(t=>e.jsxs(p,{value:t.id.toString(),children:["(",t.nip,") ",t.name]},t.id.toString()))})]})}),e.jsx(d,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"type",render:({field:r})=>{var s;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>r.onChange(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:N.map(t=>e.jsx(p,{value:t.id.toString(),children:t.name},t.id))})]})}),e.jsx(d,{})]})}})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(L,{type:"submit",children:"Save"})})]})})})}export{te as default};
