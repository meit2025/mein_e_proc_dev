import{r as g,j as e}from"./app-D0k8ANBf.js";import{F as I,a as d,b as h,c as x,d as j}from"./form-B-6Vtrbi.js";import{z as m,t as S}from"./index-D0I6mLGm.js";import{B as A,F as V}from"./button-Dii4xCf6.js";import{u as _,b as D}from"./index.esm-8RqG44Kk.js";import{S as R}from"./scroll-area-Bo4eEmGK.js";import{S as $}from"./separator-snW8ZxAP.js";import{T as M,a as P,b as q,c as B}from"./tabs-Br_wabb1.js";import{S as f,a as y,b as F,c as b,d as p}from"./select-BuGpz6fa.js";import{C as H}from"./CustomDatePicker-DRQFjM-z.js";import{I as L}from"./input-BEyyrdK3.js";import{a as W}from"./axiosInstance-Cf3pQb4D.js";import"./app-wnGHkkFm.js";import"./index-Cm0-u83G.js";import"./index-B_TFQYDx.js";import"./index-DPiSS62f.js";import"./Combination-BWN7NW2T.js";import"./react-icons.esm-BsMu3n0J.js";import"./index-D-aasjTs.js";import"./createLucideIcon-D7HiOG8Q.js";import"./index-Cez4jd-i.js";const k="/api/master/family",z=`${k}/create`,fe=({onSuccess:t,type:i=V.create,id:n,user:s})=>{const a=m.object({user:m.string().min(1,"Choose Employee is Required"),total_family:m.number().min(1,"Total Family is Required"),families:m.array(m.object({status:m.string().min(1,"Type Family is Must Choose"),bod:m.date(),name:m.string().min(1,"Name Family is Required")}))}),[u,v]=g.useState("1"),w=async l=>{try{const r=await W.post(z,l);t==null||t(!0),C(r.message,"success")}catch(r){t==null||t(!1),C(r.message)}},o=_({resolver:S(a),defaultValues:{user:"",total_family:1,families:[{status:"",bod:new Date,name:""}]}}),T=l=>{v(l)};function N(){let l=[],r=parseInt(u);for(let c=0;c<r;c++)l.push({family:""});o.setValue("families",l)}const{fields:E,append:U,remove:Y,update:G}=D({control:o.control,name:"families"});return g.useEffect(()=>{N()},[u,n,i]),e.jsx(R,{className:"h-[600px] w-full ",children:e.jsx(I,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(w),children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Employee Name"}),e.jsx("td",{children:e.jsx(d,{control:o.control,name:"user",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{onValueChange:r=>l.onChange(r),value:l.value,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:s.map(r=>e.jsx(p,{value:r.nip,children:r.name},r.nip))})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Total Destination"}),e.jsxs("td",{children:[" ",e.jsx(d,{control:o.control,name:"total_family",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{value:u,onValueChange:T,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:Array.from({length:5},(r,c)=>e.jsxs(p,{value:(c+1).toString(),children:[" ",c+1," "]}))})]})}),e.jsx(j,{})]})})]})]})]}),e.jsx($,{className:"my-4"}),e.jsx(J,{form:o,familyField:E,totalFamily:o.getValues("total_family").toString()}),e.jsx(A,{type:"submit",children:"submit"})]})})})};function J({form:t,familyField:i,totalFamily:n}){return e.jsxs(M,{defaultValue:"family1",className:"w-full",children:[e.jsx(P,{className:"flex items-center justify-start space-x-4",children:i.map((s,a)=>e.jsxs(q,{value:`family${a+1}`,children:["Member - ",a+1]}))}),i.map((s,a)=>e.jsx(O,{form:t,index:a}))]})}function O({family:t,form:i,index:n}){return e.jsx(B,{value:`family${n+1}`,children:e.jsx("div",{children:e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.name`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(L,{type:"text",placeholder:"John Doe",...s,value:s.value||"",onChange:a=>s.onChange(a.target.value)})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Family Type"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.status`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{onValueChange:a=>s.onChange(a),value:s.value,children:[e.jsx(y,{className:"w-[200px]",children:e.jsx(F,{placeholder:"Child / Wife"})}),e.jsxs(b,{children:[e.jsx(p,{value:"wife",children:"Wife"}),e.jsx(p,{value:"child",children:"Child"})]})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Birth of Date"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.bod`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(H,{onDateChange:a=>s.onChange(a)})}),e.jsx(j,{})]})})})]})]})},n)})}function C(t,i){throw new Error("Function not implemented.")}export{O as FamilyForm,fe as FamilyHeaderForm,J as TabFamily};
