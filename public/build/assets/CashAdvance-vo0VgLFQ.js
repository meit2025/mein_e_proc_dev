import{r as o,j as a}from"./app-Lvb1EssK.js";import{F as u}from"./formInput-DrGbGRF_.js";import{F as y}from"./formSwitch-DV4RbkOJ.js";import{a as R,c as l}from"./index.esm-B1s2IeAh.js";import"./app-DQK4SJPx.js";import"./rupiahCurrencyFormat-D0mkqwcl.js";import"./FormHelperText-C-hZYM-1.js";import"./DefaultPropsProvider-BW0XaPzi.js";import"./Switch-B4JP7rXd.js";import"./createSimplePaletteValueFilter-2nsucJNV.js";import"./SwitchBase-ClS2MDD3.js";import"./useControlled-CBBsnl9C.js";const T=({disable:i})=>{const{getValues:_,setValue:n,watch:m}=R(),[v,h]=o.useState(!0),x=l({name:"is_cashAdvance"}),d=l({name:"currency_from"}),p=l({name:"vendors"}),g=e=>Array.isArray(e)?e.find(t=>t&&t.winner===!0):null;o.useEffect(()=>{const e=g(p);h(!e)},[p]);const r=m("total_all_amount"),j=e=>{console.log(e);const t=_("vendors").filter(s=>(s.winner||!1)===!0),f=(t.length>0?t[0]:null).units||[],A=f.reduce((s,c)=>s+parseInt(c.total_amount),0);n("total_all_amount",A);const I=f.reduce((s,c)=>c.unit_price>s?parseInt(c.unit_price):s,0);n("amount_max",I);const b=parseInt(e)/100*parseInt(r);n("cash_advance_purchases.nominal",b)};return o.useEffect(()=>{if(r>0){const e=parseInt(m("cash_advance_purchases.dp"))/100*parseInt(r);n("cash_advance_purchases.nominal",e)}},[r]),o.useEffect(()=>{d!=="IDR"&&(n("is_cashAdvance",!1),n("entertainment.jenis_kegiatan",""),n("cash_advance_purchases.dp",""),n("cash_advance_purchases.reference",""),n("cash_advance_purchases.nominal",""))},[d]),a.jsx("div",{children:d==="IDR"&&a.jsxs(a.Fragment,{children:[a.jsx(y,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:i}),x&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(u,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:i,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>j(e.target.value)}),a.jsx(u,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:i,type:"text",placeholder:"Enter reference"}),a.jsx(u,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:v?"Please Chose The Propose Vendor":""})]})]})})};export{T as default};
