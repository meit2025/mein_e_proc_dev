import{u as A,r as R,j as e}from"./app-BoGhxFfj.js";import{F as _,a as i,b as o,c as d,d as c}from"./form-BM_GaCgb.js";import{z as l,t as P}from"./index-BumsDIuW.js";import{F as h,B as U}from"./button-BkVfOLOa.js";import{u as V}from"./index.esm-qKGhRFQd.js";import{S as B}from"./scroll-area-_rL8zPVH.js";import{S as j,a as u,b as p,c as g,d as f}from"./select-CANdNcqw.js";import{I as v}from"./input-CBBrWyLw.js";import{a as C}from"./axiosInstance-CiXY2vKi.js";import"./app-wnGHkkFm.js";import"./index-dtF5_4Zn.js";import"./react-icons.esm-DkdrgO7U.js";import"./index-BNzbO34V.js";import"./Combination-D5lZjH_0.js";import"./index-h1by9faH.js";import"./index-uCvVN-5v.js";const w="/api/master/reimburse-quota",D=`${w}/create`,G=a=>`${w}/detail/${a}`;function re({onSuccess:a,type:m=h.create,id:x,listTypeReimburse:E,listPeriodReimburse:S,listGrade:F}){const T=l.object({period:l.string("Period must choose"),type:l.string("Type must choose"),grade:l.string("Grade must choose"),limit:l.number("Limit must set"),plafon:l.number("Plafon must set")}),I={period:"",type:"",grade:"",limit:0,plafon:0};async function N(){const t=G(x);try{const s=await C.get(t);n.reset({id:s.data.data.id})}catch{}}const n=V({resolver:P(T),defaultValues:I}),{showToast:b}=A(),y=async t=>{var s;try{const r=await C.post(D,t);a==null||a(!0),b((s=r==null?void 0:r.data)==null?void 0:s.message,"success")}catch(r){a==null||a(!1),b(r.message,"error")}};return R.useEffect(()=>{x&&m==h.edit&&N()},[x,m]),e.jsx(B,{className:"h-[600px] w-full",children:e.jsx(_,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(y),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"period",render:({field:t})=>{var s;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:S.map(r=>e.jsxs(f,{value:r.id.toString(),children:[r.start," - ",r.end]},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"type",render:({field:t})=>{var s;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:E.map(r=>e.jsx(f,{value:r.id.toString(),children:r.name},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"grade",render:({field:t})=>{var s;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:F.map(r=>e.jsx(f,{value:r.id.toString(),children:r.grade},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Limit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:n.control,disabled:m==h.edit,name:"limit",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(v,{type:"number",placeholder:"0.0",onChange:s=>t.onChange(Number(s.target.value)),value:t.value||0})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Plafon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:n.control,disabled:m==h.edit,name:"plafon",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(v,{type:"number",placeholder:"0",...t,onChange:s=>t.onChange(Number(s.target.value)),value:t.value||0})}),e.jsx(c,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(U,{type:"submit",children:"Save"})})]})})})}export{re as default};
