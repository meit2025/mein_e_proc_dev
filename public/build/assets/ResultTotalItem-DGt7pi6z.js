import{r as m,j as t}from"./app-B0sgHWss.js";import{c as f}from"./index.esm-DLrvskkb.js";/* empty css              */import{f as w}from"./rupiahCurrencyFormat-CP-6egij.js";import"./app-DQK4SJPx.js";function F({allowanceField:a,destinationIndex:l,form:r,setTotalAllowance:u}){const[p,o]=m.useState(0);m.useEffect(()=>{const s=a.reduce((c,i,h)=>{const j=r.getValues(`destinations.${l}.allowances.${h}.detail`),x=d(i,j);return c+x},0),n=r.getValues("destinations").reduce((c,i,h)=>{const x=(i.allowances||[]).reduce((T,b,$)=>{const N=r.getValues(`destinations.${h}.allowances.${$}.detail`),R=d(b,N);return T+R},0);return c+x},0);o(s),u(n)},[a,r.watch()]);const d=(s,e)=>{var n;return s.type==="total"?parseFloat(((n=e==null?void 0:e[0])==null?void 0:n.request_price)||0):e==null?void 0:e.reduce((c,i)=>c+parseFloat(i.request_price||0),0)};return t.jsx(t.Fragment,{children:t.jsxs("table",{className:"w-full text-sm mt-10",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"w-[50%]",children:"Item"}),t.jsx("th",{className:"w-[50%]",children:"Sub Total"})]})}),t.jsx("tbody",{children:a.map((s,e)=>t.jsx(g,{allowance:s,destinationIndex:l,form:r,allowanceIndex:e}))}),t.jsx("tfoot",{className:"mt-4",children:t.jsxs("tr",{className:"font-bold",children:[t.jsx("td",{children:t.jsx("i",{children:"Total Allowance"})}),t.jsxs("td",{className:"flex justify-between pr-4",children:[t.jsx("span",{children:t.jsx("i",{children:"IDR"})}),t.jsx("span",{children:t.jsx("i",{children:w(p)})})]})]})})]})})}function g({allowance:a,destinationIndex:l,form:r,allowanceIndex:u}){const p=f({control:r.control,name:`destinations.${l}.allowances.${u}.detail.0.request_price`}),o=f({control:r.control,name:`destinations.${l}.allowances.${u}.detail`}),d=()=>{if(a.type==="total")return parseFloat(p||0)*1;{let s=0;return o==null||o.forEach(e=>{const n=parseFloat(e.request_price||0);s+=n}),s}};return t.jsxs("tr",{children:[t.jsx("td",{children:a.name}),t.jsxs("td",{className:"flex justify-between pr-4",children:[t.jsx("span",{children:"IDR"}),t.jsx("span",{children:w(d())})]})]},a.id)}export{g as ResultPerItem,F as ResultTotalItem};
