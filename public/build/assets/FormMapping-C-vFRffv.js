import{j as s,r as N,u as T,a as E}from"./app-BIOi_O7g.js";import{F as A}from"./formInput-BPuc0CbG.js";import{F as I}from"./formDropdown-RKh2Q0TR.js";import{a as v,C as L,F as k}from"./index.esm-BVoG1Nd3.js";import{F as R,C as $}from"./FormControlLabel-jW00YpkD.js";import{F as M}from"./FormHelperText-CHQ023vO.js";import{A as P,T as B,C as H,I as V}from"./TextField-DmqETZAO.js";import{F as W,a as _}from"./formSwitch-CFRGyknd.js";import{a as z}from"./axiosInstance-DV-uprs0.js";import{L as D}from"./Header-BrpAJwcH.js";const G=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:h,requiredMessage:f,classNames:c})=>{const{control:g,formState:{errors:d}}=v();return s.jsx(L,{name:r,control:g,rules:{required:p?f??`${e} is required`:!1},render:({field:o})=>{var u;return s.jsxs("div",{style:h,className:c,children:[s.jsx(R,{control:s.jsx($,{...o,checked:!!o.value,disabled:x}),label:e}),d[r]&&s.jsx(M,{error:!0,children:String((u=d[r])==null?void 0:u.message)})]})}})},J=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:h,requiredMessage:f,options:c=[],placeholder:g,classNames:d,onChangeOutside:o})=>{const{control:u,formState:{errors:j}}=v();return s.jsx(L,{name:r,control:u,rules:{required:p?f??`${e} is required`:!1},render:({field:m})=>{var q;return s.jsxs("div",{style:h,className:d,children:[s.jsx(P,{...m,multiple:!0,options:c,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,i)=>t.value===i,onChange:(t,i)=>{m.onChange(i.map(n=>n.value)),o&&o(i.map(n=>n.value))},value:c.filter(t=>{var i;return(i=m.value)==null?void 0:i.includes(t.value)}),disabled:x,renderInput:t=>s.jsx(B,{...t,label:e,placeholder:g,error:!!j[r],required:p}),renderTags:(t,i)=>t.map((n,a)=>N.createElement(H,{label:n.label,...i({index:a}),key:a}))}),j[r]&&s.jsx(M,{error:!0,children:String((q=j[r])==null?void 0:q.message)})]})}})},K=({fieldLabel:e,fieldName:r,isRequired:p=!1,disabled:x=!1,style:h,requiredMessage:f,allowedExtensions:c=[],classNames:g,onFileChangeOutside:d})=>{const[o,u]=N.useState(null),{control:j,formState:{errors:m},setError:q,clearErrors:t}=v(),i=(n,a)=>{var y;const l=n.target.files?n.target.files[0]:null;if(l){const F=(y=l.name.split(".").pop())==null?void 0:y.toLowerCase();if(c.length>0&&F&&!c.includes(F)){a(null),u(null),q(r,{type:"manual",message:`Invalid file type. Allowed types: ${c.join(", ")}`});return}t(r),u(l.name),a(l),d&&d(l)}else a(null),u(null),t(r)};return s.jsx(L,{name:r,control:j,rules:{required:p?f??`${e} is required`:!1},render:({field:n})=>{var a;return s.jsxs("div",{style:h,className:g,children:[s.jsx("label",{children:e}),s.jsx(V,{type:"file",disabled:x,onChange:l=>i(l,n.onChange)}),o&&s.jsxs("p",{children:["Selected file: ",o]}),m[r]&&s.jsx(M,{error:!0,children:String((a=m[r])==null?void 0:a.message)})]})}})},O=({model:e,onChangeOutside:r})=>{switch(e.type){case"input":return s.jsx(A,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon,iconPosition:e.iconPosition});case"textarea":return s.jsx(_,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames});case"select":return s.jsx(I,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:r});case"checkbox":return s.jsx(G,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(J,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:r});case"switch":return s.jsx(W,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(K,{fieldLabel:e.label,fieldName:e.name,allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:r});default:return null}},ie=({formModel:e,url:r,redirectUrl:p,methods:x,onSave:h,isLoading:f,classForm:c,isCustom:g=!1,formCustom:d,formLogic:o,disableButtonSubmit:u=!1})=>{const{setError:j,watch:m}=x,{showToast:q}=T(),[t,i]=N.useState(!1),n=async a=>{var l,y,F,S;i(!0);try{const b=await z.post(r,a,{headers:{"Content-Type":"application/json"}});q(b.data.message,"success"),h&&await h(b),p&&setTimeout(()=>{window.location.href=p},2e3)}catch(b){if(E.isAxiosError(b)&&((y=(l=b.response)==null?void 0:l.data)!=null&&y.message)&&q(b.response.data.message,"error"),E.isAxiosError(b)&&((S=(F=b.response)==null?void 0:F.data)!=null&&S.errors)){const w=b.response.data.errors;Object.keys(w).forEach(C=>{j(C,{type:"server",message:w[C].join(", ")})})}}i(!1)};return s.jsxs(k,{...x,children:[s.jsx(D,{isLoading:f||t}),s.jsxs("form",{onSubmit:x.handleSubmit(n),children:[s.jsxs("div",{className:c,children:[g?s.jsx(s.Fragment,{children:d}):s.jsx(s.Fragment,{children:(e??[]).map((a,l)=>s.jsx("div",{className:`mt-8 ${a.classPosition}`,children:!a.conditional||m(a.parameterConditional??"")===a.conditional?s.jsx(O,{model:a}):null},l))}),o]}),!u&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{ie as F};
