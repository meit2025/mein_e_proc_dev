import{r as E,u as A,j as e}from"./app-Cp_-tSGF.js";import{F as B,a as l,b as o,c as i,d}from"./form-C5NutZ6z.js";import{z as t,t as V}from"./index-ChvvJgth.js";import{F as h,B as $}from"./button-VE0I-KHr.js";import{u as q}from"./index.esm-Borx5QGt.js";import{S as O}from"./scroll-area-CwAZDnNk.js";import{S as u,a as j,b as p,c as g,d as x}from"./select-DCncYRXn.js";import{I as b}from"./input-DyPe-S7i.js";import{a as w}from"./axiosInstance-CVrw0qDt.js";import{u as C}from"./getDropdown-CX1KA6U8.js";import{L as Y}from"./Loading-DA88XTeJ.js";const _="/api/master/reimburse-type",te=`${_}/`,z=`${_}/create`,ne=n=>`${_}/edit/${n}`,le=n=>`${_}/update/${n}`;function G({onSuccess:n,listGrades:S,editURL:N,updateURL:k,type:c,id:y}){const I=t.object({code:t.string().min(1,"Code is required"),name:t.string().min(1,"Name is required"),is_employee:t.boolean(),plafon:t.number().min(1,"Plafon Number Must input >= 1"),limit:t.number().min(1,"Limit Number Must input >= 1"),grade:t.string(),material_group:t.string().min(1,"Material group required"),material_number:t.string().min(1,"Material number required")}),{dataDropdown:M,getDropdown:R}=C(),{dataDropdown:T,getDropdown:F}=C(),[P,v]=E.useState(!1),D={code:"",name:"",is_employee:!0},a=q({resolver:V(I),defaultValues:D});async function L(){try{const r=(await w.get(N)).data.data[0];a.reset({code:r.code,name:r.name,limit:r.limit,plafon:r.plafon,is_employee:r.is_employee,grade:r.grade,material_group:r.material_group,material_number:r.material_number})}catch{}}const{showToast:f}=A(),U=async s=>{var r;v(!0);try{const m=await w.post(z,s);n&&n(!0),f((r=m==null?void 0:m.data)==null?void 0:r.message,"success")}catch(m){n&&n(!1),f(m.message,"error")}v(!1)};return E.useEffect(()=>{R("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),F("",{name:"material_number",id:"material_number",tabel:"master_materials"}),c===h.edit&&L()},[y,c]),e.jsxs(O,{className:"h-[600px] w-full",children:[e.jsx(Y,{isLoading:P}),e.jsx(B,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(U),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(l,{control:a.control,disabled:c===h.edit,name:"code",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsx(b,{type:"text",placeholder:"Insert code",...s,value:s.value||"",onChange:r=>s.onChange(r.target.value)})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsx(b,{type:"text",...s,value:s.value||"",onChange:r=>s.onChange(r.target.value)})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"For"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"is_employee",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsxs(u,{onValueChange:r=>s.onChange(r==="true"),value:s.value?"true":"false",children:[e.jsx(j,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsxs(g,{children:[e.jsx(x,{value:"true",children:"Employee"},"is_employee"),e.jsx(x,{value:"false",children:"Family"},"is_employee")]})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Limit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(l,{control:a.control,disabled:c==h.edit,name:"limit",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsx(b,{onChange:r=>s.onChange(Number(r.target.value)),value:s.value})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Plafon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(l,{control:a.control,disabled:c==h.edit,name:"plafon",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsx(b,{onChange:r=>s.onChange(Number(r.target.value)),value:s.value})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"grade",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsxs(u,{onValueChange:r=>s.onChange(r),value:s.value,children:[e.jsx(j,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:S.map(r=>e.jsx(x,{value:r.id.toString(),children:r.grade.toString()},r.id.toString()))})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Group"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"material_group",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsxs(u,{onValueChange:r=>s.onChange(r),value:s.value,children:[e.jsx(j,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:M.map(r=>e.jsx(x,{value:r.value,children:r.label},r.id))})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Number"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"material_number",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:e.jsxs(u,{onValueChange:r=>s.onChange(r),value:s.value,children:[e.jsx(j,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:T.map(r=>e.jsx(x,{value:r.value,children:r.label},r.value))})]})}),e.jsx(d,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx($,{type:"submit",children:"Save"})})]})})]})}const oe=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));export{ne as E,te as L,G as R,le as U,oe as f};
