import{r as C,j as e}from"./app-DbR5lOQK.js";import{a as S,C as v}from"./index.esm-CTZI46ZR.js";import{I as A}from"./TextField-ByP55vVX.js";import{F as I}from"./FormHelperText-DdqNjKq0.js";const L=({fieldLabel:i,fieldName:r,isRequired:x=!1,disabled:d=!1,style:j,requiredMessage:y,allowedExtensions:a=[],classNames:F,onFileChangeOutside:u})=>{const[R,o]=C.useState(null),{control:h,formState:{errors:c},setError:m,clearErrors:p}=S(),b=(l,t)=>{var g;const s=l.target.files?l.target.files[0]:null;if(s){const f=(g=s.name.split(".").pop())==null?void 0:g.toLowerCase();if(a.length>0&&f&&!a.includes(f)){l.target.value="",t(null),o(null),m(r,{type:"manual",message:`Invalid file type. Allowed types: ${a.join(", ")}`});return}const n=new FileReader;n.readAsDataURL(s),n.onload=()=>{typeof n.result=="string"?u&&u(n.result,s.name):m(r,{type:"manual",message:"Failed to read file as Base64"})},n.onerror=()=>m(r,{type:"manual",message:"Failed to read file as Base64"}),p(r),o(s.name),t(s)}else t(null),o(null),p(r)};return e.jsx(v,{name:r,control:h,rules:{required:x?y??`${i} is required`:!1},render:({field:l})=>{var t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:j,className:F,children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 max-w-75",children:i}),e.jsx(A,{type:"file",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",disabled:d,onChange:s=>b(s,l.onChange)})]}),e.jsxs("span",{style:{marginLeft:"6rem",marginTop:"0.5rem",fontSize:"0.75rem"},children:[a.length>0&&e.jsxs(e.Fragment,{children:["Allowed types: ",a.join(", ")]}),e.jsx("br",{}),c[r]&&e.jsx(I,{error:!0,children:String((t=c[r])==null?void 0:t.message)})]})]})}})};export{L as F};
