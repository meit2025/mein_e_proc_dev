import{u as ue,r as j,j as e}from"./app-x0vqMIUy.js";/* empty css              */import{d as je,F as g,a as _,b as w,c as v,e as fe}from"./form-CeDucTVc.js";import{u as ge,b as I,a as _e,c as G}from"./index.esm-DNaWWHYD.js";import{S as we,a as ve,b as be,c as ye,d as Ae}from"./select-BdtwPAj3.js";import{S as te}from"./separator-BVb9vq_s.js";import{T as De}from"./textarea-cLsSQLI1.js";import{I as y}from"./input-D0FssFDD.js";import{T as Ne,a as Te,b as Se,c as Fe}from"./tabs-Cm_5E2bN.js";import{z as r,t as $e}from"./index-C2MQA_mD.js";import{S as Ce}from"./scroll-area-Bepvm6C7.js";import{C as Re,E as qe,G as Ee}from"./api-DaqhM5Hc.js";import{BusinessTripType as z}from"./models-DqsehwiO.js";import{a as se}from"./axiosInstance-DC2Ozgr1.js";import{h as $}from"./moment-C5S46NFB.js";import{B as W}from"./button-BK8NEDTK.js";import{d as ae}from"./index-BEjVfUnM.js";import{W as Ye}from"./WorkflowComponent-CAuPIhV8.js";import{F as ke}from"./formDropdown-DQgp11yx.js";import{u as Ve}from"./getDropdown-Bnr_Y7vi.js";import{f as U}from"./rupiahCurrencyFormat-CP-6egij.js";import{B as Ie}from"./Button-TKStrXK8.js";import{C as Me}from"./chevrons-up-down-n_vNI0t6.js";import"./app-DQK4SJPx.js";import"./index-C0ZjVFPc.js";import"./utils-CMCdQ9Ec.js";import"./index-Bv-JHkl9.js";import"./index-Bb4qSo10.js";import"./index-Cm6BW04R.js";import"./index-DIi3v1vA.js";import"./index-BURT-ogB.js";import"./index-CgSRQGBw.js";import"./Combination-2P47IzVY.js";import"./index-CUZ6j08t.js";import"./index-aRdJfT29.js";import"./index-B8jRRkSC.js";import"./index-DddKYkWV.js";import"./CustomStatus-CyjSpUgV.js";import"./createLucideIcon-CCl6qnvb.js";import"./createSvgIcon-y6GdGt9h.js";import"./DefaultPropsProvider-CFJ5AoEg.js";import"./TextField-55ypvXce.js";import"./useSlot-CSQgVcbI.js";import"./createSimplePaletteValueFilter-D1BCRzmc.js";import"./useControlled-7j6xlwzB.js";import"./FormHelperText-CwM95F_e.js";const Pe=1*1024*1024,Be=["image/jpeg","image/jpg","image/png","application/pdf"],Lt=({type:l,id:t})=>{var Z;const d=r.object({request_no:r.string().nonempty("Request for required"),remark:r.string().nonempty("Remark is required"),attachment:r.array(r.instanceof(File).refine(i=>Be.includes(i.type),{message:"File type must be JPG, JPEG, PNG, or PDF"}).refine(i=>i.size<=Pe,{message:"File size must be less than 1MB"})),total_destination:r.number().int("Total Destinantion Required"),destinations:r.array(r.object({destination:r.string().nonempty("Destinantion Required"),business_trip_start_date:r.date().optional(),business_trip_end_date:r.date().optional(),detail_attedances:r.array(r.object({date:r.string().optional(),shift_code:r.string().optional(),shift_start:r.string().optional(),shift_end:r.string().optional(),start_time:r.string().optional(),end_time:r.string().optional(),request_start_time:r.string().optional(),request_end_time:r.string().optional()})),allowances:r.array(r.object({name:r.string().optional(),code:r.string().optional(),default_price:r.string().optional(),type:r.string().optional(),currency:r.string().optional(),subtotal:r.number().optional(),detail:r.array(r.object({date:r.string().nullish(),request_price:r.string().optional()}))})),other:r.array(r.object({value:r.number().optional()}))}))}),a=ge({resolver:$e(d),defaultValues:{request_no:"",remark:"",attachment:[],total_destination:1,destinations:[{destination:"",business_trip_start_date:new Date,business_trip_end_date:new Date,detail_attedances:[],allowances:[],other:[{value:0}]}]}}),f=(i,h)=>{var s;return i.type==="total"?parseFloat(((s=h==null?void 0:h[0])==null?void 0:s.request_price)||0):h==null?void 0:h.reduce((o,b)=>o+parseFloat(b.request_price||0),0)},x=()=>a.getValues("destinations").reduce((s,o,b)=>{const M=(o.allowances||[]).reduce((P,B,L)=>{const O=a.getValues(`destinations.${b}.allowances.${L}.detail`),X=f(B,O);return P+X},0);return s+M},0),{showToast:c}=ue(),n=async i=>{var h;try{if(l==z.create){const s=x(),o=new FormData;o.append("user_id",((h=p.request_for)==null?void 0:h.id.toString())??""),o.append("value",s.toString()),o.append("request_no",i.request_no??""),o.append("remark",i.remark??""),i.attachment.forEach((b,q)=>{b&&o.append(`attachment[${q}]`,b)}),o.append("total_destination",`${i.total_destination}`),i.destinations.forEach((b,q)=>{o.append(`destinations[${q}]`,JSON.stringify(b))}),await ae.Inertia.post(Re,o,{headers:{"Content-Type":"multipart/form-data"}}),c("succesfully created data","success")}else{const s=new FormData;s.append("remark",i.remark??""),i.attachment.forEach((o,b)=>{o&&s.append(`attachment[${b}]`,o)}),await ae.Inertia.post(`${qe}/${t}`,s,{headers:{"Content-Type":"multipart/form-data"}}),c("succesfully updated data","success")}}catch(s){console.log(s)}},[p,E]=j.useState([]),[T,m]=j.useState([]),[u,A]=j.useState([]);async function D(i){a.setValue("request_no",i||"");const h=Ee(i);try{const s=await se.get(h);console.log(i," get");const o=s.data.data;console.log(o," Response Detail Business Trip"),a.setValue("remark",o.remarks||""),a.setValue("total_destination",o.total_destination||1),E(s.data.data),A(o.destinations),N(o.total_destination),F(o.destinations)}catch(s){console.log(s)}}const[C,N]=j.useState(""),R=i=>{N(i)};console.log(p,"businessTripDetail");function F(i){const h=i.map(s=>({destination:s.destination||"",pajak:s.pajak||"",purchasing_group:s.purchasing_group||"",business_trip_start_date:new Date(s.business_trip_start_date),business_trip_end_date:new Date(s.business_trip_end_date),allowances:s.allowances||[],detail_attedances:s.detail_attedances||[],total_allowance:s.total_allowance||0,other:s.other||[]}));a.setValue("destinations",h)}const{fields:J,append:H,remove:ze,update:ne}=I({control:a.control,name:"destinations"});j.useEffect(()=>{},[p,C]);const[Ue,le]=j.useState(0),[re,ie]=j.useState(!1),[V,oe]=j.useState({approvalRequest:[],approvalFrom:[],acknowledgeFrom:[],approvalFromStatusRoute:[]}),K=async()=>{var i,h,s,o,b,q,M,P,B,L,O,X,Q;try{const Y=x();if(Y===0){c("Please fill the balance","error");return}const k=await se.get("/check-approval",{params:{value:Y,user_id:((i=p.request_for)==null?void 0:i.id)??"",type:"TRIP_DECLARATION"}});if(k.data.status_code===200){const me=(s=(h=k.data)==null?void 0:h.data)==null?void 0:s.approval.map(S=>(S==null?void 0:S.division_name)||null),he=(b=(o=k.data)==null?void 0:o.data)==null?void 0:b.approval.map(S=>(S==null?void 0:S.name)||null),ee=[];(M=(q=k.data)==null?void 0:q.data)!=null&&M.hr&&ee.push((L=(B=(P=k.data)==null?void 0:P.data)==null?void 0:B.hr)==null?void 0:L.name);const xe=(((O=k.data.data)==null?void 0:O.approval)??[]).map(S=>({status:"",name:S.name,dateApproved:""}));oe({approvalRequest:me,approvalFrom:he,acknowledgeFrom:ee,approvalFromStatusRoute:xe}),ie(!0)}}catch(Y){c((Q=(X=Y==null?void 0:Y.response)==null?void 0:X.data)==null?void 0:Q.message,"error")}},{dataDropdown:ce,getDropdown:de}=Ve();j.useEffect(()=>{x()>0&&K(),de("",{name:"request_no",id:"id",tabel:"business_trip",idType:"string",where:{key:"type",parameter:"request"},declaration:"true"})},[a.watch("destinations")]),j.useState([]);async function pe(){}return j.useEffect(()=>{t&&l==z.edit&&pe()},[l]),e.jsx(Ce,{className:"h-[600px] w-full ",children:e.jsx(je,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(n),children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Declaration No."}),e.jsx("td",{children:"DCLR-YYYY-MM-XXXXXXX"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request No."}),e.jsx("td",{children:e.jsx(ke,{fieldLabel:"",options:ce,fieldName:"request_no",isRequired:!0,disabled:l==z.edit?!!a.watch("request_no"):!1,placeholder:"Select Request No.",classNames:"mt-2 w-full",onChangeOutside:i=>{D(i)}})})]}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{className:"text-sm",children:p.name_purpose})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request for"}),e.jsx("td",{className:"text-sm",children:p.name_request})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Cost Center"}),e.jsx("td",{className:"text-sm",children:(Z=p==null?void 0:p.cost_center)==null?void 0:Z.company_code})]})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Remark"}),e.jsx("td",{children:e.jsx(g,{control:a.control,name:"remark",render:({field:i})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(De,{placeholder:"Insert remark",...i,rows:4,className:"w-[300px]"})}),e.jsx(v,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"File Attachment"}),e.jsx("td",{children:e.jsx(g,{control:a.control,name:"attachment",render:({field:i})=>e.jsxs(_,{children:[e.jsx(fe,{className:"text-xs text-gray-500 font-extralight mb-1",children:"Max File: 1000KB"}),e.jsx(w,{children:e.jsx("input",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-xs shadow-sm transition-colors file:border-0 file:bg-transparent file:text-xs file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",type:"file",multiple:!0,onChange:h=>{const s=h.target.files;if(s){const o=Array.from(s);i.onChange(o)}else i.onChange([])}})}),a.formState.errors.attachment&&Array.isArray(a.formState.errors.attachment)?a.formState.errors.attachment.map((h,s)=>e.jsx("p",{className:"text-[0.8rem] font-medium text-destructive",children:h.message},s)):null]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"File Extension"}),e.jsx("td",{className:"text-gray-500 text-xs font-extralight",children:"jpg,jpeg,png,pdf"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Total Destination"}),e.jsxs("td",{children:[" ",e.jsx(g,{control:a.control,name:"total_destination",render:({field:i})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsxs(we,{value:C,onValueChange:R,disabled:!0,children:[e.jsx(ve,{className:"w-[200px] py-2",children:e.jsx(be,{placeholder:"-- Select Bussiness Trip --"})}),e.jsx(ye,{children:Array.from({length:5},(h,s)=>e.jsxs(Ae,{value:(s+1).toString(),children:[" ",s+1," "]},s))})]})}),e.jsx(v,{})]})})]})]})]}),e.jsx(te,{className:"my-4"}),e.jsx(Le,{updateDestination:ne,destinationField:J,form:a,listAllowances:T,totalDestination:a.getValues("total_destination").toString(),setTotalAllowance:le,businessTripDetail:p}),e.jsx(te,{className:"my-4"}),e.jsx(Ie,{onClick:async()=>await K(),variant:"contained",color:"primary",type:"button",children:"Check Approval"}),e.jsx("div",{className:"my-2",children:re&&e.jsx(Ye,{workflowApproval:{approvalRequest:V.approvalRequest,approvalFrom:V.approvalFrom,acknowledgeFrom:V.acknowledgeFrom},workflowApprovalStep:V.approvalFromStatusRoute,workflowApprovalDiagram:V.approvalFrom})}),e.jsx(W,{type:"submit",children:"submit"})]})})})};function Le({totalDestination:l,listAllowances:t,form:d,destinationField:a,updateDestination:f,setTotalAllowance:x,businessTripDetail:c}){return e.jsxs(Ne,{defaultValue:"destination1",className:"w-full",children:[e.jsx(Te,{className:"flex items-center justify-start space-x-4",children:a.map((n,p)=>e.jsxs(Se,{value:`destination${p+1}`,children:["Destination ",p+1]}))}),a.map((n,p)=>e.jsx(Oe,{listAllowances:t,updateDestination:f,destination:n,form:d,index:p,setTotalAllowance:x,businessTripDetail:c}))]})}function Oe({form:l,index:t,destination:d,updateDestination:a,listAllowances:f,setTotalAllowance:x,businessTripDetail:c}){const{fields:n,update:p,append:E,remove:T}=I({control:l.control,name:`destinations[${t}].detail_attedances`}),{fields:m,update:u,append:A,remove:D,replace:C}=I({control:l.control,name:`destinations[${t}].allowances`});j.useState(!1);const{setValue:N}=_e(),R=G({control:l.control,name:"total_percent"}),F=c.total_cash_advance;return j.useEffect(()=>{const H=parseFloat(R||0)/100*F;N("total_cash_advance",H.toFixed(2))},[R,F,N]),e.jsxs(Fe,{value:`destination${t+1}`,children:[e.jsxs("div",{children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Destination"}),e.jsx("td",{children:d.destination})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Pajak"}),e.jsx("td",{className:"text-sm",children:d==null?void 0:d.pajak})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purchasing Group"}),e.jsx("td",{className:"text-sm",children:d==null?void 0:d.purchasing_group})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Bussines Trip Date"}),e.jsxs("td",{className:"flex space-x-2 items-center gap-3",children:[e.jsx("span",{children:$(d.business_trip_start_date).format("DD/MM/YYYY")}),e.jsx("span",{children:"To"}),e.jsx("span",{children:$(d.business_trip_end_date).format("DD/MM/YYYY")})]})]})]}),e.jsx(Xe,{detailAttedanceFields:n,form:l,updateAttedanceFields:p,destinationIndex:t}),e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm",children:"Detail Bussines Trip Allowance:"}),e.jsx("td",{})]})}),e.jsx(Ge,{allowanceField:m,destinationIndex:t,form:l})]},t),e.jsx("table",{className:"w-full text-sm mt-10",children:e.jsxs("tr",{children:[e.jsx("td",{className:"w-[20%]",children:"Cash Advance"}),e.jsx("td",{className:"w-[80%] flex",children:F})]})})]})}function Ot({allowanceField:l,destinationIndex:t,form:d,setTotalAllowance:a}){const f=d.watch(`destinations[${t}].allowances`),x=d.watch(`destinations[${t}].total_allowance`);return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"w-full text-sm mt-10",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[50%]",children:"Item"}),e.jsx("th",{className:"w-[50%]",children:"Sub Total"})]})}),e.jsx("tbody",{children:f.map((c,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:c.name}),e.jsxs("td",{className:"flex justify-between pr-4",children:[e.jsx("span",{children:"IDR"}),e.jsx("span",{children:c.subtotal})]})]},c.id))}),e.jsx("tfoot",{className:"mt-4",children:e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("i",{children:"Total Allowance"})}),e.jsxs("td",{className:"flex justify-between pr-4",children:[e.jsx("span",{children:"IDR"}),e.jsx("span",{children:x})]})]})})]})})}function Xe({form:l,destinationIndex:t,detailAttedanceFields:d,updateAttedanceFields:a}){const f=l.watch(`destinations[${t}].detail_attedances`);return j.useEffect(()=>{},[f]),j.useEffect(()=>{},[d]),e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:e.jsx("div",{className:"mb-4 text-sm",children:"Detail Attedance: "})})}),e.jsx("tr",{children:e.jsx("td",{className:"overflow-x",children:e.jsxs("table",{className:"detail-attedance text-xs table-auto overflow-scroll w-full",children:[e.jsxs("thead",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Shift code"}),e.jsx("th",{children:"Shift Start"}),e.jsx("th",{children:"Shift End"}),e.jsx("th",{children:"Request Start Time"}),e.jsx("th",{children:"Request End Time"}),e.jsx("th",{children:"Start Time"}),e.jsx("th",{children:"End Time"})]}),e.jsx("tbody",{children:f.map((x,c)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[$(x.date).format("DD/MM/YYYY"),e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.date`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:$(n.value).format("YYYY-MM-DD"),onChange:n.onChange,type:"hidden"})}),e.jsx(v,{})]})})]}),e.jsxs("td",{children:[x.shift_code,e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.shift_code`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:$(n.value).format("YYYY-MM-DD"),onChange:n.onChange,type:"hidden"})}),e.jsx(v,{})]})})]}),e.jsxs("td",{children:[x.shift_start,e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.shift_start`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:$(n.value).format("YYYY-MM-DD"),onChange:n.onChange,type:"hidden"})}),e.jsx(v,{})]})})]}),e.jsxs("td",{children:[x.shift_end,e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.shift_end`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:$(n.value).format("YYYY-MM-DD"),onChange:n.onChange,type:"hidden"})}),e.jsx(v,{})]})})]}),e.jsx("td",{children:e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.start_time`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:n.value,onChange:n.onChange})}),e.jsx(v,{})]})})}),e.jsx("td",{children:e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.end_time`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:n.value,onChange:n.onChange})}),e.jsx(v,{})]})})}),e.jsx("td",{children:e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.request_start_time`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:n.value,onChange:n.onChange})}),e.jsx(v,{})]})})}),e.jsx("td",{children:e.jsx(g,{control:l.control,name:`destinations.${t}.detail_attedances.${c}.request_end_time`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{defaultValue:n.value,onChange:n.onChange})}),e.jsx(v,{})]})})})]},x.index))})]})})})]})}function Ge({form:l,destinationIndex:t,allowanceField:d}){const a=l.watch(`destinations[${t}].allowances`);console.log("detailAllowanceceWatch",a),j.useEffect(()=>{},[a]);const{fields:f,append:x,remove:c}=I({control:l.control,name:`destinations.${t}.other`}),n=G({control:l.control,name:`destinations.${t}.other`}),p=()=>(n||[]).reduce((T,m)=>{const u=Number((m==null?void 0:m.value)||0);return T+u},0),E=()=>{x({value:0})};return e.jsxs("table",{className:"w-full allowance-table",children:[a.map((T,m)=>e.jsx(We,{form:l,allowance:T,destinationIndex:t,allowanceIndex:m})),f.length===0&&e.jsx("tr",{children:e.jsx("td",{children:e.jsx(W,{type:"button",className:"text-xl",onClick:E,children:"+"})})}),f.map((T,m)=>e.jsxs("tr",{children:[e.jsx("td",{width:220,style:{verticalAlign:"middle"},className:"text-sm",children:"Other Allowance"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:":"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("span",{className:"text-sm",children:"IDR"})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{control:l.control,name:`destinations.${t}.other[${m}].value`,render:({field:u})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{type:"number",min:"0",value:u.value??"",onChange:A=>{let D=A.target.value;if(D===""){u.onChange(void 0);return}const C=Math.max(0,Number(D));u.onChange(C)}})}),e.jsx(v,{})]})}),e.jsx("span",{className:"text-sm",children:"* 100%"})]})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",style:{padding:"2px 5px"},children:["= IDR ",U(p(),!1)]})})}),e.jsx("td",{children:e.jsx(W,{type:"button",className:"text-xs",onClick:()=>c(m),children:"X"})})]},m))]})}function We({form:l,allowance:t,destinationIndex:d,allowanceIndex:a}){const[f,x]=j.useState(!1);j.useState(0);const c=m=>{x(u=>!u)},n=G({control:l.control,name:`destinations[${d}].allowances[${a}].detail[0].request_price`}),p=G({control:l.control,name:`destinations[${d}].allowances[${a}].detail`}),E=()=>{if(t.type==="total")return parseFloat(n||0)*1;{let m=0;return p==null||p.forEach(u=>{const A=parseFloat(u.request_price||0);m+=A}),m}},T=(m,u)=>{const A=parseFloat(u),D=isNaN(A)?0:A,C=t.request_value;let N=!0;switch(C){case"unlimited":N=!0;break;case"fixed value":const R=t.subtotal;D!==R&&(alert(`Please enter the fixed value of IDR ${R}`),N=!1);break;case"up to max value":const F=t.subtotal;D>F&&(alert(`The value should not exceed IDR ${F}`),N=!1);break;default:N=!1}N&&l.setValue(`destinations[${d}].allowances[${a}].detail[${m}].request_price`,D)};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{width:220,style:{verticalAlign:"middle"},className:"text-sm",children:t.name}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:":"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:t.type=="total"?e.jsx("span",{className:"text-sm",children:"IDR"}):e.jsx("span",{})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:t.type=="total"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{control:l.control,name:`destinations[${d}].allowances[${a}].detail[0].request_price`,render:({field:m})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{value:m.value,onChange:u=>T(0,u.target.value)})}),e.jsx(v,{})]})}),e.jsx("span",{className:"text-sm",children:"* 100%"})]}):e.jsxs("span",{className:"text-sm",children:[" ",t.detail.length," Days * ",U(t.subtotal,!1)," * 100%"]})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm total",style:{padding:"2px 5px"},children:["= IDR ",U(E(),!1)]})})}),t.type=="total"?e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}}):e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},onClick:()=>c(),children:e.jsxs(W,{variant:"ghost",type:"button",size:"sm",className:"w-9 p-0",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})})]},t.id),f&&e.jsx(e.Fragment,{children:t.detail.map((m,u)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-end",style:{verticalAlign:"middle"},children:[e.jsx("span",{className:"text-sm",children:$(m.date).format("DD/MM/YYYY")})," "]}),e.jsx("td",{style:{padding:"8px 2px",verticalAlign:"middle"},children:":"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("span",{className:"text-sm",children:"IDR"})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("div",{className:"flex mt-1 text-sm justify-between items-center",children:e.jsx(g,{control:l.control,name:`destinations[${d}].allowances[${a}].detail[${u}].request_price`,render:({field:A})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{value:A.value,onChange:D=>T(u,D.target.value)})}),e.jsx(v,{})]})})})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}})]},m.id))})]})}function Xt({form:l,type:t,allowanceIndex:d,destinationIndex:a}){const{fields:f}=I({control:l.control,name:`destinations.${a}.allowances.${d}.detail`});return e.jsx(e.Fragment,{children:f.map((x,c)=>e.jsx(g,{control:l.control,name:`destinations.${a}.allowances.${c}.detail.${c}.request_price`,render:({field:n})=>e.jsxs(_,{children:[e.jsx(w,{children:e.jsx(y,{value:n.value,onChange:n.onChange})}),e.jsx(v,{})]})}))})}export{Xt as AllowanceInputForm,We as AllowanceRowInput,Le as BussinesTripDestination,Oe as BussinessDestinationForm,Lt as BussinessTripFormV1,Ge as DetailAllowance,Xe as DetailAttedances,Ot as ResultTotalItem};
