import{u as R,r as N,j as e}from"./app-BG3h5D-x.js";import{F as A,a as o,b as i,c as d,d as c}from"./form-DylnEVeu.js";import{z as l,t as P}from"./index-BeZ-WWUs.js";import{F as h,B as U}from"./button-h3rcSfTx.js";import{u as O}from"./index.esm-DVgkS5Ug.js";import{S as B}from"./scroll-area-BjoQkqDJ.js";import{S as j,a as u,b as p,c as g,d as f}from"./select-C_Xa96Qi.js";import{I as S}from"./input-BvD-tuxS.js";import{a as E}from"./axiosInstance-cs0KEvWg.js";const b="/api/master/reimburse-quota",K=`${b}/list`,G=`${b}/create`,M=a=>`${b}/detail/${a}`;function V({onSuccess:a,type:m=h.create,id:x,listTypeReimburse:T,listPeriodReimburse:_,listGrade:C}){var w=l.object({period:l.string("Period must choose"),type:l.string("Type must choose"),grade:l.string("Grade must choose"),limit:l.number("Limit must set"),plafon:l.number("Plafon must set")});let I={period:"",type:"",grade:"",limit:0,plafon:0};async function y(){let r=M(x);try{let s=await E.get(r);n.reset({id:s.data.data.id})}catch{}}const n=O({resolver:P(w),defaultValues:I}),{showToast:v}=R(),F=async r=>{try{const s=await E.post(G,r);a==null||a(!0),v(s.message,"success")}catch(s){a==null||a(!1),v(s.message,"error")}};return N.useEffect(()=>{x&&m==h.edit&&y()},[x,m]),e.jsx(B,{className:"h-[600px] w-full",children:e.jsx(A,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(F),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"period",render:({field:r})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:t=>r.onChange(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:_.map(t=>e.jsxs(f,{value:t.id.toString(),children:[t.start," - ",t.end]},t.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"type",render:({field:r})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:t=>r.onChange(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:T.map(t=>e.jsx(f,{value:t.id.toString(),children:t.name},t.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"grade",render:({field:r})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:t=>r.onChange(t),value:(s=r.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:C.map(t=>e.jsx(f,{value:t.id.toString(),children:t.grade},t.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Limit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:n.control,disabled:m==h.edit,name:"limit",render:({field:r})=>e.jsxs(i,{children:[e.jsx(d,{children:e.jsx(S,{type:"number",placeholder:"0.0",onChange:s=>r.onChange(Number(s.target.value)),value:r.value||0})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Plafon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:n.control,disabled:m==h.edit,name:"plafon",render:({field:r})=>e.jsxs(i,{children:[e.jsx(d,{children:e.jsx(S,{type:"number",placeholder:"0",...r,onChange:s=>r.onChange(Number(s.target.value)),value:r.value||0})}),e.jsx(c,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(U,{type:"submit",children:"Save"})})]})})})}const W=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{K as G,V as R,W as f};
