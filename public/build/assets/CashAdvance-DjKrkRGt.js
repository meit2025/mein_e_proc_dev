import{r as l,j as a}from"./app-7lP8htdP.js";import{F as j}from"./formDropdown-NdQFdKEJ.js";import{F as u}from"./formInput-gUT3UwvV.js";import{F as w}from"./formSwitch-DFmKItGQ.js";import{a as F,c as m}from"./index.esm-CQUD5t2X.js";import"./app-DQK4SJPx.js";import"./TextField-CUW67KH0.js";import"./createSvgIcon-28KVME0o.js";import"./DefaultPropsProvider-CVsxYUpo.js";import"./useSlot-oBma2tAN.js";import"./createSimplePaletteValueFilter-BrImH-gK.js";import"./useControlled-DjW2LVy8.js";import"./FormHelperText-DWTXfYAK.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./Switch-Cjz47aId.js";import"./SwitchBase-CUMX0oO0.js";const z=({disable:r})=>{const{getValues:p,setValue:n,watch:i}=F(),[h,c]=l.useState(!0),f=m({name:"is_cashAdvance"}),d=m({name:"vendors"}),v=e=>Array.isArray(e)?e.find(t=>t&&t.winner===!0):null;l.useEffect(()=>{const e=v(d);c(!e)},[d]);const s=i("total_all_amount"),_=e=>{const t=p("vendors").filter(o=>(o.winner||!1)===!0),b=((t.length>0?t[0]:null).units||[]).reduce((o,A)=>o+A.total_amount,0);n("total_all_amount",b);const x=parseInt(e)/100*s;n("cash_advance_purchases.nominal",x)};return l.useEffect(()=>{if(s>0){const e=parseInt(i("cash_advance_purchases.dp"))/100*s;n("cash_advance_purchases.nominal",e)}},[s]),a.jsxs("div",{children:[a.jsx(w,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:r}),f&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(j,{options:[{label:"50%",value:"50"},{label:"40%",value:"40"},{label:"30%",value:"30"},{label:"20%",value:"20"},{label:"10%",value:"10"}],fieldLabel:"Persantase DP",fieldName:"cash_advance_purchases.dp",isRequired:!1,disabled:r,style:{width:"56.5rem"},placeholder:"Persantase DP Number",classNames:"mt-2",onChangeOutside:(e,t)=>_(e)}),a.jsx(u,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:r,type:"text",placeholder:"Enter reference"}),a.jsx(u,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:h?"Please Chose The Propose Vendor":""})]})]})};export{z as default};
