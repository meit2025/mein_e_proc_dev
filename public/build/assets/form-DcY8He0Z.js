import{u as R,r as _,j as e}from"./app-IQwIjIau.js";import{F as D,a as i,b as l,c as m,d as x}from"./form-B2mg5zRK.js";import{z as n,t as C}from"./index-BxkK7xV6.js";import{F as h,B as F}from"./button-Y24lxrSy.js";import{u as S}from"./index.esm-BNAaWfT5.js";import{S as w}from"./scroll-area-CulWtV1S.js";import{C as f}from"./CustomDatePicker-4T915Te5.js";import{I as T}from"./input-BAlMeipZ.js";import{a as p}from"./axiosInstance-hLWWsmsQ.js";const j="/api/master/reimburse-period",L=`${j}/list`,y=`${j}/create`,P=r=>`${j}/detail/${r}`;function v({onSuccess:r,type:c=h.create,id:d}){const E=n.object({code:n.string(),start:n.date(),end:n.date()}),g={code:"",start:new Date,end:new Date};async function I(){const s=P(d);try{const t=await p.get(s);a.reset({id:t.data.data.id,code:t.data.data.code})}catch{}}const a=S({resolver:C(E),defaultValues:g}),{showToast:u}=R(),b=async s=>{var t;try{const o=await p.post(y,s);r&&r(!0),u((t=o==null?void 0:o.data)==null?void 0:t.message,"success")}catch(o){r&&r(!1),u(o.message,"error")}};return _.useEffect(()=>{d&&c==h.edit&&I()},[d,c]),e.jsx(w,{className:"h-[600px] w-full",children:e.jsx(D,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(b),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:a.control,disabled:c==h.edit,name:"code",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(T,{type:"text",placeholder:"Insert code",...s,value:s.value||"",onChange:t=>s.onChange(t.target.value)})}),e.jsx(x,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Start Date"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"start",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(f,{onDateChange:t=>s.onChange(t)})}),e.jsx(x,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"End Date"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"end",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(f,{onDateChange:t=>s.onChange(t)})}),e.jsx(x,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(F,{type:"submit",children:"Save"})})]})})})}const k=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));export{L as G,v as R,k as f};
