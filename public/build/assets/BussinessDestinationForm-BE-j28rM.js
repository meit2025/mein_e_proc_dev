import{j as e}from"./app-B1AEVzT5.js";import{F as _,a as h,b as j,c as f}from"./form-aZS_lP4z.js";import{B as q}from"./button-D307KTBQ.js";import{b as x}from"./index.esm-BH2AsJwf.js";/* empty css              */import{c as O}from"./tabs-B4HORxWO.js";import{C as b}from"./CustomDatePicker-BpDrN-SO.js";import{h as d}from"./moment-C5S46NFB.js";import{F as c}from"./formDropdown-CMRXdDA-.js";import{DetailAttedances as R}from"./DetailAttedances-DH8VzmE4.js";import{DetailAllowance as G}from"./DetailAllowance-S0TUq3sK.js";import{ResultTotalItem as T}from"./ResultTotalItem-DyTjkHlR.js";import"./app-HlhieNAw.js";import"./index-Ba4If0pH.js";import"./utils-DNtRlc7o.js";import"./index-Bb4qSo10.js";import"./index-DPFwwSoh.js";import"./index-C9TLrTnG.js";import"./index-Cwr-K4pD.js";import"./index-SZE-yZcV.js";import"./index-BQRrVA_2.js";import"./index-BIDPva6F.js";import"./index-8lU3ZcA2.js";import"./popover-BdP7V8TQ.js";import"./Combination-D4vcfTob.js";import"./createLucideIcon-BQ1Dm3Q6.js";import"./TextField-Ct7iXDKX.js";import"./createSimplePaletteValueFilter-Dl2aI-kV.js";import"./DefaultPropsProvider-BnWYfosm.js";import"./useSlot-DFDxNTwK.js";import"./FormHelperText-NiKjcd5a.js";import"./input-Dk0wpb63.js";import"./rupiahCurrencyFormat-CnMdu_8N.js";import"./chevrons-up-down-B8n2YkTO.js";function De({form:i,index:t,destination:r,updateDestination:l,listAllowances:w,setTotalAllowance:A,listDestination:L,pajak:P,purchasingGroup:E,dataTax:g,dataPurchasingGroup:F,dataDestination:D}){const{fields:y,update:C,append:N,remove:I}=x({control:i.control,name:`destinations.${t}.detail_attedances`}),{fields:p,update:H,append:M,remove:k,replace:v}=x({control:i.control,name:`destinations.${t}.allowances`});function B(){let a=d(r.business_trip_start_date).startOf("day");const o=d(r.business_trip_end_date).startOf("day");for(I(),k();a.isBefore(o)||a.isSame(o);){const s={date:a.toDate(),shift_code:"SHIFTREGULAR",shift_start:"08:00",shift_end:"17:00",end_time:"17:00",start_time:"08:00"};N(s),a=a.add(1,"days")}function S(s){let n=d(r.business_trip_start_date).startOf("day");const m=d(r.business_trip_end_date).startOf("day"),u=[];for(;n.isBefore(m)||n.isSame(m);)u.push({date:n.toDate(),request_price:s}),n=n.add(1,"days");return u}const $=w.map(s=>({name:s.name,code:s.code,default_price:parseInt(s.grade_price),type:s.type,subtotal:parseInt(s.grade_price),currency:s.currency_id,request_value:s.request_value,detail:s.type.toLowerCase()=="total"?[{date:null,request_price:parseInt(s.grade_price)}]:S(s.grade_price)}));v($)}return e.jsxs(O,{value:`destination${t+1}`,children:[e.jsxs("div",{children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Destination ",r.destination]}),e.jsx("td",{children:e.jsx(c,{fieldLabel:"",options:D,fieldName:`destinations.${t}.destination`,isRequired:!0,disabled:!1,placeholder:"Select Destination",classNames:"mt-2 w-full",onChangeOutside:a=>{l(t,{...r,destination:a})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Pajak"}),e.jsx("td",{children:e.jsx(c,{fieldLabel:"",options:g,fieldName:`destinations.${t}.pajak_id`,isRequired:!0,disabled:!1,placeholder:"Select Pajak",classNames:"mt-2 w-full",onChangeOutside:a=>{l(t,{...r,pajak_id:a})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purchasing Group"}),e.jsx("td",{children:e.jsx(c,{fieldLabel:"",options:F,fieldName:`destinations.${t}.purchasing_group_id`,isRequired:!0,disabled:!1,placeholder:"Select Purchasing Group",classNames:"mt-2 w-full",onChangeOutside:a=>{l(t,{...r,purchasing_group_id:a})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Bussines Trip Date"}),e.jsxs("td",{className:"flex space-x-2 items-center",children:[e.jsx(_,{control:i.control,name:`destinations.${t}.business_trip_start_date`,render:({field:a})=>e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(b,{initialDate:r.business_trip_start_date,onDateChange:o=>{l(t,{...r,business_trip_start_date:o})}})}),e.jsx(f,{})]})}),e.jsx("span",{children:"To"}),e.jsx(_,{control:i.control,name:`destinations.${t}.business_trip_end_date`,render:({field:a})=>e.jsxs(h,{children:[e.jsx(j,{children:e.jsx(b,{initialDate:r.business_trip_end_date,onDateChange:o=>{l(t,{...r,business_trip_end_date:o})}})}),e.jsx(f,{})]})}),e.jsx(q,{type:"button",onClick:()=>B(),children:"Get Detail"})]})]})]}),e.jsx(R,{detailAttedanceFields:y,form:i,updateAttedanceFields:C,destinationIndex:t}),e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm",children:"Detail Bussines Trip Allowance:"}),e.jsx("td",{})]})}),e.jsx(G,{allowanceField:p,destinationIndex:t,form:i})]},t),e.jsx(T,{allowanceField:p,destinationIndex:t,form:i,setTotalAllowance:A})]})}export{De as BussinessDestinationForm};
