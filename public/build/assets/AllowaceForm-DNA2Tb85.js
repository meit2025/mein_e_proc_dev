import{u as C,r as N,j as e}from"./app-BSyn0D4x.js";import{F as I,a as m,b as d,c as l,d as c}from"./form-DvymMx4Q.js";import{z as n,t as E}from"./index-DsHtMdbb.js";import{B as q}from"./button-C-MDPR-i.js";import{u as B}from"./index.esm-NnhfiKKP.js";import{S as D}from"./scroll-area-BP0rj8HD.js";import{I as x}from"./input-DSHwIaBX.js";import{a as i}from"./axiosInstance-D1W1XROp.js";import"./app-wnGHkkFm.js";import"./index-D1qpKLva.js";import"./index-gmWO7KW7.js";var w=(t=>(t[t.create=0]="create",t[t.edit=1]="edit",t[t.update=2]="update",t))(w||{});function P({onSuccess:t,type:s=0,id:z,createUrl:h,updateUrl:j,detailUrl:u}){const f=n.object({code:n.string().min(1,"Code is required"),name:n.string().min(1,"Name is required")}),p={code:"",name:""};async function g(){try{const r=await i.get(u);o.reset({code:r.data.data.code,name:r.data.data.name})}catch{}}const o=B({resolver:E(f),defaultValues:p}),{showToast:v}=C(),F=r=>{try{let a;s===1?a=i.put(j??"",r):a=i.post(h??"",r),console.log(a),v("succesfully created data","success"),t==null||t(!0)}catch(a){const b=a;t==null||t(!1),console.log(b)}};return N.useEffect(()=>{(s===1||s===2)&&g()},[s]),e.jsx(D,{className:"h-[600px] w-full",children:e.jsx(I,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(F),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(m,{control:o.control,name:"code",render:({field:r})=>e.jsxs(d,{children:[e.jsx(l,{children:e.jsx(x,{readOnly:s===1,type:"text",placeholder:"0.0",...r,value:r.value||"",onChange:a=>r.onChange(a.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(m,{control:o.control,name:"name",render:({field:r})=>e.jsxs(d,{children:[e.jsx(l,{children:e.jsx(x,{type:"text",...r,value:r.value||"",onChange:a=>r.onChange(a.target.value)})}),e.jsx(c,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(q,{type:"submit",children:"Save"})})]})})})}export{P as AllowanceForm,w as AllowanceType};
