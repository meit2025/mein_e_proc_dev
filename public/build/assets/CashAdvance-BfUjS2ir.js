import{r as i,j as a}from"./app-CMRlKEBG.js";import{F as d}from"./formInput-CRvSdAB6.js";import{F as I}from"./formSwitch-BxORoWmR.js";import{a as w,c as h}from"./index.esm-CMx19ymE.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-2vI30fpu.js";import"./DefaultPropsProvider-B6cJFhMa.js";import"./Switch-DRh_E7HI.js";import"./createSimplePaletteValueFilter-BQOHD6GX.js";import"./SwitchBase-DEXwhJfd.js";import"./useControlled-KQyFLgKg.js";const D=({disable:c})=>{const{getValues:f,setValue:n,watch:u}=w(),[_,l]=i.useState(!0),v=h({name:"is_cashAdvance"}),m=h({name:"vendors"}),x=e=>Array.isArray(e)?e.find(s=>s&&s.winner===!0):null;i.useEffect(()=>{const e=x(m);l(!e)},[m]);const r=u("total_all_amount"),b=e=>{console.log(e);const s=f("vendors").filter(t=>(t.winner||!1)===!0),p=(s.length>0?s[0]:null).units||[],g=p.reduce((t,o)=>t+parseInt(o.total_amount),0);n("total_all_amount",g);const A=p.reduce((t,o)=>o.unit_price>t?parseInt(o.unit_price):t,0);n("amount_max",A);const j=parseInt(e)/100*parseInt(r);n("cash_advance_purchases.nominal",j)};return i.useEffect(()=>{if(r>0){const e=parseInt(u("cash_advance_purchases.dp"))/100*parseInt(r);n("cash_advance_purchases.nominal",e)}},[r]),a.jsxs("div",{children:[a.jsx(I,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:c}),v&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(d,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:c,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>b(e.target.value)}),a.jsx(d,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:c,type:"text",placeholder:"Enter reference"}),a.jsx(d,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:_?"Please Chose The Propose Vendor":""})]})]})};export{D as default};
