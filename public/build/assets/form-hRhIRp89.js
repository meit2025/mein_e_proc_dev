import{r as s,j as e,u as We}from"./app-6RNp1Gt6.js";import{d as Je,F as M,a as V,b as A,c as q}from"./form-B2jGn0UG.js";import{z as E,t as Xe}from"./index-BSdP3YjG.js";import{B as Ae}from"./button-BjUrPEvr.js";import{u as Qe,b as Ze}from"./index.esm-DWQizms4.js";import{S as et}from"./scroll-area-BDAV1iPU.js";import{S as Q,a as Z,b as ee,c as te,d as D}from"./select-4y0p7i2C.js";import{I as ie}from"./input-BO56bV-I.js";import{a as ne}from"./axiosInstance-BwKQaqvt.js";import{M as tt}from"./MultiSelect-NyjbNCJw.js";import{a as rt}from"./api-BySVmGlY.js";import{c as K,F as B}from"./utils-BEpRvmeH.js";import{R as nt,P as at,O as lt,C as st}from"./dialog-B9NfmfPi.js";import{P as L}from"./index-BkcGdEsj.js";import{u as Y}from"./index-C-KLsq6J.js";import{M as ot}from"./index-DxxeGeXI.js";import{P as it,a as ct,b as dt}from"./popover-52YZMh7r.js";import{L as ut}from"./LoadingSpin-BY8V7sHi.js";import{C as mt}from"./chevrons-up-down-Dxt_s5Pl.js";import{c as pt}from"./createLucideIcon-_xkMGA39.js";import"./app-DQK4SJPx.js";import"./index-dT-Lqjpt.js";import"./index-Bb4qSo10.js";import"./index-DtvNO1ip.js";import"./index-DQZ4B7fY.js";import"./index-Wf_Vx299.js";import"./Combination-Bj0wgYx0.js";import"./index-BEHhVEo5.js";import"./index-B2EokIZB.js";import"./index-B8sc2HXA.js";import"./checkbox-Dx3gCi2k.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var Ie=1,ht=.9,xt=.8,gt=.17,he=.1,xe=.999,vt=.9999,jt=.99,yt=/[\\\/_+.#"@\[\(\{&]/,bt=/[\\\/_+.#"@\[\(\{&]/g,wt=/[\s-]/,Fe=/[\s-]/g;function je(t,n,r,f,o,d,u){if(d===n.length)return o===t.length?Ie:jt;var g=`${o},${d}`;if(u[g]!==void 0)return u[g];for(var y=f.charAt(d),h=r.indexOf(y,o),p=0,x,_,C,N;h>=0;)x=je(t,n,r,f,h+1,d+1,u),x>p&&(h===o?x*=Ie:yt.test(t.charAt(h-1))?(x*=xt,C=t.slice(o,h-1).match(bt),C&&o>0&&(x*=Math.pow(xe,C.length))):wt.test(t.charAt(h-1))?(x*=ht,N=t.slice(o,h-1).match(Fe),N&&o>0&&(x*=Math.pow(xe,N.length))):(x*=gt,o>0&&(x*=Math.pow(xe,h-o))),t.charAt(h)!==n.charAt(d)&&(x*=vt)),(x<he&&r.charAt(h-1)===f.charAt(d+1)||f.charAt(d+1)===f.charAt(d)&&r.charAt(h-1)!==f.charAt(d))&&(_=je(t,n,r,f,h+1,d+2,u),_*he>x&&(x=_*he)),x>p&&(p=x),h=r.indexOf(y,h+1);return u[g]=p,p}function Re(t){return t.toLowerCase().replace(Fe," ")}function St(t,n,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,je(t,n,Re(t),Re(n),0,0,{})}var $e={exports:{}},qe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=s;function Ct(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Et=typeof Object.is=="function"?Object.is:Ct,_t=W.useState,kt=W.useEffect,Nt=W.useLayoutEffect,It=W.useDebugValue;function Rt(t,n){var r=n(),f=_t({inst:{value:r,getSnapshot:n}}),o=f[0].inst,d=f[1];return Nt(function(){o.value=r,o.getSnapshot=n,ge(o)&&d({inst:o})},[t,r,n]),kt(function(){return ge(o)&&d({inst:o}),t(function(){ge(o)&&d({inst:o})})},[t]),It(r),r}function ge(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Et(t,r)}catch{return!0}}function Mt(t,n){return n()}var Vt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mt:Rt;qe.useSyncExternalStore=W.useSyncExternalStore!==void 0?W.useSyncExternalStore:Vt;$e.exports=qe;var At=$e.exports,re='[cmdk-group=""]',ve='[cmdk-group-items=""]',Ft='[cmdk-group-heading=""]',be='[cmdk-item=""]',Me=`${be}:not([aria-disabled="true"])`,ye="cmdk-item-select",T="data-value",$t=(t,n,r)=>St(t,n,r),De=s.createContext(void 0),le=()=>s.useContext(De),Le=s.createContext(void 0),we=()=>s.useContext(Le),Pe=s.createContext(void 0),Te=s.forwardRef((t,n)=>{let r=H(()=>{var l,m;return{search:"",value:(m=(l=t.value)!=null?l:t.defaultValue)!=null?m:"",filtered:{count:0,items:new Map,groups:new Set}}}),f=H(()=>new Set),o=H(()=>new Map),d=H(()=>new Map),u=H(()=>new Set),g=Ge(t),{label:y,children:h,value:p,onValueChange:x,filter:_,shouldFilter:C,loop:N,disablePointerSelection:j=!1,vimBindings:I=!0,...F}=t,$=Y(),U=Y(),z=Y(),i=s.useRef(null),a=Bt();G(()=>{if(p!==void 0){let l=p.trim();r.current.value=l,S.emit()}},[p]),G(()=>{a(6,Ce)},[]);let S=s.useMemo(()=>({subscribe:l=>(u.current.add(l),()=>u.current.delete(l)),snapshot:()=>r.current,setState:(l,m,v)=>{var c,b,w;if(!Object.is(r.current[l],m)){if(r.current[l]=m,l==="search")me(),de(),a(1,ue);else if(l==="value"&&(v||a(5,Ce),((c=g.current)==null?void 0:c.value)!==void 0)){let R=m??"";(w=(b=g.current).onValueChange)==null||w.call(b,R);return}S.emit()}},emit:()=>{u.current.forEach(l=>l())}}),[]),se=s.useMemo(()=>({value:(l,m,v)=>{var c;m!==((c=d.current.get(l))==null?void 0:c.value)&&(d.current.set(l,{value:m,keywords:v}),r.current.filtered.items.set(l,Se(m,v)),a(2,()=>{de(),S.emit()}))},item:(l,m)=>(f.current.add(l),m&&(o.current.has(m)?o.current.get(m).add(l):o.current.set(m,new Set([l]))),a(3,()=>{me(),de(),r.current.value||ue(),S.emit()}),()=>{d.current.delete(l),f.current.delete(l),r.current.filtered.items.delete(l);let v=J();a(4,()=>{me(),(v==null?void 0:v.getAttribute("id"))===l&&ue(),S.emit()})}),group:l=>(o.current.has(l)||o.current.set(l,new Set),()=>{d.current.delete(l),o.current.delete(l)}),filter:()=>g.current.shouldFilter,label:y||t["aria-label"],getDisablePointerSelection:()=>g.current.disablePointerSelection,listId:$,inputId:z,labelId:U,listInnerRef:i}),[]);function Se(l,m){var v,c;let b=(c=(v=g.current)==null?void 0:v.filter)!=null?c:$t;return l?b(l,r.current.search,m):0}function de(){if(!r.current.search||g.current.shouldFilter===!1)return;let l=r.current.filtered.items,m=[];r.current.filtered.groups.forEach(c=>{let b=o.current.get(c),w=0;b.forEach(R=>{let P=l.get(R);w=Math.max(P,w)}),m.push([c,w])});let v=i.current;X().sort((c,b)=>{var w,R;let P=c.getAttribute("id"),oe=b.getAttribute("id");return((w=l.get(oe))!=null?w:0)-((R=l.get(P))!=null?R:0)}).forEach(c=>{let b=c.closest(ve);b?b.appendChild(c.parentElement===b?c:c.closest(`${ve} > *`)):v.appendChild(c.parentElement===v?c:c.closest(`${ve} > *`))}),m.sort((c,b)=>b[1]-c[1]).forEach(c=>{var b;let w=(b=i.current)==null?void 0:b.querySelector(`${re}[${T}="${encodeURIComponent(c[0])}"]`);w==null||w.parentElement.appendChild(w)})}function ue(){let l=X().find(v=>v.getAttribute("aria-disabled")!=="true"),m=l==null?void 0:l.getAttribute(T);S.setState("value",m||void 0)}function me(){var l,m,v,c;if(!r.current.search||g.current.shouldFilter===!1){r.current.filtered.count=f.current.size;return}r.current.filtered.groups=new Set;let b=0;for(let w of f.current){let R=(m=(l=d.current.get(w))==null?void 0:l.value)!=null?m:"",P=(c=(v=d.current.get(w))==null?void 0:v.keywords)!=null?c:[],oe=Se(R,P);r.current.filtered.items.set(w,oe),oe>0&&b++}for(let[w,R]of o.current)for(let P of R)if(r.current.filtered.items.get(P)>0){r.current.filtered.groups.add(w);break}r.current.filtered.count=b}function Ce(){var l,m,v;let c=J();c&&(((l=c.parentElement)==null?void 0:l.firstChild)===c&&((v=(m=c.closest(re))==null?void 0:m.querySelector(Ft))==null||v.scrollIntoView({block:"nearest"})),c.scrollIntoView({block:"nearest"}))}function J(){var l;return(l=i.current)==null?void 0:l.querySelector(`${be}[aria-selected="true"]`)}function X(){var l;return Array.from(((l=i.current)==null?void 0:l.querySelectorAll(Me))||[])}function pe(l){let m=X()[l];m&&S.setState("value",m.getAttribute(T))}function fe(l){var m;let v=J(),c=X(),b=c.findIndex(R=>R===v),w=c[b+l];(m=g.current)!=null&&m.loop&&(w=b+l<0?c[c.length-1]:b+l===c.length?c[0]:c[b+l]),w&&S.setState("value",w.getAttribute(T))}function Ee(l){let m=J(),v=m==null?void 0:m.closest(re),c;for(;v&&!c;)v=l>0?Ut(v,re):zt(v,re),c=v==null?void 0:v.querySelector(Me);c?S.setState("value",c.getAttribute(T)):fe(l)}let _e=()=>pe(X().length-1),ke=l=>{l.preventDefault(),l.metaKey?_e():l.altKey?Ee(1):fe(1)},Ne=l=>{l.preventDefault(),l.metaKey?pe(0):l.altKey?Ee(-1):fe(-1)};return s.createElement(L.div,{ref:n,tabIndex:-1,...F,"cmdk-root":"",onKeyDown:l=>{var m;if((m=F.onKeyDown)==null||m.call(F,l),!l.defaultPrevented)switch(l.key){case"n":case"j":{I&&l.ctrlKey&&ke(l);break}case"ArrowDown":{ke(l);break}case"p":case"k":{I&&l.ctrlKey&&Ne(l);break}case"ArrowUp":{Ne(l);break}case"Home":{l.preventDefault(),pe(0);break}case"End":{l.preventDefault(),_e();break}case"Enter":if(!l.nativeEvent.isComposing&&l.keyCode!==229){l.preventDefault();let v=J();if(v){let c=new Event(ye);v.dispatchEvent(c)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:se.inputId,id:se.labelId,style:Yt},y),ce(t,l=>s.createElement(Le.Provider,{value:S},s.createElement(De.Provider,{value:se},l))))}),qt=s.forwardRef((t,n)=>{var r,f;let o=Y(),d=s.useRef(null),u=s.useContext(Pe),g=le(),y=Ge(t),h=(f=(r=y.current)==null?void 0:r.forceMount)!=null?f:u==null?void 0:u.forceMount;G(()=>{if(!h)return g.item(o,u==null?void 0:u.id)},[h]);let p=Oe(o,d,[t.value,t.children,d],t.keywords),x=we(),_=O(a=>a.value&&a.value===p.current),C=O(a=>h||g.filter()===!1?!0:a.search?a.filtered.items.get(o)>0:!0);s.useEffect(()=>{let a=d.current;if(!(!a||t.disabled))return a.addEventListener(ye,N),()=>a.removeEventListener(ye,N)},[C,t.onSelect,t.disabled]);function N(){var a,S;j(),(S=(a=y.current).onSelect)==null||S.call(a,p.current)}function j(){x.setState("value",p.current,!0)}if(!C)return null;let{disabled:I,value:F,onSelect:$,forceMount:U,keywords:z,...i}=t;return s.createElement(L.div,{ref:ae([d,n]),...i,id:o,"cmdk-item":"",role:"option","aria-disabled":!!I,"aria-selected":!!_,"data-disabled":!!I,"data-selected":!!_,onPointerMove:I||g.getDisablePointerSelection()?void 0:j,onClick:I?void 0:N},t.children)}),Dt=s.forwardRef((t,n)=>{let{heading:r,children:f,forceMount:o,...d}=t,u=Y(),g=s.useRef(null),y=s.useRef(null),h=Y(),p=le(),x=O(C=>o||p.filter()===!1?!0:C.search?C.filtered.groups.has(u):!0);G(()=>p.group(u),[]),Oe(u,g,[t.value,t.heading,y]);let _=s.useMemo(()=>({id:u,forceMount:o}),[o]);return s.createElement(L.div,{ref:ae([g,n]),...d,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},r&&s.createElement("div",{ref:y,"cmdk-group-heading":"","aria-hidden":!0,id:h},r),ce(t,C=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?h:void 0},s.createElement(Pe.Provider,{value:_},C))))}),Lt=s.forwardRef((t,n)=>{let{alwaysRender:r,...f}=t,o=s.useRef(null),d=O(u=>!u.search);return!r&&!d?null:s.createElement(L.div,{ref:ae([o,n]),...f,"cmdk-separator":"",role:"separator"})}),Pt=s.forwardRef((t,n)=>{let{onValueChange:r,...f}=t,o=t.value!=null,d=we(),u=O(p=>p.search),g=O(p=>p.value),y=le(),h=s.useMemo(()=>{var p;let x=(p=y.listInnerRef.current)==null?void 0:p.querySelector(`${be}[${T}="${encodeURIComponent(g)}"]`);return x==null?void 0:x.getAttribute("id")},[]);return s.useEffect(()=>{t.value!=null&&d.setState("search",t.value)},[t.value]),s.createElement(L.input,{ref:n,...f,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.listId,"aria-labelledby":y.labelId,"aria-activedescendant":h,id:y.inputId,type:"text",value:o?t.value:u,onChange:p=>{o||d.setState("search",p.target.value),r==null||r(p.target.value)}})}),Tt=s.forwardRef((t,n)=>{let{children:r,label:f="Suggestions",...o}=t,d=s.useRef(null),u=s.useRef(null),g=le();return s.useEffect(()=>{if(u.current&&d.current){let y=u.current,h=d.current,p,x=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let _=y.offsetHeight;h.style.setProperty("--cmdk-list-height",_.toFixed(1)+"px")})});return x.observe(y),()=>{cancelAnimationFrame(p),x.unobserve(y)}}},[]),s.createElement(L.div,{ref:ae([d,n]),...o,"cmdk-list":"",role:"listbox","aria-label":f,id:g.listId},ce(t,y=>s.createElement("div",{ref:ae([u,g.listInnerRef]),"cmdk-list-sizer":""},y)))}),Gt=s.forwardRef((t,n)=>{let{open:r,onOpenChange:f,overlayClassName:o,contentClassName:d,container:u,...g}=t;return s.createElement(nt,{open:r,onOpenChange:f},s.createElement(at,{container:u},s.createElement(lt,{"cmdk-overlay":"",className:o}),s.createElement(st,{"aria-label":t.label,"cmdk-dialog":"",className:d},s.createElement(Te,{ref:n,...g}))))}),Ot=s.forwardRef((t,n)=>O(r=>r.filtered.count===0)?s.createElement(L.div,{ref:n,...t,"cmdk-empty":"",role:"presentation"}):null),Kt=s.forwardRef((t,n)=>{let{progress:r,children:f,label:o="Loading...",...d}=t;return s.createElement(L.div,{ref:n,...d,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ce(t,u=>s.createElement("div",{"aria-hidden":!0},u)))}),k=Object.assign(Te,{List:Tt,Item:qt,Input:Pt,Group:Dt,Separator:Lt,Dialog:Gt,Empty:Ot,Loading:Kt});function Ut(t,n){let r=t.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function zt(t,n){let r=t.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function Ge(t){let n=s.useRef(t);return G(()=>{n.current=t}),n}var G=typeof window>"u"?s.useEffect:s.useLayoutEffect;function H(t){let n=s.useRef();return n.current===void 0&&(n.current=t()),n}function ae(t){return n=>{t.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}function O(t){let n=we(),r=()=>t(n.snapshot());return At.useSyncExternalStore(n.subscribe,r,r)}function Oe(t,n,r,f=[]){let o=s.useRef(),d=le();return G(()=>{var u;let g=(()=>{var h;for(let p of r){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(h=p.current.textContent)==null?void 0:h.trim():o.current}})(),y=f.map(h=>h.trim());d.value(t,g,y),(u=n.current)==null||u.setAttribute(T,g),o.current=g}),o}var Bt=()=>{let[t,n]=s.useState(),r=H(()=>new Map);return G(()=>{r.current.forEach(f=>f()),r.current=new Map},[t]),(f,o)=>{r.current.set(f,o),n({})}};function Ht(t){let n=t.type;return typeof n=="function"?n(t.props):"render"in n?n.render(t.props):t}function ce({asChild:t,children:n},r){return t&&s.isValidElement(n)?s.cloneElement(Ht(n),{ref:n.ref},r(n.props.children)):r(n)}var Yt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ke=s.forwardRef(({className:t,...n},r)=>e.jsx(k,{ref:r,className:K("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...n}));Ke.displayName=k.displayName;const Ue=s.forwardRef(({className:t,...n},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(ot,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(k.Input,{ref:r,className:K("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...n})]}));Ue.displayName=k.Input.displayName;const ze=s.forwardRef(({className:t,...n},r)=>e.jsx(k.List,{ref:r,className:K("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...n}));ze.displayName=k.List.displayName;const Be=s.forwardRef((t,n)=>e.jsx(k.Empty,{ref:n,className:"py-6 text-center text-sm",...t}));Be.displayName=k.Empty.displayName;const He=s.forwardRef(({className:t,...n},r)=>e.jsx(k.Group,{ref:r,className:K("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n}));He.displayName=k.Group.displayName;const Wt=s.forwardRef(({className:t,...n},r)=>e.jsx(k.Separator,{ref:r,className:K("-mx-1 h-px bg-border",t),...n}));Wt.displayName=k.Separator.displayName;const Ye=s.forwardRef(({className:t,...n},r)=>e.jsx(k.Item,{ref:r,className:K("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...n}));Ye.displayName=k.Item.displayName;function Ve({url:t,filter:n,id:r,label:f,value:o,onSelectChange:d,defaultLabel:u,disabled:g,placeholder:y="Search items ..."}){var i;const[h,p]=s.useState(!1),[x,_]=s.useState([]),[C,N]=s.useState(!1),[j,I]=s.useState("");let F;async function $(){const a={filter:n,search:j};N(!0);try{let S=await ne.get(t,{params:a});N(!1),_(S.data.data)}catch(S){console.log(S)}}function U(a){a.key==="Enter"&&(clearTimeout(F),$())}s.useEffect(()=>(F=setTimeout(()=>{j&&$()},500),()=>clearTimeout(F)),[j]);function z(a){d(a),p(!1)}return s.useEffect(()=>{h?$():I("")},[h]),e.jsxs(it,{open:h,onOpenChange:p,children:[e.jsx(ct,{asChild:!0,children:e.jsxs(Ae,{variant:"outline",disabled:g,role:"combobox","aria-expanded":h,className:"w-[200px] text-xs justify-between",children:[e.jsx(mt,{className:"opacity-50"}),u&&x.length===0?u:null,o&&x.length>0?(i=x.find(a=>String(a[r])===String(o)))==null?void 0:i[f]:"",o===""&&(u===""||u===null)?y:""]})}),e.jsx(dt,{className:"w-[200px] p-0",children:e.jsxs(Ke,{shouldFilter:!1,children:[e.jsx(Ue,{onKeyDown:U,onValueChange:a=>I(a),placeholder:y}),e.jsx(ze,{className:"z-30",children:C?e.jsx("div",{className:"py-10 flex items-center justify-center h-64 w-full",children:e.jsx(ut,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(Be,{children:["No Item found. ",x.length]}),x.length>0?e.jsx(He,{className:"z-30",children:x.map(a=>e.jsxs(Ye,{className:"z-30",value:a[r],onSelect:S=>{z(a[r])},children:[a[f],e.jsx(ft,{className:K("ml-auto",o===a[r]?"opacity-100":"opacity-0")})]},a[r]))}):null]})})]})})]})}var Jt=(t=>(t[t.create=0]="create",t[t.edit=1]="edit",t[t.update=2]="update",t))(Jt||{});function Nr({onSuccess:t,type:n=B.create,detailUrl:r,id:f,listCurrency:o,listAllowanceCategory:d,listGrade:u,createUrl:g,editUrl:y}){const h=E.object({code:E.string().min(1,"Code is required"),name:E.string().min(1,"Name is required"),type:E.string().min(1,"Type is required"),material_number:E.string().min(1,"Material number required"),material_group:E.string().min(1,"Material Group required"),currency_id:E.string().min(1,"Currency is required"),allowance_category_id:E.string().min(1,"Allowance Category is required"),request_value:E.string().min(1,"Required"),grade_option:E.string().min(1,"Grade must be selected"),grade_all_price:E.string().optional(),grades:E.array(E.object({grade:E.string(),id:E.number(),plafon:E.string()}))}),[p,x]=s.useState([]),[_,C]=s.useState(""),N={code:"",name:"",type:"",currency_id:"",allowance_category_id:"",request_value:"unlimited",grade_option:"all",grade_all_price:"0",grades:[]},j=Qe({resolver:Xe(h),defaultValues:N});async function I(){try{const i=await ne.get(r??""),a=i.data.data.allowance;console.log(a),z(a.material_group);const S=i.data.data.grades;j.reset({code:a.code,name:a.name,type:a.type,material_number:a.material_number,material_group:a.material_group,currency_id:a.currency_id,allowance_category_id:a.allowance_category_id,grade_option:a.grade_option,grade_all_price:a.grade_all_price,grades:S}),j.setValue("request_value",a.request_value)}catch{}}const{fields:F}=Ze({control:j.control,name:"grades"}),{showToast:$}=We(),U=async i=>{try{if(console.log(i),n===B.create){const a=await ne.post(g??"",i)}else if(n===B.edit){const a=await ne.put(y??"",i)}$("success","success"),t==null||t(!0)}catch(a){a.response&&$(a.response.data.message,"error")}};async function z(i){try{const a=await ne.get(rt(i));j.setValue("material_group",i),x(a.data.data)}catch(a){console.log(a)}}return s.useEffect(()=>{(n===B.detail||n===B.edit)&&I()},[n]),e.jsx(et,{className:"h-[600px] w-full",children:e.jsx(Je,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(U),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"code",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsx(ie,{type:"text",readOnly:n===B.edit,placeholder:"Insert code",...i,value:i.value||"",onChange:a=>i.onChange(a.target.value)})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"name",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsx(ie,{type:"text",...i,value:i.value||"",onChange:a=>i.onChange(a.target.value)})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"type",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(Q,{onValueChange:a=>i.onChange(a),value:i.value,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Select type"})}),e.jsxs(te,{children:[e.jsx(D,{value:"daily",children:"DAILY"},"DAILY"),e.jsx(D,{value:"total",children:"Total"},"TOTAL")]})]})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Group"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"material_group",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsx(Ve,{onSelectChange:a=>{i.onChange(a),C("api/master/master-material/get-dropdown-master-material-number/by-material-group/"+a),j.setValue("material_number","")},value:i.value,placeholder:"Select material group",filter:["material_group"],id:"material_group",label:"material_group",url:"api/master/master-material/get-dropdown-master-material-group"})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Material Number ",j.getValues("material_number")]}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"material_number",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsx(Ve,{onSelectChange:a=>{i.onChange(a)},value:i.value,filter:["material_number"],id:"material_number",label:"material_number",url:_})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"currency_id",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(Q,{onValueChange:a=>i.onChange(a),value:i.value,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Select Currency"})}),e.jsx(te,{children:o.map(a=>e.jsxs(D,{value:a.code,children:[a.name," ",a.code]},a.code))})]})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"allowance_category_id",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(Q,{onValueChange:a=>i.onChange(a),value:i.value,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Select Allowance Category"})}),e.jsx(te,{children:d.map(a=>e.jsx(D,{value:a.id.toString(),children:a.name},a.id))})]})}),e.jsx(q,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsxs("td",{className:"gap-4",children:[e.jsx(M,{control:j.control,name:"grade_option",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(Q,{onValueChange:a=>i.onChange(a),value:i.value,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Select Request Value"})}),e.jsxs(te,{children:[e.jsx(D,{value:"all",children:"All"},"all"),e.jsx(D,{value:"grade",children:"grade"},"grade")]})]})}),e.jsx(q,{})]})}),j.getValues("grade_option")==="all"?e.jsx("div",{children:e.jsx(M,{control:j.control,name:"grade_all_price",render:({field:i})=>e.jsx(V,{children:e.jsx(A,{children:e.jsx(ie,{...i})})})})}):e.jsx("div",{children:e.jsx(tt,{label:"grade",id:"id",options:u,value:j.getValues("grades").map(i=>i.id),onSelect:i=>{j.setValue("grades",i.map(a=>({id:a.id,grade:a.grade,plafon:""})))}})}),j.getValues("grade_option")==="grade"?e.jsx("div",{className:"mt-4",children:e.jsx("table",{children:F.map((i,a)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["Grade ",i.grade]}),e.jsx("td",{children:":"}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(M,{control:j.control,name:`grades.${a}.plafon`,render:({field:S})=>e.jsx(V,{children:e.jsx(A,{children:e.jsx(ie,{...S})})})})})})]},i))})}):null]})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(M,{control:j.control,name:"request_value",render:({field:i})=>e.jsxs(V,{children:[e.jsx(A,{children:e.jsxs(Q,{onValueChange:a=>i.onChange(a),value:i.value,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Select Request Value"})}),e.jsxs(te,{children:[e.jsx(D,{value:"unlimited",children:"Unlimited"},"unlimited"),e.jsx(D,{value:"up to max value",children:"Up to Max Value"},"up to max value"),e.jsx(D,{value:"fixed value",children:"Fixed Value"},"fixed value")]})]})}),e.jsx(q,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(Ae,{type:"submit",children:"Save"})})]})})})}export{Jt as AllowanceType,Nr as default};
