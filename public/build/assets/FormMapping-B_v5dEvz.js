import{j as s,r as C,u as E,b as v}from"./app-BzFq0BeT.js";import{a as T}from"./axiosInstance-Cc6t4Vgl.js";import{F as S}from"./formInput-BWbyqKAh.js";import{F as A}from"./formDropdown-VCACBt7o.js";import{F as R}from"./formCheckbox-B1WTqzRO.js";import{a as k,C as I,F as P}from"./index.esm-DVj8Xidq.js";import{A as $,T as B,a as H}from"./TextField-D6Ib8K8N.js";import{F as O}from"./FormHelperText-BY7xSO2q.js";import{F as W}from"./formFieldUpload-DEvUdiif.js";import{F as _}from"./formTextArea-BbNBL23f.js";import{F as z}from"./formSwitch-n4GUOeBr.js";import{L as D}from"./Loading-BfMnz0_a.js";const G=({fieldLabel:e,fieldName:n,isRequired:o=!1,disabled:u=!1,style:d,requiredMessage:j,options:h=[],placeholder:q,classNames:F,onChangeOutside:m})=>{const{control:y,formState:{errors:p}}=k();return s.jsx(I,{name:n,control:y,rules:{required:o?j??`${e} is required`:!1},render:({field:x})=>{var b;return s.jsxs("div",{style:d,className:F,children:[s.jsx($,{...x,multiple:!0,options:h,getOptionLabel:a=>a.label,isOptionEqualToValue:(a,t)=>a.value===t,onChange:(a,t)=>{x.onChange(t.map(c=>c.value)),m&&m(t.map(c=>c.value))},value:h.filter(a=>{var t;return(t=x.value)==null?void 0:t.includes(a.value)}),disabled:u,renderInput:a=>s.jsx(B,{...a,label:e,placeholder:q,error:!!p[n],required:o}),renderTags:(a,t)=>a.map((c,f)=>C.createElement(H,{label:c.label,...t({index:f}),key:f}))}),p[n]&&s.jsx(O,{error:!0,children:String((b=p[n])==null?void 0:b.message)})]})}})},J=({model:e,onChangeOutside:n})=>{switch(e.type){case"input":return s.jsx(S,{fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon,note:e.note});case"textarea":return s.jsx(_,{fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,maxLength:e.maxLength});case"select":return s.jsx(A,{options:e.options??[],fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:n});case"checkbox":return s.jsx(R,{fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(G,{options:e.options??[],fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:n});case"switch":return s.jsx(z,{fieldLabel:e.label??"",fieldName:e.name??"",isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(W,{fieldLabel:e.label??"",fieldName:e.name??"",allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:n});default:return null}},ie=({formModel:e,url:n,redirectUrl:o,methods:u,onSave:d,isLoading:j,classForm:h,isCustom:q=!1,formCustom:F,formLogic:m,disableButtonSubmit:y=!1})=>{const{setError:p,watch:x}=u,{showToast:b}=E(),[a,t]=C.useState(!1),c=async r=>{var i,g,N,L;t(!0);try{const l=await T.post(n,r,{headers:{"Content-Type":"application/json"}});b(l.data.message??"success","success"),d&&await d(l),setTimeout(o?()=>{window.location.href=o}:()=>{window.location.reload()},2e3)}catch(l){if(v.isAxiosError(l)&&((g=(i=l.response)==null?void 0:i.data)!=null&&g.message)&&b(l.response.data.message,"error"),v.isAxiosError(l)&&((L=(N=l.response)==null?void 0:N.data)!=null&&L.errors)){const w=l.response.data.errors;Object.keys(w).forEach(M=>{p(M,{type:"server",message:w[M].join(", ")})})}}t(!1)};function f(r,i,g="="){switch(g){case"=":return r===i;case">":return r>i;case"<":return r<i;case">=":return r>=i;case"<=":return r<=i;case"!==":return r!==i;default:return r===i}}return s.jsxs(P,{...u,children:[s.jsx(D,{isLoading:j||a}),s.jsxs("form",{onSubmit:u.handleSubmit(c),children:[s.jsxs("div",{className:h,children:[q?s.jsx(s.Fragment,{children:F}):s.jsx(s.Fragment,{children:(e??[]).map((r,i)=>s.jsx("div",{className:`mt-8 ${r.classPosition}`,children:r.fieldCustome?r.fieldCustomeValue:s.jsx(s.Fragment,{children:!r.conditional||f(x(r.parameterConditional??""),r.valueConditional,r.conditionalType)?s.jsx(J,{model:r}):null})},i))}),m]}),!y&&s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{ie as F};
