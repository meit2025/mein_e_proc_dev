import{q as k,u as v,r as n,j as e,a as y}from"./app-CHySH2ay.js";import{L as h}from"./logo-HtzTG1e0.js";import{a as j}from"./axiosInstance-JmT-8n3g.js";import{L as w}from"./Loading-DQeeGEEE.js";import"./app-HlhieNAw.js";import"./index-CKxmO9hz.js";const M=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center size-8 bg-success-light rounded-full border border-success-clarity",children:e.jsx("i",{className:`ki-filled ${s.is_read?" ki-check text-success":"ki-information-1 text-warning"}  text-lg `})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-2sm font-medium mb-px",children:e.jsx(y,{className:"hover:text-primary-active text-gray-900 font-semibold",href:"#",children:s.message})}),e.jsx("span",{className:"flex items-center text-2xs font-medium text-gray-500",children:_(s.created_at)})]})]}),_=s=>{const r=new Date,m=new Date(s),l=Math.floor((r.getTime()-m.getTime())/1e3);let a=Math.floor(l/31536e3);return a>1?`${a} years ago`:(a=Math.floor(l/2592e3),a>1?`${a} months ago`:(a=Math.floor(l/86400),a>1?`${a} days ago`:(a=Math.floor(l/3600),a>1?`${a} hours ago`:(a=Math.floor(l/60),a>1?`${a} minutes ago`:`${l} seconds ago`))))};function A(){var f,p,g;const{auth:s}=k().props,{showToast:r}=v(),[m,l]=n.useState([]),[a,N]=n.useState(!1),[b,c]=n.useState(!1),o=async()=>{c(!0);try{const i=await j.get("/notifikasi"),t=i.data.data,d=i.data.data.filter(x=>!x.is_read);N(d.length!==0),l(t)}catch(i){console.error("Error fetching notifications:",i)}finally{c(!1)}},u=async i=>{c(!0);try{const t=await j.get(i);r(t.data.message),await o()}catch(t){console.error("Error marking notification as read:",t)}finally{c(!1)}};return n.useEffect(()=>{var d;const i=`App.Models.User.${(d=s==null?void 0:s.user)==null?void 0:d.id}`,t=async x=>{r(x.message.message),await o()};return window.Echo.private(i).listen("NotifikasiUsers",t),()=>{window.Echo.leave(i)}},[(f=s==null?void 0:s.user)==null?void 0:f.id]),n.useEffect(()=>{o()},[]),e.jsxs(e.Fragment,{children:[e.jsx(w,{isLoading:b}),e.jsx("header",{className:"header fixed top-0 z-10 left-0 right-0 flex items-stretch shrink-0 bg-[--tw-page-bg] dark:bg-[--tw-page-bg-dark]","data-sticky":"true","data-sticky-className":"shadow-sm","data-sticky-name":"header",id:"header",children:e.jsxs("div",{className:"container-fixed flex justify-between items-stretch lg:gap-4",id:"header_container",children:[e.jsxs("div",{className:"flex gap-1 lg:hidden items-center -ml-1",children:[e.jsx("a",{className:"shrink-0",href:"/",children:e.jsx("img",{className:"max-h-[25px] w-full",src:h})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"btn btn-icon btn-light btn-clear btn-sm","data-drawer-toggle":"#sidebar",children:e.jsx("i",{className:"ki-filled ki-menu"})})})]}),e.jsx("div",{className:"flex items-stretch",id:"mega_menu_container"}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3.5",children:[e.jsxs("div",{className:"dropdown","data-dropdown":"true","data-dropdown-offset":"70px, 10px","data-dropdown-placement":"bottom-end","data-dropdown-trigger":"click|lg:click",children:[e.jsxs("button",{className:"dropdown-toggle btn btn-icon btn-icon-lg relative cursor-pointer size-9 rounded-full hover:bg-primary-light hover:text-primary dropdown-open:bg-primary-light dropdown-open:text-primary text-gray-500",children:[e.jsx("i",{className:"ki-filled ki-notification-on"}),a&&e.jsx("span",{className:"badge badge-dot badge-success size-[5px] absolute top-0.5 right-0.5 transform translate-y-1/2"})]}),e.jsxs("div",{className:"dropdown-content light:border-gray-300 w-full max-w-[460px]",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2.5 text-sm text-gray-900 font-semibold px-5 py-2.5 border-b border-b-gray-200",id:"notifications_header",children:["Notifications",e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-clear shrink-0","data-dropdown-dismiss":"true",children:e.jsx("i",{className:"ki-filled ki-cross"})})]}),e.jsx("div",{className:"tabs justify-between px-5 mb-2","data-tabs":"true",id:"notifications_tabs"}),e.jsx("div",{className:"grow",id:"notifications_tab_all",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"scrollable-y-auto","data-scrollable":"true","data-scrollable-dependencies":"#header","data-scrollable-max-height":"auto","data-scrollable-offset":"200px",children:e.jsx("div",{className:"flex flex-col gap-5 pt-3 pb-4 divider-y divider-gray-200",children:m.map((i,t)=>e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex grow gap-2.5 px-5",children:M(i)},t),e.jsx("div",{className:"border-b border-b-gray-200"})]}))})}),e.jsx("div",{className:"border-b border-b-gray-200"}),e.jsxs("div",{className:"grid grid-cols-2 p-5 gap-2.5",id:"notifications_all_footer",children:[e.jsx("button",{onClick:i=>u("/notifikasi/delete"),className:"btn btn-sm btn-light justify-center",children:"Delete all"}),e.jsx("button",{onClick:i=>u("/notifikasi/read"),className:"btn btn-sm btn-light justify-center",children:"Mark all as read"})]})]})})]})]}),e.jsx("div",{className:"menu","data-menu":"true",children:e.jsxs("div",{className:"menu-item","data-menu-item-offset":"20px, 10px","data-menu-item-placement":"bottom-end","data-menu-item-toggle":"dropdown","data-menu-item-trigger":"click|lg:click",children:[e.jsx("div",{className:"menu-toggle btn btn-icon rounded-full",children:e.jsx("img",{alt:"",className:"size-10 rounded-full border-2 border-success shrink-0",src:h})}),e.jsxs("div",{className:"menu-dropdown menu-default light:border-gray-300 w-screen max-w-[250px]",children:[e.jsx("div",{className:"flex items-center justify-between px-5 py-1.5 gap-1.5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{alt:"",className:"size-9 rounded-full border-2 border-success",src:h}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"text-sm text-gray-800 font-semibold leading-none",children:(p=s==null?void 0:s.user)==null?void 0:p.name}),e.jsx("a",{className:"text-xs text-gray-600 hover:text-primary font-medium leading-none",href:"html/demo1/account/home/get-started.html",children:(g=s==null?void 0:s.user)==null?void 0:g.email})]})]})}),e.jsx("div",{className:"menu-separator"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/public-profile/profiles/default.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-badge"})}),e.jsx("span",{className:"menu-title",children:"Public Profile"})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/home/user-profile.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-profile-circle"})}),e.jsx("span",{className:"menu-title",children:"My Profile"})]})}),e.jsxs("div",{className:"menu-item","data-menu-item-offset":"-50px, 0","data-menu-item-placement":"left-start","data-menu-item-toggle":"dropdown","data-menu-item-trigger":"click|lg:hover",children:[e.jsxs("div",{className:"menu-link",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-setting-2"})}),e.jsx("span",{className:"menu-title",children:"My Account"}),e.jsx("span",{className:"menu-arrow",children:e.jsx("i",{className:"ki-filled ki-right text-3xs"})})]}),e.jsxs("div",{className:"menu-dropdown menu-default light:border-gray-300 w-full max-w-[220px]",children:[e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/home/get-started.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-coffee"})}),e.jsx("span",{className:"menu-title",children:"Get Started"})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/home/user-profile.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-some-files"})}),e.jsx("span",{className:"menu-title",children:"My Profile"})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"#",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-icon"})}),e.jsx("span",{className:"menu-title",children:"Billing"}),e.jsxs("span",{className:"menu-badge","data-tooltip":"true","data-tooltip-placement":"top",children:[e.jsx("i",{className:"ki-filled ki-information-2 text-md text-gray-500"}),e.jsx("span",{className:"tooltip","data-tooltip-content":"true",children:"Payment and subscription info"})]})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/security/overview.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-medal-star"})}),e.jsx("span",{className:"menu-title",children:"Security"})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/members/teams.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-setting"})}),e.jsx("span",{className:"menu-title",children:"Members & Roles"})]})}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/integrations.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-switch"})}),e.jsx("span",{className:"menu-title",children:"Integrations"})]})}),e.jsx("div",{className:"menu-separator"}),e.jsx("div",{className:"menu-item",children:e.jsxs("a",{className:"menu-link",href:"html/demo1/account/security/overview.html",children:[e.jsx("span",{className:"menu-icon",children:e.jsx("i",{className:"ki-filled ki-shield-tick"})}),e.jsx("span",{className:"menu-title",children:"Notifications"}),e.jsxs("label",{className:"switch switch-sm",children:["",e.jsx("input",{checked:!1,name:"check",type:"checkbox",value:"1"})]})]})})]})]})]}),e.jsx("div",{className:"menu-separator"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"menu-item px-4 py-1.5",children:e.jsx("a",{className:"btn btn-sm btn-light justify-center",href:"/logout",children:"Log out"})})})]})]})})]})]})})]})}export{A as default};
