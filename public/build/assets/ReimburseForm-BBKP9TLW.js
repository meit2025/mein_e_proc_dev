import{j as e,r as C,u as Pe,q as Ge}from"./app-DmdjFYN3.js";import{B as ze}from"./button-ByWU15lG.js";import{z as d,t as Oe}from"./index-BQDDbtGT.js";import{f as z}from"./rupiahCurrencyFormat-CP-6egij.js";import{d as Ye,F as x,a as g,b as _,c as b,f as We,e as Ze}from"./form-CqaPDspB.js";import{u as Je,b as Ke}from"./index.esm-CKoOinFG.js";import{T as oe}from"./textarea-DcskZrXp.js";/* empty css                  */import{S as Xe}from"./scroll-area-DxTtq742.js";import{a as q}from"./axiosInstance-Bgc-5Uba.js";import{S as le}from"./separator-fZ3zoYV1.js";import{T as He,a as Qe,b as Ue,c as es}from"./tabs-xiyoa8Aq.js";import{S as T,a as k,b as A,c as $,d as L}from"./select-BfvEDJjB.js";import{F as ie}from"./formDropdown-BBndZPCe.js";import{C as ce}from"./CustomDatePicker-BhrZUTiD.js";import{I as me}from"./input-DBXbMqR8.js";import{F as v}from"./utils-DkKlTS5W.js";import{u as Q}from"./getDropdown-HLpn0cwd.js";import{G as ss,a as de,b as ts}from"./api-BeRu2Z8X.js";import{L as rs}from"./LoadingSpin-ClTAQObM.js";import{W as as}from"./WorkflowComponent-B3S7LAR3.js";import{C as ns}from"./CustomStatus-Cp7HloCf.js";import{B as os}from"./Button-BXNR_zZl.js";import"./app-DQK4SJPx.js";import"./index-ChSjQNUV.js";import"./index-Bb4qSo10.js";import"./index-DuB2W0Qy.js";import"./index-CwK3G1m4.js";import"./index-Bvuzssq6.js";import"./index-CfLX6Nrw.js";import"./index-DYcOYdjm.js";import"./index-U_nQZURT.js";import"./index-9m1hz7GY.js";import"./index-spAMJ4bx.js";import"./index-7sizUBCg.js";import"./Combination-dV56z6h6.js";import"./index-D14G0JmU.js";import"./TextField-Ae-BOfAt.js";import"./createSvgIcon-BjVbGZeT.js";import"./DefaultPropsProvider-CwyvXzBo.js";import"./extends-CF3RwP-h.js";import"./useSlot-DkcPt954.js";import"./createSimplePaletteValueFilter-BPz92A5r.js";import"./useControlled-DyI6iNHe.js";import"./FormHelperText-CDzZYCvV.js";import"./popover-BbJTFm7J.js";import"./createLucideIcon-ufL-sbNF.js";function ls({isLoading:Z=!1,children:J}){return e.jsx("div",{className:"",children:Z?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-64 w-full flex justify-center items-center",children:e.jsx(rs,{})})}):J})}const at=({onSuccess:Z,purchasing_groups:J,currencies:ue,taxDefaultValue:U,uomDefaultValue:ee,categories:is,users:cs,cost_center:pe,edit_url:he,update_url:fe,store_url:je,type:f,currentUser:E})=>{const[xe,ge]=C.useState("form1"),{showToast:V}=Pe();Ge().props;const{dataDropdown:_e,getDropdown:se}=Q(ss),{dataDropdown:be,getDropdown:ye}=Q(),{dataDropdown:we,getDropdown:ve}=Q(),[P,te]=C.useState([]),[Se,K]=C.useState([]),[D,Ne]=C.useState(!1),[re,Fe]=C.useState(!1),[Ce,O]=C.useState(!1),[y,B]=C.useState([]),[G,De]=C.useState({approvalRequest:[],approvalFrom:[],acknowledgeFrom:[],approvalFromStatusRoute:[]}),Ee=1*1024*1024,Ie=["image/jpeg","image/png","application/pdf","image/heic"],qe=d.object({formCount:d.string().min(1,"total form must be have value"),remark_group:d.string().optional(),cost_center:d.string().min(1,"pusat biaya required"),requester:d.string().min(1,"requester required"),value:d.number().optional(),user_id:d.string().optional(),forms:d.array(d.object({reimburseId:d.string().optional(),for:d.string().optional(),group:d.string().optional(),reimburse_type:d.string().min(1,"reimburse type is required"),short_text:d.string().min(1,"remarks is required"),balance:d.string().min(1,"balance required"),currency:d.string().min(1,"currency required"),tax_on_sales:d.string().min(1,"tax required"),purchase_requisition_unit_of_measure:d.string().min(1,"uom required"),purchasing_group:d.string().min(1,"Purchasing Group required"),type:d.any(),item_delivery_data:d.date(),claim_date:d.date(),attachment:d.array(d.instanceof(File).refine(t=>Ie.includes(t.type),{message:"File type must be JPG, JPEG, PNG, or PDF"}).refine(t=>t.size<=Ee,{message:"File size must be less than 1MB"})).min(f===v.create?1:0,"Attachment is required")}))});C.useEffect(()=>{ve("",{name:"mwszkz",id:"id",tabel:"pajaks",where:{key:"mwszkz",parameter:"V0"}}),ye("",{name:"unit_of_measurement_text",id:"id",tabel:"uoms",where:{key:"iso_code",parameter:"PCE"}}),se("",{name:"name",id:"nip",tabel:"users"}),n.getValues("requester")!==""&&Y(0)},[]);const Re={formCount:"1",remark_group:"test",cost_center:"",requester:String(E==null?void 0:E.is_admin)==="1"?"":E==null?void 0:E.nip,forms:[{reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:U,purchase_requisition_unit_of_measure:ee,purchasing_group:"",type:"",item_delivery_data:new Date,claim_date:new Date,attachment:[]}]},n=Je({resolver:Oe(qe),defaultValues:Re}),{fields:X,update:S}=Ke({control:n.control,name:"forms"});async function Te(){n.setValue("forms",[]),O(!0);try{const t=await q.get(he??""),s=t.data.data.group,o=t.data.data.forms;Ne(s.reimbursementStatus);const m=o.map(a=>({reimburseId:String(a.id),for:String(a.for),group:String(a.group),reimburse_type:a.reimburse_type.code,short_text:a.short_text,balance:a.balance,currency:a.currency,tax_on_sales:String(a.tax_on_sales),purchase_requisition_unit_of_measure:String(a.purchase_requisition_unit_of_measure),purchasing_group:String(a.purchasing_group),type:a.type=="Family"?"0":"1",item_delivery_data:new Date(a.item_delivery_data),claim_date:new Date(a.claim_date),attachment:[]}));n.setValue("formCount",o.length.toString()),n.setValue("remark_group",s.remark),n.setValue("cost_center",String(s.cost_center.id)),n.setValue("requester",s.requester);let i=0;for(const a of o)await Y(i,{reimburse_type:a.reimburse_type.code}),await ae(i,{type:a.type=="Family"?"0":"1",reimburse_type:a.reimburse_type.code}),await H(i,{reimburse_type:a.reimburse_type.code}),i++;n.setValue("forms",m),O(!1)}catch(t){console.log(t),O(!1)}}C.useEffect(()=>{f===v.edit&&(O(!0),Te())},[f]);const ke=async t=>{t.length>0&&se("",{name:"name",id:"nip",tabel:"users"})},Y=async(t,s=null)=>{const o=await q.get(de,{params:{user:n.getValues("requester"),hasValue:s!=null?s.reimburse_type:null},headers:{"Content-Type":"application/json"}});te(m=>{const i=[...m];return i[t]=o.data.data,i})},Ae=async(t,s)=>{if(t&&t.length>0)try{const o=await q.get(de,{params:{search:t,user:n.getValues("requester"),familyRelationship:n.getValues(`forms.${s}.type`)}});te(m=>{const i=[...m];return i[s]=o.data.data,i})}catch(o){console.error("Error searching reimburse types:",o)}},ae=async(t,s)=>{const o=await q.get(ts,{params:{user:n.getValues("requester"),familyRelationship:s.type,reimburseType:s.reimburse_type},headers:{"Content-Type":"application/json"}});K(m=>{const i=[...m];return i[t]=o.data.data,i})},$e=t=>{for(let s=0;s<X.length;s++)Y(s);if(t==null)for(let s=0;s<X.length;s++)n.setValue(`forms.${s}.reimburse_type`,""),n.setValue(`forms.${s}.for`,"");B([]),K([])};function Le(t){const s=[...n.getValues("forms")];for(let o=0;o<parseInt(t);o++)if(o+1>s.length){Y(o);const m={reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:U,purchase_requisition_unit_of_measure:ee,purchasing_group:"",type:"",item_delivery_data:new Date,claim_date:new Date,attachment:[]};s.push(m)}n.setValue("forms",s)}const Ve=t=>{ge(t)},Be=async t=>{var o,m,i,a;if(y)for(let r=0;r<y.length;r++){let c=t.forms.length==0?0:t.forms.length-1;if(parseInt((o=y[r])==null?void 0:o.limit)<c){V("Limit in form "+r+" has been reached","error");return}if(parseInt(((m=y[r])==null?void 0:m.balance)??0)<parseInt(t.forms[r].balance??0)){V("Please check your balance input in forms "+(r+1)+"  is not must be above "+((i=y[r])==null?void 0:i.balance),"error");return}}const s=t.forms.reduce((r,c)=>r+parseInt(c.balance)||0,0);t.value=s,t.user_id=(t==null?void 0:t.requester)||"0";try{let r;f===v.edit?r=await q.put(fe??"",t,{headers:{"Content-Type":"multipart/form-data"}}):r=await q.post(je??"",t,{headers:{"Content-Type":"multipart/form-data"}}),V((a=r==null?void 0:r.data)==null?void 0:a.data,"success"),Z()}catch(r){console.log(r)}};async function H(t,s=null){var i,a;const o=n.getValues(`forms.${t}`),m={user:n.getValues("requester"),reimbuse_type:s!=null?s.reimburse_type:o.reimburse_type};try{const r=await q.get("reimburse/data-limit-and-balance",{params:m});B(c=>{const l=n.getValues("forms").filter((N,h)=>h!==t&&N.reimburse_type===o.reimburse_type).reduce((N,h)=>N+parseInt(h.balance)||0,0),F=[...c];return F[t]={...r.data.data,balance:r.data.data.balance-l,limit:Math.max(0,r.data.data.limit-(t>0?1:0))},F})}catch(r){V((a=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:a.message,"error")}}const ne=async()=>{var t,s,o,m,i,a,r,c,u,p,l,F;try{const h=n.getValues("forms").map((j,R)=>({index:R,value:j.balance?parseInt(j.balance):0}));if(console.log(h),h.some(j=>j.value===0)){const j=h.findIndex(R=>R.value===0);V(`Please fill the balance for form ${j+1}`,"error");return}const w=await q.get("/check-approval",{params:{value:h==null?void 0:h[0].value,requester:n.getValues("requester"),type:"REIM"}});if(w.data.status_code===200){const j=(s=(t=w.data)==null?void 0:t.data)==null?void 0:s.approval.map(I=>(I==null?void 0:I.division_name)||null),R=(m=(o=w.data)==null?void 0:o.data)==null?void 0:m.approval.map(I=>(I==null?void 0:I.name)||null),M=[];(a=(i=w.data)==null?void 0:i.data)!=null&&a.hr&&M.push((u=(c=(r=w.data)==null?void 0:r.data)==null?void 0:c.hr)==null?void 0:u.name);const Me=(((p=w.data.data)==null?void 0:p.approval)??[]).map(I=>({status:"",name:I.name,dateApproved:""}));De({approvalRequest:j,approvalFrom:R,acknowledgeFrom:M,approvalFromStatusRoute:Me}),Fe(!0)}}catch(N){V((F=(l=N==null?void 0:N.response)==null?void 0:l.data)==null?void 0:F.message,"error")}};return C.useEffect(()=>{n.getValues("forms").reduce((o,m)=>o+parseInt(m.balance)||0,0)>0&&re===!0&&ne()},[n.watch("forms"),n.watch("requester")]),e.jsx(Xe,{className:"h-[600px] w-full",children:e.jsx(ls,{isLoading:Ce,children:e.jsx(Ye,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Be),children:[e.jsx("table",{className:"text-xs mt-4 reimburse-form-table font-thin w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Request Status"}),e.jsx("td",{children:D&&e.jsx(ns,{name:D==null?void 0:D.name,className:D==null?void 0:D.classname,code:D==null?void 0:D.code})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:"remark_group",render:({field:t})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(oe,{placeholder:"Insert remark",...t})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Pusat Biaya"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:"cost_center",render:({field:t})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:f===v.edit,onValueChange:s=>t.onChange(s),value:t.value,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:pe.map(s=>e.jsx(L,{value:s.id.toString(),children:s.cost_center},s.id))})]})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Employee"}),e.jsx("td",{children:e.jsx(ie,{options:_e,fieldName:"requester",isRequired:!0,disabled:String(E==null?void 0:E.is_admin)==="0"||f===v.edit,placeholder:"Select Employee",onSearch:ke,onChangeOutside:t=>$e(t),classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Number of Forms"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:"formCount",render:({field:t})=>{var s;return e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:f===v.edit,onValueChange:o=>{t.onChange(o),Le(o)},value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"Select number of forms"})}),e.jsx($,{children:Array.from({length:3},(o,m)=>m+1).map(o=>e.jsx(L,{value:o.toString(),children:o},o))})]})}),e.jsx(b,{})]})}})})]})]})}),e.jsx(le,{className:"my-4"}),e.jsxs(He,{value:xe,onValueChange:Ve,className:"w-full",children:[e.jsxs(Qe,{className:"flex items-center justify-start space-x-4",children:[" ",Array.from({length:n.watch("formCount")||1}).map((t,s)=>e.jsxs(Ue,{value:`form${s+1}`,children:["Form ",s+1]},s))]}),X.map((t,s)=>{var o,m,i;return e.jsxs(es,{value:`form${s+1}`,children:[e.jsx(x,{control:n.control,name:`forms.${s}.reimburseId`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(me,{className:"sr-only",value:t.reimburseId,onChange:a.onChange})}),e.jsx(b,{})]})}),e.jsx("div",{children:e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Type of Reimbursement "}),e.jsx("td",{className:"flex items-center space-x-3",children:e.jsx(ie,{options:P[s],fieldName:`forms.${s}.reimburse_type`,isRequired:!0,disabled:n.getValues("requester")==""||f===v.edit,placeholder:"Select Reimburse Type",onChangeOutside:(a,r)=>{const c=n.getValues("requester");if(a!==(r==null?void 0:r.value)&&c!==""&&Ae(a,s),r!=null&&r.value){let u=P[s].filter(p=>p.value==r.value)[0];S(s,{...t,reimburse_type:r==null?void 0:r.value,type:u.is_employee===1?"Employee":"Family"}),u.is_employee===1?H(s):(B(p=>{const l=[...p];return l[s]=[],l}),n.setValue(`forms.${s}.balance`,""),ae(s,{type:u.is_employee,reimburse_type:r==null?void 0:r.value}))}else{B(p=>{const l=[...p];return l[s]=[],l}),S(s,{...t,balance:""}),n.setValue(`forms.${s}.for`,""),K(p=>{const l=[...p];return l[s]=[],l});const u=n.getValues("forms");u.forEach((p,l)=>{var F,N;if(l>s&&u[l].reimburse_type===t.reimburse_type){const h=((F=y[l])==null?void 0:F.balance)||0,W=((N=y[l])==null?void 0:N.limit)||0;B(w=>{const j=[...w];return j[l]={...j[l],balance:h+parseInt(t.balance||"0"),limit:W+1},j}),n.setValue(`forms.${l}.balance`,"")}})}},classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Family"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.for`,render:({field:a})=>{var r,c,u,p;return e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:((u=(c=(r=P==null?void 0:P[s])==null?void 0:r.filter(l=>(l==null?void 0:l.value)==n.getValues(`forms.${s}.reimburse_type`)))==null?void 0:c[0])==null?void 0:u.is_employee)===1||f===v.edit,onValueChange:l=>{S(s,{...t,for:l}),H(s,{reimburse_type:n.getValues(`forms.${s}.reimburse_type`)})},defaultValue:t==null?void 0:t.for,value:t.for,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:(p=Se[s])==null?void 0:p.map(l=>e.jsx(L,{value:l.value.toString(),children:l.label},l.value))})]})}),e.jsx(b,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Purchasing Group"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.purchasing_group`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:f===v.edit,onValueChange:r=>{S(s,{...t,purchasing_group:String(r)})},defaultValue:t.purchasing_group,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:J.map(r=>e.jsxs(L,{value:r.id.toString(),children:[r.purchasing_group_desc," -"," ",r.purchasing_group]},r.id))})]})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Tax"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.tax_on_sales`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:!0,onValueChange:r=>{S(s,{...t,tax_on_sales:r})},defaultValue:t.tax_on_sales,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:(we??[]).map((r,c)=>e.jsx(L,{value:r.value.toString(),children:r.label},r.value))})]})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Uom"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.purchase_requisition_unit_of_measure`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:!0,onValueChange:r=>{S(s,{...t,purchase_requisition_unit_of_measure:String(r)})},defaultValue:t.purchase_requisition_unit_of_measure,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:(be??[]).map((r,c)=>e.jsx(L,{value:r.value.toString(),children:r.label},r.value))})]})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.short_text`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(oe,{placeholder:"Insert remark",onChange:r=>{S(s,{...t,short_text:r.target.value})},defaultValue:t.short_text})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Sisa Balance"}),e.jsx("td",{children:e.jsx("span",{className:"font-bold",children:((o=y[s])==null?void 0:o.balance)&&z((m=y[s])==null?void 0:m.balance)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Sisa Limit"}),e.jsxs("td",{children:[e.jsx("span",{className:"font-bold",children:(i=y[s])==null?void 0:i.limit})," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Receipt Date"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.item_delivery_data`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(ce,{disabled:f===v.edit,initialDate:a.value instanceof Date?a.value:new Date(a.value),onDateChange:r=>a.onChange(r)})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Claim Date"}),e.jsx("td",{children:e.jsx(x,{control:n.control,name:`forms.${s}.claim_date`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(ce,{disabled:f===v.edit,initialDate:a.value instanceof Date?a.value:new Date(a.value),onDateChange:r=>a.onChange(r)})}),e.jsx(b,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Reimburse Cost"}),e.jsxs("td",{className:"w-full grid grid-cols-7 gap-x-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(x,{control:n.control,name:`forms.${s}.currency`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(_,{children:e.jsxs(T,{disabled:f===v.edit,onValueChange:r=>{S(s,{...t,currency:r})},defaultValue:t.currency,children:[e.jsx(k,{className:"w-[200px]",children:e.jsx(A,{placeholder:"-"})}),e.jsx($,{children:ue.map(r=>e.jsxs(L,{value:r.code,children:[r.name," (",r.code,")"]},r.code))})]})}),e.jsx(We,{className:"h-6"}),e.jsx(b,{})]})})}),e.jsx("div",{className:"col-span-4",children:e.jsx(x,{control:n.control,name:`forms.${s}.balance`,render:({field:a})=>{var r;return e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(me,{type:"text",placeholder:"0",onChange:c=>{var h;const u=c.target.value.replace(/[^0-9]/g,""),p=z(u,!1),l=parseInt(u)||0,F=((h=y[s])==null?void 0:h.balance)||0;if(l>F){c.target.value=z(u.slice(0,-1),!1);return}S(s,{...t,balance:u}),c.target.value=p,n.getValues("forms").forEach((W,w)=>{if(w>s&&W.reimburse_type===t.reimburse_type){const j=F-l;B(R=>{const M=[...R];return M[w]={...M[w],balance:j},M}),S(w,{...t,balance:""})}})},defaultValue:z(t.balance,!1),value:z(t.balance,!1),disabled:typeof y[s]>"u"||((r=y[s])==null?void 0:r.length)===0||f===v.edit})}),e.jsx(b,{})]})}})})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"File Attachment"}),e.jsxs("td",{children:[e.jsx(x,{control:n.control,name:`forms.${s}.attachment`,render:({field:a})=>e.jsxs(g,{children:[e.jsx(Ze,{className:"text-xs text-gray-500 font-extralight mb-1",children:"Max File: 1000KB, Extension : doc,jpg,ods,png,txt,pdf,heic"}),e.jsx(_,{children:e.jsx("input",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-xs shadow-sm transition-colors file:border-0 file:bg-transparent file:text-xs file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",type:"file",multiple:!0,onChange:r=>{const c=r.target.files;if(c){const u=[...t.attachment],p=Array.from(c);u.push(...p),S(s,{...t,attachment:u})}}})}),e.jsx(b,{})]})}),e.jsx("div",{className:"mt-2",children:t.attachment&&t.attachment.length>0&&e.jsx("ul",{children:t.attachment.map((a,r)=>e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:a.name}),e.jsx("button",{type:"button",className:"text-red-500 ml-2",onClick:()=>{const c=t.attachment.filter((u,p)=>p!==r);S(s,{...t,attachment:c})},children:"Delete"})]},r))})})]})]})]})})})]},s)})]}),e.jsx(os,{onClick:async()=>await ne(),variant:"contained",color:"primary",type:"button",children:"Check Approval"}),e.jsx("div",{className:"my-2",children:re&&e.jsx(as,{workflowApproval:{approvalRequest:G.approvalRequest,approvalFrom:G.approvalFrom,acknowledgeFrom:G.acknowledgeFrom},workflowApprovalStep:G.approvalFromStatusRoute,workflowApprovalDiagram:G.approvalFrom})}),e.jsx(le,{className:"my-4"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(ze,{type:"submit",className:"w-32",children:"Save"})})]})})})})};export{at as ReimburseForm};
