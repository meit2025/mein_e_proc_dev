import{r as c,j as a}from"./app-Ctvnwnyl.js";import{F as i}from"./formInput-BQ2k2HoW.js";import{F as j}from"./formSwitch-C9WI0sO-.js";import{a as A,c as m}from"./index.esm-CH6O0ubk.js";import"./app-DQK4SJPx.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-CMfROehW.js";import"./DefaultPropsProvider-yrEWbqjA.js";import"./Switch-B2WvYth3.js";import"./createSimplePaletteValueFilter-CpwnJQOf.js";import"./SwitchBase-CEivnZeJ.js";import"./useControlled-C_WiV8w4.js";const U=({disable:s})=>{const{getValues:h,setValue:r,watch:d}=A(),[p,l]=c.useState(!0),f=m({name:"is_cashAdvance"}),u=m({name:"vendors"}),_=e=>Array.isArray(e)?e.find(t=>t&&t.winner===!0):null;c.useEffect(()=>{const e=_(u);l(!e)},[u]);const n=d("total_all_amount"),v=e=>{console.log(e);const t=h("vendors").filter(o=>(o.winner||!1)===!0),x=((t.length>0?t[0]:null).units||[]).reduce((o,g)=>o+g.total_amount,0);r("total_all_amount",x);const b=parseInt(e)/100*parseInt(n);r("cash_advance_purchases.nominal",b)};return c.useEffect(()=>{if(n>0){const e=parseInt(d("cash_advance_purchases.dp"))/100*parseInt(n);r("cash_advance_purchases.nominal",e)}},[n]),a.jsxs("div",{children:[a.jsx(j,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:s}),f&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(i,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!1,disabled:s,type:"number",placeholder:"Enter reference",maxLength:100,minLength:1,onChanges:e=>v(e.target.value)}),a.jsx(i,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:s,type:"text",placeholder:"Enter reference"}),a.jsx(i,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:p?"Please Chose The Propose Vendor":""})]})]})};export{U as default};
