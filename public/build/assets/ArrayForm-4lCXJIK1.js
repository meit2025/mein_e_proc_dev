import{r as w,j as a,a as y}from"./app-DGVQjNt2.js";import{F as i}from"./formDropdown-DTr37xIo.js";import{F as c}from"./formInput-VdUctKLl.js";import{u as o}from"./getDropdown-CWNPDN6O.js";import{a as Z,c as f}from"./index.esm-De_pvXg7.js";import{F as v}from"./formSwitch-fiGggqc-.js";import{F as ee}from"./formTextArea-DAaQm1Aa.js";import{columnsItem as te}from"./listModel-lENyTYRx.js";import{B as ae}from"./Button-Kfj3e9G4.js";import{B as se}from"./Box-BVdCBfuI.js";import{D as ie}from"./DataGrid-BVtL3Wrz.js";import"./app-HlhieNAw.js";import"./TextField-DQKYZ5he.js";import"./useSlot-_G19XvkC.js";import"./DefaultPropsProvider-BlLl9HAQ.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-CO2E3lAV.js";import"./useControlled-B0dPpj7V.js";import"./FormHelperText-B3LaBlw2.js";import"./axiosInstance-C8hqrQ0i.js";import"./index-D6sdH0h3.js";import"./Switch-B8GuPMnN.js";import"./SwitchBase-BOVFyk3i.js";import"./Typography-Dg9tsdOp.js";import"./CustomStatus-CvzghIfm.js";import"./utils-B_fSG7st.js";import"./createLucideIcon-DjRlAJCY.js";import"./page-DLUHrefR.js";import"./ListItemText-BBBxjl6r.js";import"./FormControlLabel-CJrmv885.js";import"./KeyboardArrowRight-DiHi60TF.js";const Se=({dataIndex:r,subAsset:j,FetchDataValue:D,disable:s})=>{const{getValues:x,setValue:t,watch:q}=Z(),{dataDropdown:A,getDropdown:L}=o(),{dataDropdown:R,getDropdown:C}=o(),{dataDropdown:M,getDropdown:F}=o(),{dataDropdown:k,getDropdown:E}=o(),{dataDropdown:T,getDropdown:S}=o(),{dataDropdown:$,getDropdown:P}=o(),{dataDropdown:V,getDropdown:I}=o(),{dataDropdown:O,getDropdown:G}=o(),{dataDropdown:B,getDropdown:U}=o();f({name:"total_item"});const W=q(`vendors[${r}].units`),_=f({name:"item_account_assignment_categories"}),b=f({name:"document_type"}),z=f({name:"item_is_cashAdvance"});w.useEffect(()=>{C("",{name:"desc",id:"cost_center",tabel:"master_cost_centers"}),L("",{name:"name_one",id:"id",tabel:"master_business_partners"}),E("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),P("",{name:"description",id:"mwszkz",tabel:"pajaks"}),I("",{name:"unit_of_measurement_text",id:"commercial",tabel:"uoms"}),G("",{name:"desc",id:"order_number",tabel:"master_orders"}),U("",{name:"desc",id:"asset",tabel:"master_assets",where:{groupBy:"asset,desc"}})},[]),w.useEffect(()=>{F("",{name:"description",id:"account",tabel:"account_assignment_categories",attribut:b})},[b]);const H=async e=>{S("",{name:"material_number",id:"material_number",tabel:"master_materials",attribut:e,where:{key:"material_group",parameter:e}})},K=async()=>{const e=x(),u={id:e.item_id??`random-generated-id-${Math.random().toString(36).substr(2,9)}`,qty:e.item_qty,unit_price:e.item_unit_price,total_amount:e.item_qty*e.item_unit_price,account_assignment_categories:e.item_account_assignment_categories,cost_center:e.item_cost_center,material_group:e.item_material_group,material_number:e.item_material_number,uom:e.item_uom,tax:e.item_tax,short_text:e.item_short_text,order_number:e.item_order_number,asset_number:e.item_asset_number,sub_asset_number:e.item_sub_asset_number,is_cashAdvance:e.item_is_cashAdvance,cash_advance_purchases:{dp:e.item_dp,reference:e.item_reference,document_header_text:e.item_document_header_text,document_date:e.item_document_date,due_on:e.item_due_on,text:e.item_text_cash_advance}},d=x(`vendors[${r}].units`)||[];let m=[];e.action==="edit"?m=d.map((l,h)=>l.id===e.indexEdit?u:l):m=[...d,u];const p=m.reduce((l,h)=>l+h.total_amount,0);t(`vendors[${r}].units`,m),t("total_all_amount",p),t("indexEdit",0),t("item_id",null),Q()},Q=()=>{t("indexEdit",""),t("action","create"),t("item_account_assignment_categories",""),t("item_asset_number",""),t("item_cost_center",""),t("item_document_date",""),t("item_document_header_text",""),t("item_dp",""),t("item_due_on",""),t("item_id",""),t("item_is_cashAdvance",""),t("item_material_group",""),t("item_material_number",""),t("item_order_number",""),t("item_qty",""),t("item_reference",""),t("item_short_text",""),t("item_sub_asset_number",""),t("item_tax",""),t("item_text_cash_advance",""),t("item_unit_price",""),t("item_uom",""),t("cash_advance_purchases",null)},X=(e,n)=>{var d,m,p,l,h,g,N;console.log(n,e.id);const u=e.id??`random-generated-id-${Math.random().toString(36).substr(2,9)}`;t("indexEdit",u),t("action","edit"),t("item_account_assignment_categories",e.account_assignment_categories??""),t("item_asset_number",e.asset_number??""),t("item_cost_center",e.cost_center??""),t("item_id",u),t("item_is_cashAdvance",((d=e.cash_advance_purchases)==null?void 0:d.reference)!==null),t("item_material_group",e.material_group??""),t("item_material_number",e.material_number??""),t("item_order_number",e.order_number??""),t("item_qty",e.qty??"0"),t("item_short_text",e.short_text??""),t("item_sub_asset_number",e.sub_asset_number??""),t("item_tax",e.tax??""),t("item_unit_price",e.unit_price??"0"),t("item_uom",e.uom??""),t("item_reference",((m=e.cash_advance_purchases)==null?void 0:m.reference)??""),t("item_dp",((p=e.cash_advance_purchases)==null?void 0:p.dp)??""),t("item_due_on",((l=e.cash_advance_purchases)==null?void 0:l.due_on)??""),t("item_text_cash_advance",((h=e.cash_advance_purchases)==null?void 0:h.text)??""),t("item_document_date",((g=e.cash_advance_purchases)==null?void 0:g.document_date)??""),t("item_document_header_text",((N=e.cash_advance_purchases)==null?void 0:N.document_header_text)??"")},Y=(e,n)=>{const d=(x(`vendors[${r}].units`)||[]).filter((m,p)=>m.id!==e.id);t(`vendors[${r}].units`,d)},J=[{field:"actions",headerName:"Actions",width:150,renderCell:e=>a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",gap:"10px"},children:[a.jsx(y,{type:"button",onClick:n=>{n.preventDefault(),X(e.row,e)},href:"#",children:a.jsx("i",{className:" ki-duotone ki-notepad-edit text-success text-2xl"})}),a.jsx(y,{type:"button",onClick:n=>{n.preventDefault(),Y(e.row)},href:"#",children:a.jsx("i",{className:" ki-duotone ki-trash-square text-danger text-2xl"})})]})}];return a.jsxs("div",{children:[a.jsx(i,{options:A,fieldLabel:"Select Vendor",fieldName:`vendors[${r}].vendor`,isRequired:!0,style:{width:"56.5rem"},placeholder:"Select Vendor",classNames:"mt-2",disabled:s}),a.jsx(v,{fieldLabel:"Vendor Winner",fieldName:`vendors[${r}].winner`,isRequired:!1,disabled:s}),!s&&a.jsxs("div",{className:"card mt-2",children:[a.jsx("div",{className:"card-header",children:a.jsx("p",{children:"item"})}),a.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[a.jsx(c,{fieldLabel:"Qty",fieldName:"item_qty",isRequired:!1,type:"number",placeholder:"Enter your qty",disabled:s}),a.jsx(c,{fieldLabel:"Unit Price",fieldName:"item_unit_price",isRequired:!1,disabled:s,type:"number",placeholder:"Unit Price"}),a.jsx(i,{options:M,fieldLabel:"Account Assignment",fieldName:"item_account_assignment_categories",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Account Assignment",classNames:"mt-2"}),(_==="K"||_==="V"||_==="W"||_==="Y")&&a.jsx(i,{options:R,fieldLabel:"Cost Center",fieldName:"item_cost_center",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Cost Center",classNames:"mt-2"}),a.jsx(i,{options:k,fieldLabel:"Material Group",fieldName:"item_material_group",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material Group",classNames:"mt-2",onChangeOutside:async(e,n)=>{await H(e)}}),a.jsx(i,{options:T,fieldLabel:"Material number",fieldName:"item_material_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material number",classNames:"mt-2"}),a.jsx(i,{options:V,fieldLabel:"Uom",fieldName:"item_uom",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Purchase requisition unit of measure",classNames:"mt-2"}),a.jsx(i,{options:$,fieldLabel:"Tax on sales",fieldName:"item_tax",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Tax on sales",classNames:"mt-2"}),a.jsx(ee,{fieldLabel:"Short Text",fieldName:"item_short_text",isRequired:!1,disabled:s,maxLength:40,classNames:"mt-4",style:{width:"56.5rem"}}),_==="F"&&a.jsx(i,{options:O,fieldLabel:"Order Number",fieldName:"item_order_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Order Number",classNames:"mt-2"}),_==="A"&&a.jsxs(a.Fragment,{children:[a.jsx(i,{options:B,fieldLabel:"Main Asset Number",fieldName:"item_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Main Asset",classNames:"mt-2",onChangeOutside:(e,n)=>{D(e,r)}}),a.jsx(i,{options:j[r],fieldLabel:"Sub Asset",fieldName:"item_sub_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Sub Asset Number",classNames:"mt-2"})]}),a.jsx(v,{fieldLabel:"cash Advance",fieldName:"item_is_cashAdvance",isRequired:!1,disabled:s}),z&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(i,{options:[{label:"50%",value:"50"},{label:"40%",value:"40"},{label:"30%",value:"30"},{label:"20%",value:"20"},{label:"10%",value:"10"}],fieldLabel:"Persantase DP",fieldName:"item_dp",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Persantase DP Number",classNames:"mt-2"}),a.jsx(c,{fieldLabel:"reference",fieldName:"item_reference",isRequired:!1,disabled:s,type:"text",placeholder:"Enter reference"}),a.jsx(c,{fieldLabel:"Document Header Text",fieldName:"item_document_header_text",isRequired:!1,disabled:s,type:"text",placeholder:"Document Header Text"}),a.jsx(c,{fieldLabel:"Document Date",fieldName:"item_document_date",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Document Date"}),a.jsx(c,{fieldLabel:"Due On",fieldName:"item_due_on",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Due On"}),a.jsx(c,{fieldLabel:"text",fieldName:"item_text_cash_advance",isRequired:!1,disabled:s,type:"text",placeholder:"enter your text"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsx(ae,{type:"button",variant:"contained",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",onClick:async()=>await K(),children:"Add Item"})})]}),a.jsx(se,{sx:{width:"100%",overflowX:"auto",marginTop:"1rem"},children:a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"grid",children:a.jsx("div",{className:"card card-grid h-full min-w-full",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{"data-datatable":"true",children:a.jsx("div",{className:"scrollable-x-auto",children:a.jsx(ie,{columns:[...s?[]:J,...te],rows:W,hideFooterPagination:!0})})})})})})})})]})};export{Se as default};
