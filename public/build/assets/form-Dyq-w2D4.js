import{r as c,u as A,j as e}from"./app-DYUSrNDi.js";import{F as C}from"./form-DAzwkQeL.js";import{z as o,t as v}from"./index-C0yR_Eu_.js";import{B as E}from"./button-CRmmvgzo.js";import{u as O}from"./index.esm-TOiuebG7.js";import{S as V}from"./scroll-area-DLfIj1SZ.js";import{F as h}from"./formDropdown-DGWjOmyn.js";import{u as f}from"./getDropdown-DeNVvIdq.js";import{a as d}from"./axiosInstance-TYG1nCYI.js";import{F as l}from"./utils-DYJ8wrm0.js";import{M as B}from"./MultiSelect-DiwyDHRz.js";import"./app-CTy9eNAz.js";import"./index-BIUm9-bp.js";import"./TextField-DFQLETlq.js";import"./useSlot-DBz1MFtM.js";import"./FormHelperText-CoI8PJ3g.js";import"./createSimplePaletteValueFilter-DvOWLuJy.js";import"./index-BD9RO1GO.js";import"./checkbox-CExbGN1u.js";import"./index-DZdI8Unp.js";import"./index-B3sMbpht.js";import"./index-D8fxMpt7.js";function ae({onSuccess:i,type:m=l.create,listUser:b,storeURL:x,editURL:j,updateURL:y}){const[w,g]=c.useState([]),{dataDropdown:R,getDropdown:n}=f(),{dataDropdown:N,getDropdown:p}=f(),T=o.object({period:o.number("Period must choose"),type:o.number("Type must choose"),users:o.array(o.number().optional())}),F={period:null,type:null,users:[]},a=O({resolver:v(T),defaultValues:F});async function _(){try{const r=(await d.get(j)).data.data;a.reset({period:r.period.toString(),type:r.type.toString(),users:r.users})}catch{}}const{showToast:u}=A(),D=async t=>{var r;try{let s;m===l.edit?s=await d.put(y??"",t):s=await d.post(x??"",t),i==null||i(!0),u((r=s==null?void 0:s.data)==null?void 0:r.data,"success")}catch(s){i==null||i(!1),u(s.message,"error")}},S=async t=>{t.length>0&&n(t,{name:"code",id:"id",tabel:"master_type_reimburses"})},P=async t=>{t.length>0&&p(t,{name:"CONCAT(`start`, ' - ', `end`)",id:"id",tabel:"master_period_reimburses"})};return c.useEffect(()=>{n("",{name:"code",id:"id",tabel:"master_type_reimburses"}),p("",{name:"CONCAT(`start`, ' - ', `end`)",id:"id",tabel:"master_period_reimburses"}),m===l.edit&&_(),g(b)},[m]),e.jsx(V,{className:"h-[600px] w-full",children:e.jsx(C,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(D),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(h,{options:N,fieldName:"period",isRequired:!0,disabled:!1,placeholder:"Reimburse Period",onSearch:P,classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Users ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(B,{onSelect:t=>{a.setValue("users",t.map(r=>r.id))},value:a.getValues("users"),id:"id",label:"name",options:w})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(h,{options:R,fieldName:"type",isRequired:!0,disabled:!1,placeholder:"Reimburse Type",onSearch:S,classNames:"mt-2 w-full"})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(E,{type:"submit",children:"Save"})})]})})})}export{ae as default};
