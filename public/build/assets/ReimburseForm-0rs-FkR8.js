import{j as e,r as x,u as Me,q as Be}from"./app-x0vqMIUy.js";import{B as Ge}from"./button-BK8NEDTK.js";import{z as c,t as Oe}from"./index-C2MQA_mD.js";import{f as re}from"./rupiahCurrencyFormat-CP-6egij.js";import{d as ze,F as u,a as j,b as f,c as g,f as Ye,e as We}from"./form-CeDucTVc.js";import{u as Je,b as Ke}from"./index.esm-DNaWWHYD.js";import{T as ae}from"./textarea-cLsSQLI1.js";/* empty css                  */import{S as Xe}from"./scroll-area-Bepvm6C7.js";import{a as v}from"./axiosInstance-DC2Ozgr1.js";import{S as oe}from"./separator-BVb9vq_s.js";import{T as Ze,a as He,b as Qe,c as Ue}from"./tabs-Cm_5E2bN.js";import{S,a as N,b as D,c as F,d as C}from"./select-BdtwPAj3.js";import{F as ne}from"./formDropdown-DQgp11yx.js";import{C as W}from"./CustomDatePicker-xskNFMIx.js";import{I as le}from"./input-D0FssFDD.js";import{F as p}from"./utils-CMCdQ9Ec.js";import{u as ie}from"./getDropdown-Bnr_Y7vi.js";import{G as es,a as ce,b as ss,c as ts}from"./api-C-9NntP9.js";import{L as rs}from"./LoadingSpin-B_ZOCXR7.js";import{W as as}from"./WorkflowComponent-CAuPIhV8.js";import{C as os}from"./CustomStatus-CyjSpUgV.js";import{B as ns}from"./Button-TKStrXK8.js";import"./app-DQK4SJPx.js";import"./index-C0ZjVFPc.js";import"./index-Bb4qSo10.js";import"./index-Bv-JHkl9.js";import"./index-CgSRQGBw.js";import"./index-DIi3v1vA.js";import"./index-BEjVfUnM.js";import"./index-DddKYkWV.js";import"./index-BURT-ogB.js";import"./index-CUZ6j08t.js";import"./index-aRdJfT29.js";import"./index-Cm6BW04R.js";import"./Combination-2P47IzVY.js";import"./index-B8jRRkSC.js";import"./TextField-55ypvXce.js";import"./createSvgIcon-y6GdGt9h.js";import"./DefaultPropsProvider-CFJ5AoEg.js";import"./useSlot-CSQgVcbI.js";import"./createSimplePaletteValueFilter-D1BCRzmc.js";import"./useControlled-7j6xlwzB.js";import"./FormHelperText-CwM95F_e.js";import"./popover-By0xmZ75.js";import"./createLucideIcon-CCl6qnvb.js";function ls({isLoading:B=!1,children:G}){return e.jsx("div",{className:"",children:B?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-64 w-full flex justify-center items-center",children:e.jsx(rs,{})})}):G})}const at=({onSuccess:B,purchasing_groups:G,currencies:de,categories:me,periods:is,users:cs,taxes:ue,cost_center:pe,edit_url:he,update_url:je,store_url:fe,latestPeriod:ds,type:m,currentUser:R})=>{const[xe,ge]=x.useState("form1"),{showToast:q}=Me();Be().props,x.useState(1);const{dataDropdown:_e,getDropdown:be}=ie(),{dataDropdown:ye,getDropdown:J}=ie(es),[we,K]=x.useState([]),[ve,V]=x.useState([]),[Se,I]=x.useState([]),[y,Ne]=x.useState(!1),[X,De]=x.useState(!1),[Fe,A]=x.useState(!1),[k,E]=x.useState([]);x.useState([]);const[$,Ce]=x.useState({approvalRequest:[],approvalFrom:[],acknowledgeFrom:[],approvalFromStatusRoute:[]}),Re=1*1024*1024,Te=["image/jpeg","image/png","application/pdf"],Ee=c.object({formCount:c.string().min(1,"total form must be have value"),remark_group:c.string().optional(),cost_center:c.string().min(1,"cost center required"),requester:c.string().min(1,"requester required"),value:c.number().optional(),user_id:c.string().optional(),forms:c.array(c.object({reimburseId:c.string().optional(),for:c.string().optional(),group:c.string().optional(),reimburse_type:c.string().min(1,"reimburse type is required"),short_text:c.string().min(1,"remarks is required"),balance:c.string().min(1,"balance required"),currency:c.string().min(1,"currency required"),tax_on_sales:c.string().min(1,"tax required"),purchase_requisition_unit_of_measure:c.string().min(1,"uom required"),purchasing_group:c.string().min(1,"Purchasing Group required"),period:c.string().min(1,"period required"),type:c.any(),item_delivery_data:c.date(),start_date:c.date(),end_date:c.date(),attachment:c.array(c.instanceof(File).refine(t=>Te.includes(t.type),{message:"File type must be JPG, JPEG, PNG, or PDF"}).refine(t=>t.size<=Re,{message:"File size must be less than 1MB"}))}))}),a=Je({resolver:Oe(Ee),defaultValues:{formCount:"1",remark_group:"test",cost_center:"",requester:String(R==null?void 0:R.is_admin)==="1"?"":R==null?void 0:R.nip,forms:[{reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:"",purchase_requisition_unit_of_measure:"",purchasing_group:"",period:"",type:"",item_delivery_data:new Date,start_date:new Date,end_date:new Date,attachment:[]}]}}),{fields:L,update:_}=Ke({control:a.control,name:"forms"});async function $e(){a.setValue("forms",[]),A(!0);try{const t=await v.get(he??""),s=t.data.data.group,n=t.data.data.forms;Ne(s.reimbursementStatus);const i=n.map(r=>({reimburseId:String(r.id),for:String(r.for),group:String(r.group),reimburse_type:r.reimburse_type.code,short_text:r.short_text,balance:r.balance,currency:r.currency,tax_on_sales:String(r.tax_on_sales),purchase_requisition_unit_of_measure:String(r.purchase_requisition_unit_of_measure),purchasing_group:String(r.purchasing_group),period:r.period,type:r.type,item_delivery_data:new Date(r.item_delivery_data),start_date:new Date(r.start_date),end_date:new Date(r.end_date),attachment:""}));a.setValue("formCount",n.length.toString()),a.setValue("remark_group",s.remark),a.setValue("cost_center",String(s.cost_center.id)),a.setValue("requester",s.requester);let o=0;for(const r of n)await O(o,{type:r.type}),await Z(o,{type:r.type,reimburse_type:r.reimburse_type.code}),await H(o,{type:r.type,reimburse_type:r.reimburse_type.code,period:r.period}),await P(o,{period:r.period,reimburse_type:r.reimburse_type.code}),o++;a.setValue("forms",i),A(!1)}catch(t){console.log(t),A(!1)}}x.useEffect(()=>{m===p.edit&&(A(!0),$e())},[m]);const qe=async t=>{t.length>0&&J("",{name:"name",id:"nip",tabel:"users"})};x.useEffect(()=>{be("",{name:"unit_of_measurement_text",id:"id",tabel:"uoms"}),J("",{name:"name",id:"nip",tabel:"users"})},[]);const O=async(t,s)=>{const n=await v.get(ce,{params:{user:a.getValues("requester"),familyRelationship:s.type},headers:{"Content-Type":"application/json"}});K(i=>{const o=[...i];return o[t]=n.data.data,o})},Ve=async(t,s)=>{if(t&&t.length>0)try{const n=await v.get(ce,{params:{search:t,user:a.getValues("requester"),familyRelationship:a.getValues(`forms.${s}.type`)}});K(i=>{const o=[...i];return o[s]=n.data.data,o})}catch(n){console.error("Error searching reimburse types:",n)}},Z=async(t,s)=>{const n=await v.get(ss,{params:{user:a.getValues("requester"),familyRelationship:s.type,reimburseType:s.reimburse_type},headers:{"Content-Type":"application/json"}});V(i=>{const o=[...i];return o[t]=n.data.data,o})},H=async(t,s)=>{const n=await v.get(ts,{params:{user:a.getValues("requester"),familyRelationship:s.type,reimburseType:s.reimburse_type,reimbursePeriod:s.period},headers:{"Content-Type":"application/json"}});I(i=>{const o=[...i];return o[t]=n.data.data,o})};x.useEffect(()=>{for(let t=0;t<L.length;t++){const s=a.getValues("requester"),n=a.getValues(`forms.${t}.type`);(s||n)&&O(t,{type:n})}},[L.length,a.watch("forms")]);const Ie=()=>{for(let t=0;t<L.length;t++)a.setValue(`forms.${t}.reimburse_type`,""),a.setValue(`forms.${t}.period`,""),a.setValue(`forms.${t}.for`,""),E(s=>{const n=[...s];return n.splice(t,1),n}),V(s=>{const n=[...s];return n[t]=[],n}),I(s=>{const n=[...s];return n[t]=[],n})};function Ae(t){const s=[...a.getValues("forms")];for(let n=0;n<parseInt(t);n++)if(n+1>s.length){const i={reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:"",purchase_requisition_unit_of_measure:"",purchasing_group:"",period:"",type:"",item_delivery_data:new Date,start_date:new Date,end_date:new Date,attachment:[]};s.push(i)}a.setValue("forms",s)}const ke=t=>{ge(t)},Le=async t=>{var n;if(k)for(let i=0;i<k.length;i++)t.forms.length==0||t.forms.length-1,t.forms.reduce((o,r)=>o+parseInt(r.balance),0);const s=t.forms.reduce((i,o)=>i+parseInt(o.balance)||0,0);t.value=s,t.user_id=(t==null?void 0:t.requester)||"0";try{let i;m===p.edit?i=await v.put(je??"",t,{headers:{"Content-Type":"multipart/form-data"}}):i=await v.post(fe??"",t,{headers:{"Content-Type":"multipart/form-data"}}),q((n=i==null?void 0:i.data)==null?void 0:n.data,"success"),B()}catch(i){console.log(i)}};async function P(t,s=null){var o,r;const n=a.getValues(`forms.${t}`),i={user:a.getValues("requester"),periode:s!=null?s.period:n.period,reimbuse_type_id:s!=null?s.reimburse_type:n.reimburse_type};try{const l=await v.get("reimburse/data-limit-and-balance",{params:i});E(d=>{const h=[...d];return h[t]=l.data.data,h})}catch(l){console.log(l),q((r=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:r.message,"error")}}const Q=async()=>{var t,s,n,i,o,r,l,d,h,b,U,ee;try{const se=a.getValues("forms").reduce((z,Y)=>z+parseInt(Y.balance)||0,0);if(se===0){q("Please fill the balance","error");return}const T=await v.get("/check-approval",{params:{value:se,requester:a.getValues("requester"),type:"REIM"}});if(T.data.status_code===200){const z=(s=(t=T.data)==null?void 0:t.data)==null?void 0:s.approval.map(w=>(w==null?void 0:w.division_name)||null),Y=(i=(n=T.data)==null?void 0:n.data)==null?void 0:i.approval.map(w=>(w==null?void 0:w.name)||null),te=[];(r=(o=T.data)==null?void 0:o.data)!=null&&r.hr&&te.push((h=(d=(l=T.data)==null?void 0:l.data)==null?void 0:d.hr)==null?void 0:h.name);const Pe=(((b=T.data.data)==null?void 0:b.approval)??[]).map(w=>({status:"",name:w.name,dateApproved:""}));Ce({approvalRequest:z,approvalFrom:Y,acknowledgeFrom:te,approvalFromStatusRoute:Pe}),De(!0)}}catch(M){q((ee=(U=M==null?void 0:M.response)==null?void 0:U.data)==null?void 0:ee.message,"error")}};return x.useEffect(()=>{a.getValues("forms").reduce((n,i)=>n+parseInt(i.balance)||0,0)>0&&X===!0&&Q()},[a.watch("forms"),a.watch("requester")]),e.jsx(Xe,{className:"h-[600px] w-full",children:e.jsx(ls,{isLoading:Fe,children:e.jsx(ze,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(Le),children:[e.jsx("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Request Status"}),e.jsx("td",{children:y&&e.jsx(os,{name:y==null?void 0:y.name,className:y==null?void 0:y.classname,code:y==null?void 0:y.code})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:"remark_group",render:({field:t})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(ae,{placeholder:"Insert remark",...t})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Cost Center"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:"cost_center",render:({field:t})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:s=>t.onChange(s),value:t.value,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:pe.map(s=>e.jsx(C,{value:s.id.toString(),children:s.cost_center},s.id))})]})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Employee"}),e.jsx("td",{children:e.jsx(ne,{options:ye,fieldName:"requester",isRequired:!0,disabled:m===p.edit,placeholder:"Select Employee",onSearch:qe,onChangeOutside:()=>Ie(),classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Number of Forms"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:"formCount",render:({field:t})=>{var s;return e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:n=>{t.onChange(n),Ae(n)},value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"Select number of forms"})}),e.jsx(F,{children:Array.from({length:20},(n,i)=>i+1).map(n=>e.jsx(C,{value:n.toString(),children:n},n))})]})}),e.jsx(g,{})]})}})})]})]})}),e.jsx(oe,{className:"my-4"}),e.jsxs(Ze,{value:xe,onValueChange:ke,className:"w-full",children:[e.jsxs(He,{className:"flex items-center justify-start space-x-4",children:[" ",Array.from({length:a.watch("formCount")||1}).map((t,s)=>e.jsxs(Qe,{value:`form${s+1}`,children:["Form ",s+1]},s))]}),L.map((t,s)=>{var n,i;return e.jsxs(Ue,{value:`form${s+1}`,children:[e.jsx(u,{control:a.control,name:`forms.${s}.reimburseId`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(le,{className:"sr-only",value:t.reimburseId,onChange:o.onChange})}),e.jsx(g,{})]})}),e.jsx("div",{children:e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Type of Reimbursement "}),e.jsxs("td",{className:"flex items-center space-x-3",children:[e.jsx(u,{control:a.control,name:`forms.${s}.type`,render:({field:o})=>e.jsxs(S,{disabled:m===p.edit,onValueChange:r=>{_(s,{...t,type:String(r)}),a.setValue(`forms.${s}.reimburse_type`,""),a.setValue(`forms.${s}.period`,""),a.setValue(`forms.${s}.for`,""),E(l=>{const d=[...l];return d.splice(s,1),d}),V(l=>{const d=[...l];return d[s]=[],d}),I(l=>{const d=[...l];return d[s]=[],d})},defaultValue:t.type,children:[e.jsx(N,{children:e.jsx(D,{placeholder:"Select Family Relationship"})}),e.jsx(F,{children:me.map(r=>e.jsx(C,{value:r,children:r},r))})]})}),e.jsx(ne,{options:we[s],fieldName:`forms.${s}.reimburse_type`,isRequired:!0,disabled:a.getValues(`forms.${s}.type`)==""||a.getValues("requester")==""||m===p.edit,placeholder:"Select Reimburse Type",onChangeOutside:(o,r)=>{const l=a.getValues("requester"),d=a.getValues(`forms.${s}.type`);o!==(r==null?void 0:r.value)&&l!==""&&d!==""&&Ve(o,s),r!=null&&r.value?(_(s,{...t,reimburse_type:r==null?void 0:r.value}),Z(s,{type:a.getValues(`forms.${s}.type`),reimburse_type:r.value})):V(h=>{const b=[...h];return b[s]=[],b}),a.setValue(`forms.${s}.period`,""),a.setValue(`forms.${s}.for`,""),E(h=>{const b=[...h];return b.splice(s,1),b}),I(h=>{const b=[...h];return b[s]=[],b})},onFocus:()=>O(s,{type:a.getValues(`forms.${s}.type`)}),classNames:"mt-2 w-full"})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Purchasing Group"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.purchasing_group`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:r=>{_(s,{...t,purchasing_group:String(r)})},defaultValue:t.purchasing_group,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:G.map(r=>e.jsxs(C,{value:r.id.toString(),children:[r.purchasing_group_desc," -"," ",r.purchasing_group]},r.id))})]})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Period Date"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.period`,render:({field:o})=>{var r;return e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:a.getValues(`forms.${s}.reimburse_type`)==""||m===p.edit,onValueChange:l=>{_(s,{...t,period:l}),a.getValues(`forms.${s}.type`)=="Employee"?P(s):E(d=>{const h=[...d];return h.splice(s,1),h}),H(s,{type:a.getValues(`forms.${s}.type`),reimburse_type:a.getValues(`forms.${s}.reimburse_type`),period:l}),a.setValue(`forms.${s}.for`,"")},defaultValue:t.period,value:t.period,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:(r=ve[s])==null?void 0:r.map(l=>e.jsx(C,{value:l.value,children:l.label},l.value))})]})}),e.jsx(g,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Family "}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.for`,render:({field:o})=>{var r;return e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:a.getValues(`forms.${s}.type`)!=="Family"||m===p.edit,onValueChange:l=>{_(s,{...t,for:l}),a.getValues(`forms.${s}.type`)=="Family"&&P(s)},onValueChange:l=>{_(s,{...t,for:l}),a.getValues(`forms.${s}.type`)=="Family"&&P(s)},defaultValue:t==null?void 0:t.for,value:t.for,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:(r=Se[s])==null?void 0:r.map(l=>e.jsx(C,{value:l.value.toString(),children:l.label},l.value))})]})}),e.jsx(g,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Tax"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.tax_on_sales`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:r=>{_(s,{...t,tax_on_sales:r})},defaultValue:t.tax_on_sales,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:ue.map(r=>e.jsx(C,{value:r.id.toString(),children:r.mwszkz},r.id))})]})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Uom"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.purchase_requisition_unit_of_measure`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:r=>{_(s,{...t,purchase_requisition_unit_of_measure:String(r)})},defaultValue:t.purchase_requisition_unit_of_measure,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:(_e??[]).map((r,l)=>e.jsx(C,{value:r.value.toString(),children:r.label},r.value))})]})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.short_text`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(ae,{placeholder:"Insert remark",onChange:r=>{_(s,{...t,short_text:r.target.value})},defaultValue:t.short_text})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Sisa Balance"}),e.jsx("td",{children:e.jsx("span",{className:"font-bold",children:(n=k[s])==null?void 0:n.balance})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Sisa Limit"}),e.jsxs("td",{children:[e.jsx("span",{className:"font-bold",children:(i=k[s])==null?void 0:i.limit})," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Receipt Date"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.item_delivery_data`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(W,{disabled:m===p.edit,initialDate:o.value instanceof Date?o.value:new Date(o.value),onDateChange:r=>o.onChange(r)})}),e.jsx(g,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Claim date"}),e.jsxs("td",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"Start Date"}),e.jsx(u,{control:a.control,name:`forms.${s}.start_date`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(W,{disabled:m===p.edit,initialDate:o.value instanceof Date?o.value:new Date(o.value),onDateChange:r=>o.onChange(r)})}),e.jsx(g,{})]})}),e.jsx("span",{className:"mx-2",children:"End Date"}),e.jsx(u,{control:a.control,name:`forms.${s}.end_date`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(W,{disabled:m===p.edit,initialDate:o.value instanceof Date?o.value:new Date(o.value),onDateChange:r=>o.onChange(r)})}),e.jsx(g,{})]})})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Reimburse Cost"}),e.jsxs("td",{className:"w-full grid grid-cols-7 gap-x-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(u,{control:a.control,name:`forms.${s}.currency`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsxs(S,{disabled:m===p.edit,onValueChange:r=>{_(s,{...t,currency:r})},defaultValue:t.currency,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(D,{placeholder:"-"})}),e.jsx(F,{children:de.map(r=>e.jsxs(C,{value:r.code,children:[r.name," (",r.code,")"]},r.code))})]})}),e.jsx(Ye,{className:"h-6"}),e.jsx(g,{})]})})}),e.jsx("div",{className:"col-span-4",children:e.jsx(u,{control:a.control,name:`forms.${s}.balance`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(le,{type:"text",placeholder:"0",onChange:r=>{const l=r.target.value.replace(/[^0-9]/g,""),d=re(l,!1);_(s,{...t,balance:l}),r.target.value=d},defaultValue:re(t.balance,!1),disabled:m===p.edit})}),e.jsx(g,{})]})})})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"File Attachment"}),e.jsx("td",{children:e.jsx(u,{control:a.control,name:`forms.${s}.attachment`,render:({field:o})=>e.jsxs(j,{children:[e.jsx(We,{className:"text-xs text-gray-500 font-extralight mb-1",children:"Max File: 1000KB"}),e.jsx(f,{children:e.jsx("input",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-xs shadow-sm transition-colors file:border-0 file:bg-transparent file:text-xs file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",type:"file",multiple:!0,onChange:r=>{const l=r.target.files;if(l){const d=[...t.attachment],h=Array.from(l);d.push(...h),_(s,{...t,attachment:d})}}})})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"File Extension"}),e.jsx("td",{className:"text-gray-500 text-xs font-extralight",children:"doc,jpg,ods,png,txt,pdf"})]})]})})})]},s)})]}),e.jsx(ns,{onClick:async()=>await Q(),variant:"contained",color:"primary",type:"button",children:"Check Approval"}),e.jsx("div",{className:"my-2",children:X&&e.jsx(as,{workflowApproval:{approvalRequest:$.approvalRequest,approvalFrom:$.approvalFrom,acknowledgeFrom:$.acknowledgeFrom},workflowApprovalStep:$.approvalFromStatusRoute,workflowApprovalDiagram:$.approvalFrom})}),e.jsx(oe,{className:"my-4"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(Ge,{type:"submit",className:"w-32",children:"Save"})})]})})})})};export{at as ReimburseForm};
