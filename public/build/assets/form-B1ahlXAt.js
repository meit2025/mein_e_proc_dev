import{r as g,j as e}from"./app-BG3h5D-x.js";import{F as A,a as d,b as h,c as x,d as j}from"./form-DylnEVeu.js";import{z as m,t as V}from"./index-BeZ-WWUs.js";import{B as $,F as D}from"./button-h3rcSfTx.js";import{u as M,b as R}from"./index.esm-DVgkS5Ug.js";import{S as P}from"./scroll-area-BjoQkqDJ.js";import{S as L}from"./separator--GqJWjGJ.js";import{T as q,a as B,b as O,c as z}from"./tabs-DeYa1yQA.js";import{S as p,a as y,b as F,c as b,d as u}from"./select-C_Xa96Qi.js";import{C as G}from"./CustomDatePicker-CgIRegT4.js";import{I as H}from"./input-BvD-tuxS.js";import{a as W}from"./axiosInstance-cs0KEvWg.js";const T="/api/master/family",me=`${T}/list`,Y=`${T}/create`,k=({onSuccess:r,type:i=D.create,id:n,user:s})=>{const a=m.object({user:m.string().min(1,"Choose Employee is Required"),total_family:m.number().min(1,"Total Family is Required"),families:m.array(m.object({status:m.string().min(1,"Type Family is Must Choose"),bod:m.date(),name:m.string().min(1,"Name Family is Required")}))}),[f,_]=g.useState("1"),N=async l=>{try{const t=await W.post(Y,l);r==null||r(!0),C(t.message,"success")}catch(t){r==null||r(!1),C(t.message)}},o=M({resolver:V(a),defaultValues:{user:"",total_family:1,families:[{status:"",bod:new Date,name:""}]}}),S=l=>{_(l)};function I(){let l=[],t=parseInt(f);for(let c=0;c<t;c++)l.push({family:""});o.setValue("families",l)}const{fields:E,append:J,remove:U,update:K}=R({control:o.control,name:"families"});return g.useEffect(()=>{I()},[f,n,i]),e.jsx(P,{className:"h-[600px] w-full ",children:e.jsx(A,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N),children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Employee Name"}),e.jsx("td",{children:e.jsx(d,{control:o.control,name:"user",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(p,{onValueChange:t=>l.onChange(t),value:l.value,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:s.map(t=>e.jsx(u,{value:t.nip,children:t.name},t.nip))})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Total Destination"}),e.jsxs("td",{children:[" ",e.jsx(d,{control:o.control,name:"total_family",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(p,{value:f,onValueChange:S,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:Array.from({length:5},(t,c)=>e.jsxs(u,{value:(c+1).toString(),children:[" ",c+1," "]}))})]})}),e.jsx(j,{})]})})]})]})]}),e.jsx(L,{className:"my-4"}),e.jsx(v,{form:o,familyField:E,totalFamily:o.getValues("total_family").toString()}),e.jsx($,{type:"submit",children:"submit"})]})})})};function v({form:r,familyField:i,totalFamily:n}){return e.jsxs(q,{defaultValue:"family1",className:"w-full",children:[e.jsx(B,{className:"flex items-center justify-start space-x-4",children:i.map((s,a)=>e.jsxs(O,{value:`family${a+1}`,children:["Member - ",a+1]}))}),i.map((s,a)=>e.jsx(w,{form:r,index:a}))]})}function w({family:r,form:i,index:n}){return e.jsx(z,{value:`family${n+1}`,children:e.jsx("div",{children:e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.name`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(H,{type:"text",placeholder:"John Doe",...s,value:s.value||"",onChange:a=>s.onChange(a.target.value)})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Family Type"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.status`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(p,{onValueChange:a=>s.onChange(a),value:s.value,children:[e.jsx(y,{className:"w-[200px]",children:e.jsx(F,{placeholder:"Child / Wife"})}),e.jsxs(b,{children:[e.jsx(u,{value:"wife",children:"Wife"}),e.jsx(u,{value:"child",children:"Child"})]})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Birth of Date"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${n}.bod`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(G,{onDateChange:a=>s.onChange(a)})}),e.jsx(j,{})]})})})]})]})},n)})}function C(r,i){throw new Error("Function not implemented.")}const ce=Object.freeze(Object.defineProperty({__proto__:null,FamilyForm:w,FamilyHeaderForm:k,TabFamily:v},Symbol.toStringTag,{value:"Module"}));export{k as F,me as G,ce as f};
