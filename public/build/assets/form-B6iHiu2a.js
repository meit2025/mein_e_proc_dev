import{u as y,r as N,j as e}from"./app-CQ2aiylx.js";import{F as T,a as i,b as c,c as d,d as m}from"./form-D9Vr9cxp.js";import{z as r,t as I}from"./index-ra3FZaKs.js";import{B as A}from"./button-DEx33Jq2.js";import{u as B}from"./index.esm-CltPHXkx.js";import{S as V}from"./scroll-area-CCtw7psW.js";import{S as _,a as q,b as E,c as M,d as D}from"./select-BJKbbujj.js";import{I as u}from"./input-Cs6cZFBJ.js";import{a as x}from"./axiosInstance-sDfLDK5b.js";import{F as l}from"./utils-BPloTyAf.js";import{M as P}from"./MultiSelect-CwUJsHJb.js";import"./app-HlhieNAw.js";import"./index-Bp5wxuSu.js";import"./index-DRFDOVYu.js";import"./index-BgkTw4mN.js";import"./index-Dv_oQS76.js";import"./Combination-DL1PAZVA.js";import"./index-DJ7wVnR-.js";import"./index-DrcnNK6r.js";import"./index-HTzrXKda.js";import"./index-BEj2xO-S.js";import"./checkbox-Bhu5rxXg.js";function le({onSuccess:n,type:o=l.create,editUrl:j,detailUrl:f,createUrl:g,id:k,listAllowanceModel:w}){const b=r.object({code:r.string().min(1,"Code is required"),name:r.string().min(1,"Name is required"),all:r.boolean().optional(),allowances:r.array(r.number()).optional(),attedance_status:r.string().min(1,"Attedance Status is required")}),v={code:"",name:"",all:!1,allowances:[],attedance_status:""};async function C(){try{const t=await x.get(f??""),a=t.data.data.purpose,p=t.data.data.allowances;console.log("allowances",p),s.reset({code:a.code,name:a.name,attedance_status:a.attedance_status,allowances:p.map(S=>parseInt(S))})}catch{}}const s=B({resolver:I(b),defaultValues:v}),{showToast:h}=y(),F=async t=>{console.log(t);try{let a=null;o===l.edit?a=await x.put(j??"",t):a=await x.post(g??"",t),console.log(a,"response"),h("success","success"),n==null||n(!0)}catch{n==null||n(!1),h("Please Check the input","error")}};return N.useEffect(()=>{(o===l.detail||o===l.edit)&&C()},[o]),e.jsx(V,{className:"h-[600px] w-full",children:e.jsx(T,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(F),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:"code",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(u,{type:"text",readOnly:o===l.edit,placeholder:"Insert code",...t,value:t.value||"",onChange:a=>t.onChange(a.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:"name",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(u,{type:"text",...t,value:t.value||"",onChange:a=>t.onChange(a.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Allowances ",s.getValues("allowances").length]}),e.jsx("td",{children:e.jsx(P,{value:s.getValues("allowances"),id:"id",label:"name",options:w,onSelect:t=>{s.setValue("allowances",t.map(a=>a.id))}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Attendance Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:"attedance_status",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(_,{onValueChange:a=>t.onChange(a),value:t.value,children:[e.jsx(q,{className:"w-[200px]",children:e.jsx(E,{placeholder:"Select Attedance status"})}),e.jsx(M,{children:e.jsx(D,{value:"Business Trip",children:"Business Trip (BST)"},"BST")})]})}),e.jsx(m,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(A,{type:"submit",children:"Save"})})]})})})}export{le as default};
