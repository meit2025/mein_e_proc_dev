import{u as E,r as V,j as e}from"./app-Cb2oamnU.js";import{z as c,F as A,a as d,b as l,d as n,I as C,e as i,c as m,t as T}from"./index-BN_Ab7QF.js";import{B as R}from"./button-CKrd7t9w.js";import{u as S}from"./index.esm-zFM_5yl5.js";import{T as L}from"./textarea-CSwIDs0C.js";import{S as y}from"./scroll-area-_RIRf8hW.js";import{S as j,a as u,b as p,c as g,d as o}from"./select-D-U0y1eI.js";import{a as _}from"./axiosInstance-D0Te2Jf0.js";import{a as D}from"./api-CEASqZ9H.js";import{R as G,a as f}from"./radio-group-BtLIPNAh.js";import{C as M}from"./api-DCFLeO7i.js";/* empty css            */import"./index-Rceo1BZV.js";import"./react-icons.esm-ChX6dsEA.js";import"./Combination-CZVdyK6f.js";import"./index-DmDQ4vLQ.js";import"./index-DzgaVJtO.js";import"./index-DIgXl4Q3.js";var O=(a=>(a[a.create=0]="create",a[a.edit=1]="edit",a[a.update=2]="update",a))(O||{});function te({onSuccess:a,type:x=0,id:h,listCurrency:N,listAllowanceCategory:w}){var F=c.object({code:c.string().min(1,"Code is required"),name:c.string().min(1,"Name is required"),type:c.string().min(1,"Type is required"),currency_id:c.string().min(1,"Currency is required"),formula:c.string().min(1,"Formula is required"),allowance_category_id:c.string().min(1,"Allowance Category is required"),request_value:c.string().min(1,"Required")});let b={code:"",name:"",type:"",currency_id:"",fixed_value:"",max_value:"",request_value:"unlimited",formula:"",allowance_category_id:""};async function I(){let r=D(h);try{let s=await _.get(r);t.reset({code:s.data.data.code,name:s.data.data.name})}catch{}}const t=S({resolver:T(F),defaultValues:b}),{showToast:v}=E(),q=async r=>{console.log(r);try{const s=await _.post(M,r);console.log("response",s),v("success","success"),a==null||a(!0)}catch{a==null||a(!1),v("Please Check the input","error")}};return V.useEffect(()=>{h&&x==1&&I()},[h,x]),e.jsx(y,{className:"h-[600px] w-full",children:e.jsx(A,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(d,{control:t.control,disabled:x==1,name:"code",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(C,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(C,{type:"text",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select type"})}),e.jsxs(g,{children:[e.jsx(o,{value:"Day",children:"Day"},"day"),e.jsx(o,{value:"total",children:"Total"},"total")]})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"currency_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select Currency"})}),e.jsx(g,{children:N.map(s=>e.jsxs(o,{value:s.code,children:[s.name," ",s.code]},s.code))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"allowance_category_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select Allowance Category"})}),e.jsx(g,{children:w.map(s=>e.jsx(o,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{children:e.jsx(y,{className:"h-[250px] border rounded-lg p-6 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Formula"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"formula",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(L,{placeholder:"Insert formula",...r})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(d,{control:t.control,name:"request_value",render:({field:r})=>e.jsx(l,{children:e.jsx(n,{children:e.jsxs(G,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(l,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(f,{value:"unlimited"})}),e.jsx(m,{className:"text-xs",children:"Unlimited"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(f,{value:"up to max value"})}),e.jsx(m,{className:"text-xs",children:"Up To Max Value"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(f,{value:"fixed value"})}),e.jsx(m,{className:"text-xs",children:"Fixed Value"})]})]})})})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(R,{type:"submit",children:"Save"})})]})})})}export{O as AllowanceType,te as default};
