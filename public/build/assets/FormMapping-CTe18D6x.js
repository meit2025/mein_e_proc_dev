import{u as E,r as F,j as r,a as u}from"./app-OCxfqGpa.js";import{F as v}from"./FormWrapper-CtEMoWOc.js";import{F as L}from"./index.esm-b6E6vmCw.js";import{l as w}from"./axiosInstance-CJuOVE_4.js";import{L as S}from"./Loading-DhfAX2zo.js";const C=({formModel:x,url:f,redirectUrl:j,methods:o,onSave:t,isLoading:b})=>{const{setError:g}=o,{showToast:i}=E(),[h,n]=F.useState(!1),y=async a=>{var e,m,p,c;n(!0);try{const s=await w.post(f,a,{headers:{"Content-Type":"application/json"}});i(s.data.message,"success"),t&&await t(s),j&&setTimeout(()=>{},2e3)}catch(s){if(u.isAxiosError(s)&&((m=(e=s.response)==null?void 0:e.data)!=null&&m.message)&&i(s.response.data.message,"error"),u.isAxiosError(s)&&((c=(p=s.response)==null?void 0:p.data)!=null&&c.errors)){const d=s.response.data.errors;Object.keys(d).forEach(l=>{g(l,{type:"server",message:d[l].join(", ")})})}}n(!1)};return r.jsxs(L,{...o,children:[r.jsx(S,{isLoading:b||h}),r.jsxs("form",{onSubmit:o.handleSubmit(y),children:[x.map((a,e)=>r.jsx("div",{className:"mt-8",children:r.jsx(v,{model:a})},e)),r.jsx("div",{className:"flex justify-end mt-8",children:r.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{C as F};
