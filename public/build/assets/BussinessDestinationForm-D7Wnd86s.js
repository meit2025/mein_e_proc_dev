<<<<<<<< HEAD:public/build/assets/BussinessDestinationForm-Cm_6tHcr.js
import{u as V,r as W,j as e}from"./app-Dl3mC2VQ.js";import{F as j,a as b,b as x,c as g}from"./form-C3rNqZJn.js";import{B as X}from"./button-DvWjSDuF.js";import{b as O}from"./index.esm-DQyYzcJ5.js";/* empty css              */import{c as Z}from"./tabs-BA2lUA0H.js";import{C as E}from"./CustomDatePicker-BDCX02Se.js";import{h as m}from"./moment-C5S46NFB.js";import{F as w}from"./formDropdown-DwV7n27L.js";import{DetailAttedances as ee}from"./DetailAttedances-DFtS8wdT.js";import{DetailAllowance as te}from"./DetailAllowance-D7kRbmqH.js";import{ResultTotalItem as se}from"./ResultTotalItem-DmVg3ZIf.js";import{C as re}from"./checkbox-BNY3rd-Q.js";import"./app-DQK4SJPx.js";import"./index-vCZuq4nY.js";import"./utils-DhHKPClG.js";import"./index-FOOVUSD-.js";import"./index-wQw_gT54.js";import"./index-Bb4qSo10.js";import"./createLucideIcon-DU8iTkJL.js";import"./index-DPl2CAmI.js";import"./index-BgZA09Rg.js";import"./index-BisTcY-j.js";import"./index-C-gYGA-n.js";import"./index-C-C0eISU.js";import"./index-fC5b9XiY.js";import"./index-AgfJ5WpX.js";import"./Combination-BG7CjZ90.js";import"./TextField-BFqE-WSt.js";import"./createSvgIcon-e8Lezc54.js";import"./DefaultPropsProvider-DmX-u4Jb.js";import"./useSlot-Cxb5Pnsq.js";import"./createSimplePaletteValueFilter-CFhIEkjX.js";import"./useControlled-Cc7NQiIc.js";import"./FormHelperText-SwEYEvkd.js";import"./input-qJi7gJyj.js";import"./select-D_l8_Usr.js";import"./index-BdQq_4o_.js";import"./index-BY9oDFrn.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./chevrons-up-down-C9ocOkRm.js";function Ue({key:I,form:c,index:s,destination:a,updateDestination:d,listAllowances:$,setTotalAllowance:q,pajak:ae,purchasingGroup:le,dataTax:B,dataPurchasingGroup:T,dataDestination:G,type:A,btClone:C,setSelectedDates:_,selectedDates:v,dateBusinessTripByUser:h}){const{fields:L,update:P,append:H,remove:M}=O({control:c.control,name:`destinations.${s}.detail_attedances`}),{fields:F,update:oe,append:ie,remove:Y,replace:z}=O({control:c.control,name:`destinations.${s}.allowances`}),{showToast:N}=V();function J(){let t=m(a.business_trip_start_date).startOf("day"),r=m(a.business_trip_end_date).startOf("day");if(M(),Y(),t.isAfter(r)){N("Start date must be before end date","error");return}let i=!1;for(let o in h){let n=m(h[o].from).startOf("day"),p=m(h[o].to).startOf("day");if(t.isBetween(n,p,null,"[)")||r.isBetween(n,p,null,"(]")||t.isBefore(n)&&r.isAfter(p)){i=!0;break}}if(i){N("Your Selected Range is Unavailable. Please Select Other Days","error");return}for(;t.isBefore(r)||t.isSame(r);){const o={date:t.toDate(),shift_code:"REGULERSHIFT",shift_start:"08:00",shift_end:"17:00",end_time:"17:00",start_time:"08:00",start_date:t.toDate(),end_date:t.toDate()};H(o),t=t.add(1,"days")}function l(o){let n=m(a.business_trip_start_date).startOf("day"),p=m(a.business_trip_end_date).startOf("day"),D=[];for(;n.isBefore(p)||n.isSame(p);)D.push({date:n.toDate(),request_price:o}),n=n.add(1,"days");return D}const U=$.map(o=>({name:o.name,code:o.code,default_price:parseInt(o.grade_price),type:o.type,subtotal:parseInt(o.grade_price),currency:o.currency_id,request_value:o.request_value,detail:o.type.toLowerCase()=="total"?[{date:null,request_price:parseInt(o.grade_price)}]:l(o.grade_price)}));z(U)}const k=(t,r)=>{d(r,{...a,business_trip_start_date:t}),_(i=>{const l=[...i];return l[r]={...l[r],from:t},l})},y=(t,r)=>{d(r,{...a,business_trip_end_date:t}),_(i=>{const l=[...i];return l[r]={...l[r],to:t},l})},[R,u]=W.useState(),f={};R&&(f.selected=R);const S=(t,r)=>{r==="start"&&(d(t,{...a,business_trip_start_date:null}),_(i=>{const l=[...i];return l[t]={...l[t],from:void 0},l})),r==="end"&&(d(t,{...a,business_trip_end_date:null}),_(i=>{const l=[...i];return l[t]={...l[t],to:void 0},l})),u(void 0)};let K=e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>S(s,"start"),children:"Reset"})}),Q=e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>S(s,"end"),children:"Reset"})});return e.jsxs(Z,{value:`destination${s+1}`,children:[e.jsxs("div",{children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Destination",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:G,fieldName:`destinations.${s}.destination`,isRequired:!0,disabled:!1,placeholder:"Select Destination",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,destination:t})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200}),e.jsxs("td",{className:"flex gap-2",children:[e.jsx(j,{control:c.control,name:`destinations.${s}.restricted_area`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(re,{checked:a.restricted_area,onCheckedChange:r=>{d(s,{...a,restricted_area:r})}})}),e.jsx(g,{})]})}),"Restricted Area"]})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Tax",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:B,fieldName:`destinations.${s}.pajak_id`,isRequired:!0,disabled:!1,placeholder:"Select Tax",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,pajak_id:t})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Purchasing Group",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:T,fieldName:`destinations.${s}.purchasing_group_id`,isRequired:!0,disabled:!1,placeholder:"Select Purchasing Group",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,purchasing_group_id:t})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Bussines Trip Date",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("td",{className:"flex space-x-2 items-center",children:[e.jsx(j,{control:c.control,name:`destinations.${s}.business_trip_start_date`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(E,{initialDate:a.business_trip_start_date,modifiers:f,onDayClick:(r,i)=>{i.selected?(k(void 0,s),u(void 0),d(s,{...a,business_trip_start_date:void 0,business_trip_end_date:void 0})):(k(r,s),u(r),d(s,{...a,business_trip_start_date:r,business_trip_end_date:r}))},disabledDays:v,footer:K})}),e.jsx(g,{})]})}),e.jsx("span",{children:"To"}),e.jsx(j,{control:c.control,name:`destinations.${s}.business_trip_end_date`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(E,{initialDate:a.business_trip_end_date,modifiers:f,onDayClick:(r,i)=>{i.selected?(y(void 0,s),u(void 0),d(s,{...a,business_trip_end_date:void 0})):(y(r,s),u(r),d(s,{...a,business_trip_end_date:r}))},disabled:!1,disabledDays:v,footer:Q})}),e.jsx(g,{})]})}),e.jsx(X,{type:"button",onClick:()=>J(),children:"Get Detail"})]})]})]}),e.jsx(ee,{detailAttedanceFields:L,form:c,updateAttedanceFields:P,destinationIndex:s,type:A,btClone:C}),e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm",children:"Detail Bussines Trip Allowance:"}),e.jsx("td",{})]})}),e.jsx(te,{allowanceField:F,destinationIndex:s,form:c,type:A,btClone:C})]},s),e.jsx(se,{allowanceField:F,destinationIndex:s,form:c,setTotalAllowance:q})]},I)}export{Ue as BussinessDestinationForm};
========
import{u as V,r as W,j as e}from"./app-CRZSyU7y.js";import{F as j,a as b,b as x,c as g}from"./form-Cpcpwa9p.js";import{B as X}from"./button-DIWgCCtO.js";import{b as O}from"./index.esm-CmEQgvbl.js";/* empty css              */import{c as Z}from"./tabs-CImoMocM.js";import{C as E}from"./CustomDatePicker-7Hi2ldBi.js";import{h as m}from"./moment-C5S46NFB.js";import{F as w}from"./formDropdown-BRFdgYkT.js";import{DetailAttedances as ee}from"./DetailAttedances-CYKPeZ53.js";import{DetailAllowance as te}from"./DetailAllowance-CQFyuopQ.js";import{ResultTotalItem as se}from"./ResultTotalItem-JGeFtwYj.js";import{C as re}from"./checkbox-DbQvlGbN.js";import"./app-DQK4SJPx.js";import"./index-Dd4o1y-Z.js";import"./utils-8lrDxaQM.js";import"./index-Clv_3-XD.js";import"./index-Bomi0j5T.js";import"./index-Bb4qSo10.js";import"./createLucideIcon-CNdOLqRo.js";import"./index-CkkkpsvQ.js";import"./index-Dc75ia_V.js";import"./index-BkKEgsbh.js";import"./index-GUl_rCOr.js";import"./index-vo1TCWAI.js";import"./index-DzpDBeeT.js";import"./index-CnB6ciUC.js";import"./Combination-DWkLk8jZ.js";import"./TextField-D5whLUx_.js";import"./createSvgIcon-7cwlEyJr.js";import"./DefaultPropsProvider-Cf9ryZQF.js";import"./useSlot-Cz291cwn.js";import"./createSimplePaletteValueFilter-Ccif3jxE.js";import"./useControlled-CPZXaFEv.js";import"./FormHelperText-BUq2KpHE.js";import"./input-D8-WBRDB.js";import"./select-BB2tkCWj.js";import"./index-BdQq_4o_.js";import"./index-DfS4g21c.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./chevrons-up-down-CjJRb-2M.js";function Ue({key:I,form:c,index:s,destination:a,updateDestination:d,listAllowances:$,setTotalAllowance:q,pajak:ae,purchasingGroup:le,dataTax:B,dataPurchasingGroup:T,dataDestination:G,type:A,btClone:C,setSelectedDates:_,selectedDates:v,dateBusinessTripByUser:h}){const{fields:L,update:P,append:H,remove:M}=O({control:c.control,name:`destinations.${s}.detail_attedances`}),{fields:F,update:oe,append:ie,remove:Y,replace:z}=O({control:c.control,name:`destinations.${s}.allowances`}),{showToast:N}=V();function J(){let t=m(a.business_trip_start_date).startOf("day"),r=m(a.business_trip_end_date).startOf("day");if(M(),Y(),t.isAfter(r)){N("Start date must be before end date","error");return}let i=!1;for(let o in h){let n=m(h[o].from).startOf("day"),p=m(h[o].to).startOf("day");if(t.isBetween(n,p,null,"[)")||r.isBetween(n,p,null,"(]")||t.isBefore(n)&&r.isAfter(p)){i=!0;break}}if(i){N("Your Selected Range is Unavailable. Please Select Other Days","error");return}for(;t.isBefore(r)||t.isSame(r);){const o={date:t.toDate(),shift_code:"REGULERSHIFT",shift_start:"08:00",shift_end:"17:00",end_time:"17:00",start_time:"08:00",start_date:t.toDate(),end_date:t.toDate()};H(o),t=t.add(1,"days")}function l(o){let n=m(a.business_trip_start_date).startOf("day"),p=m(a.business_trip_end_date).startOf("day"),D=[];for(;n.isBefore(p)||n.isSame(p);)D.push({date:n.toDate(),request_price:o}),n=n.add(1,"days");return D}const U=$.map(o=>({name:o.name,code:o.code,default_price:parseInt(o.grade_price),type:o.type,subtotal:parseInt(o.grade_price),currency:o.currency_id,request_value:o.request_value,detail:o.type.toLowerCase()=="total"?[{date:null,request_price:parseInt(o.grade_price)}]:l(o.grade_price)}));z(U)}const k=(t,r)=>{d(r,{...a,business_trip_start_date:t}),_(i=>{const l=[...i];return l[r]={...l[r],from:t},l})},y=(t,r)=>{d(r,{...a,business_trip_end_date:t}),_(i=>{const l=[...i];return l[r]={...l[r],to:t},l})},[R,u]=W.useState(),f={};R&&(f.selected=R);const S=(t,r)=>{r==="start"&&(d(t,{...a,business_trip_start_date:null}),_(i=>{const l=[...i];return l[t]={...l[t],from:void 0},l})),r==="end"&&(d(t,{...a,business_trip_end_date:null}),_(i=>{const l=[...i];return l[t]={...l[t],to:void 0},l})),u(void 0)};let K=e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>S(s,"start"),children:"Reset"})}),Q=e.jsx(e.Fragment,{children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>S(s,"end"),children:"Reset"})});return e.jsxs(Z,{value:`destination${s+1}`,children:[e.jsxs("div",{children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Destination",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:G,fieldName:`destinations.${s}.destination`,isRequired:!0,disabled:!1,placeholder:"Select Destination",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,destination:t})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200}),e.jsxs("td",{className:"flex gap-2",children:[e.jsx(j,{control:c.control,name:`destinations.${s}.restricted_area`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(re,{checked:a.restricted_area,onCheckedChange:r=>{d(s,{...a,restricted_area:r})}})}),e.jsx(g,{})]})}),"Restricted Area"]})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Tax",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:B,fieldName:`destinations.${s}.pajak_id`,isRequired:!0,disabled:!1,placeholder:"Select Tax",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,pajak_id:t})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Purchasing Group",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("td",{children:e.jsx(w,{fieldLabel:"",options:T,fieldName:`destinations.${s}.purchasing_group_id`,isRequired:!0,disabled:!1,placeholder:"Select Purchasing Group",classNames:"mt-2 w-full",onChangeOutside:t=>{d(s,{...a,purchasing_group_id:t})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Bussines Trip Date",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("td",{className:"flex space-x-2 items-center",children:[e.jsx(j,{control:c.control,name:`destinations.${s}.business_trip_start_date`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(E,{initialDate:a.business_trip_start_date,modifiers:f,onDayClick:(r,i)=>{i.selected?(k(void 0,s),u(void 0),d(s,{...a,business_trip_start_date:void 0,business_trip_end_date:void 0})):(k(r,s),u(r),d(s,{...a,business_trip_start_date:r,business_trip_end_date:r}))},disabledDays:v,footer:K})}),e.jsx(g,{})]})}),e.jsx("span",{children:"To"}),e.jsx(j,{control:c.control,name:`destinations.${s}.business_trip_end_date`,render:({field:t})=>e.jsxs(b,{children:[e.jsx(x,{children:e.jsx(E,{initialDate:a.business_trip_end_date,modifiers:f,onDayClick:(r,i)=>{i.selected?(y(void 0,s),u(void 0),d(s,{...a,business_trip_end_date:void 0})):(y(r,s),u(r),d(s,{...a,business_trip_end_date:r}))},disabled:!1,disabledDays:v,footer:Q})}),e.jsx(g,{})]})}),e.jsx(X,{type:"button",onClick:()=>J(),children:"Get Detail"})]})]})]}),e.jsx(ee,{detailAttedanceFields:L,form:c,updateAttedanceFields:P,destinationIndex:s,type:A,btClone:C}),e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm",children:"Detail Bussines Trip Allowance:"}),e.jsx("td",{})]})}),e.jsx(te,{allowanceField:F,destinationIndex:s,form:c,type:A,btClone:C})]},s),e.jsx(se,{allowanceField:F,destinationIndex:s,form:c,setTotalAllowance:q})]},I)}export{Ue as BussinessDestinationForm};
>>>>>>>> 0f7230853e2892350d74393568329de8e68d7f73:public/build/assets/BussinessDestinationForm-D7Wnd86s.js
