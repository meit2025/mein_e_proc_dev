import{r as k,j as e}from"./app-DTyNljQa.js";import{z as a,t as q,F as D,b as d,d as c,f as o,g as i,I as T,B as $}from"./index-CGHzmv78.js";import{d as V}from"./index-l8ZlXvBA.js";import{u as I}from"./index.esm-mJ-ikuqG.js";import{S as A,j as f,a as m,b as h,c as x,d as j,e as u,f as E,T as B,g as P,h as L,i as z,C as p}from"./CustomDatePicker-C4UpTK_F.js";/* empty css            */const J=({users:g,types:b,currencies:w,periods:C,csrf_token:y})=>{const[N,S]=k.useState(1),v=a.object({remark_group:a.string().nonempty("Remark is required"),requester:a.string().nonempty("Requester is required"),forms:a.array(a.object({type:a.string().nonempty("Type is required"),period:a.string().nonempty("Period is required"),remark:a.string().nonempty("Remark is required"),balance:a.number().min(1,"Balance must be at least 1"),receipt_date:a.date(),start_date:a.date(),end_date:a.date(),currency:a.string().nonempty("Currency is required")})),formCount:a.string().nonempty("Currency is required")}),n=I({resolver:q(v),defaultValues:{formCount:"1",remark_group:"",requester:"",forms:Array.from({length:1}).map(()=>({type:"",remark:"",period:"",balance:0,receipt_date:new Date,start_date:new Date,end_date:new Date,currency:"IDR"}))}}),_=l=>{V.Inertia.post("/reimburse",l,{headers:{"X-CSRF-TOKEN":y}})},R=l=>{S(l);const r=n.getValues("forms"),t=Array.from({length:l}).map((s,F)=>r[F]||{type:"",remark:"",period:"",balance:0,receipt_date:new Date,start_date:new Date,end_date:new Date,currency:"IDR"});n.setValue("forms",t),n.setValue("formCount",l)};return e.jsx(A,{className:"h-[600px] w-full ",children:e.jsx(D,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(_),children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Reimburse Request No."}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Status"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Remark"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:"remark_group",render:({field:l})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(f,{placeholder:"Insert remark",...l})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Employee"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:"requester",render:({field:l})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(m,{onValueChange:r=>l.onChange(r),value:l.value,children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"Requester"})}),e.jsx(j,{children:g.map(r=>e.jsxs(u,{value:r.nip,children:[r.name," (",r.nip,")"]},r.id))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Number of Forms"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:"formCount",render:({field:l})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(m,{onValueChange:r=>R(r),value:N,children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"Select number of forms"})}),e.jsx(j,{children:Array.from({length:20},(r,t)=>t+1).map(r=>e.jsx(u,{value:r.toString(),children:r},r))})]})}),e.jsx(i,{})]})})})]})]}),e.jsx(E,{className:"my-4"}),Array.from({length:n.watch("formCount")||1}).map((l,r)=>e.jsxs(B,{defaultValue:`form${r+1}`,className:"w-full",children:[e.jsx(P,{className:"grid w-full grid-cols-2",children:e.jsxs(L,{value:`form${r+1}`,children:["Form ",r+1]})}),e.jsx(z,{value:`form${r+1}`,children:e.jsx("div",{children:e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type of Reimbursment"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:`forms.${r}.type`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(m,{onValueChange:s=>t.onChange(s),value:t.value,children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:b.map(s=>e.jsxs(u,{value:s.code,children:[s.name," (",s.code,")"]},s.code))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period Date"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:`forms.${r}.period`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(m,{onValueChange:s=>t.onChange(s),value:t.value,children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:C.map(s=>e.jsxs(u,{value:s.code,children:[s.start," - ",s.end]},s.id))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Remark"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:`forms.${r}.remark`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(f,{placeholder:"Insert remark",...t})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Balance"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Limit per claim"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Receipt Date"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:`forms.${r}.receipt_date`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(p,{})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Claim date"}),e.jsxs("td",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"Start Date"}),e.jsx(d,{control:n.control,name:`forms.${r}.start_date`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(p,{})}),e.jsx(i,{})]})}),e.jsx("span",{className:"mx-2",children:"End Date"}),e.jsx(d,{control:n.control,name:`forms.${r}.end_date`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(p,{})}),e.jsx(i,{})]})})]})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Reimburse Cost"}),e.jsxs("td",{className:"flex items-center space-x-3",children:[e.jsx(d,{control:n.control,name:`forms.${r}.currency`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsxs(m,{children:[e.jsx(h,{className:"w-[100px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(j,{children:w.map(s=>e.jsx(u,{value:s.code,children:s.code},s.code))})]})}),e.jsx(i,{})]})}),e.jsx(d,{control:n.control,name:`forms.${r}.balance`,render:({field:t})=>e.jsxs(c,{children:[e.jsx(o,{children:e.jsx(T,{type:"number",placeholder:"0.0",...t,onChange:s=>t.onChange(Number(s.target.value)),value:t.value||0})}),e.jsx(i,{})]})})]})]})]})})})]},r)),e.jsx($,{type:"submit",children:"Save"})]})})})};export{J as ReimburseForm};
