import{X as j,u as N,r as d,j as e,x as y}from"./app-Bycr8tKQ.js";import{L as v}from"./logo-HtzTG1e0.js";import{a as f}from"./axiosInstance-Co6017u2.js";import{L as w}from"./Loading-DvQru5k0.js";import"./app-ffJwujpg.js";import"./index-Bc8xMsYM.js";const k=t=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center border rounded-full size-8 bg-success-light border-success-clarity",children:e.jsx("i",{className:`ki-filled ${t.is_read?" ki-check text-success":"ki-information-1 text-warning"}  text-lg `})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"mb-px font-medium text-2sm",children:e.jsx(y,{className:"font-semibold text-gray-900 hover:text-primary-active",href:t.url_redirect,children:t.message})}),e.jsx("span",{className:"flex items-center font-medium text-gray-500 text-2xs",children:_(t.created_at)})]})]}),_=t=>{const n=new Date,o=new Date(t),i=Math.floor((n.getTime()-o.getTime())/1e3);let s=Math.floor(i/31536e3);return s>1?`${s} years ago`:(s=Math.floor(i/2592e3),s>1?`${s} months ago`:(s=Math.floor(i/86400),s>1?`${s} days ago`:(s=Math.floor(i/3600),s>1?`${s} hours ago`:(s=Math.floor(i/60),s>1?`${s} minutes ago`:`${i} seconds ago`))))};function D(){var m,x;const{auth:t}=j().props,{showToast:n}=N(),[o,i]=d.useState([]),[s,g]=d.useState(!1),[h,l]=d.useState(!1),p=async()=>{l(!0);try{const a=await f.get("/notifikasi"),r=a.data.data,u=a.data.data.filter(b=>!b.is_read);g(u.length!==0),i(r)}catch(a){console.error("Error fetching notifications:",a)}finally{l(!1)}},c=async a=>{l(!0);try{const r=await f.get(a);n(r.data.message),await p()}catch(r){console.error("Error marking notification as read:",r)}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{isLoading:h}),e.jsx("header",{className:"header fixed top-0 z-10 left-0 right-0 flex items-stretch shrink-0 bg-[--tw-page-bg] dark:bg-[--tw-page-bg-dark]","data-sticky":"true","data-sticky-className":"shadow-sm","data-sticky-name":"header",id:"header",children:e.jsxs("div",{className:"flex items-stretch justify-end container-fixed lg:gap-4",id:"header_container",children:[e.jsxs("div",{className:"flex items-center gap-1 -ml-1 lg:hidden",children:[e.jsx("a",{className:"shrink-0",href:"/",children:e.jsx("img",{className:"max-h-[25px] w-full",src:v})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"btn btn-icon btn-light btn-clear btn-sm","data-drawer-toggle":"#sidebar",children:e.jsx("i",{className:"ki-filled ki-menu"})})})]}),e.jsx("div",{className:"menu flex-col lg:flex-row gap-5 lg:gap-7.5 p-5 lg:p-0",children:window.location.pathname!=="/portal"&&e.jsx("div",{className:"menu-item",children:e.jsx("a",{className:"px-4 py-2 my-4 text-sm font-medium text-white text-gray-700 bg-blue-500 border border-white border-solid rounded-full btn menu-link menu-item-show:text-primary",href:"/portal",children:e.jsx("div",{className:"menu-title text-nowrap",children:"Portal"})})})}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3.5",children:[e.jsxs("div",{className:"dropdown","data-dropdown":"true","data-dropdown-offset":"70px, 10px","data-dropdown-placement":"bottom-end","data-dropdown-trigger":"click|lg:click",children:[e.jsxs("button",{className:"relative text-gray-500 rounded-full cursor-pointer dropdown-toggle btn btn-icon btn-icon-lg size-9 hover:bg-primary-light hover:text-primary dropdown-open:bg-primary-light dropdown-open:text-primary",children:[e.jsx("i",{className:"ki-filled ki-notification-on"}),s&&e.jsx("span",{className:"badge badge-dot badge-success size-[5px] absolute top-0.5 right-0.5 transform translate-y-1/2"})]}),e.jsxs("div",{className:"dropdown-content light:border-gray-300 w-full max-w-[460px]",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2.5 text-sm text-gray-900 font-semibold px-5 py-2.5 border-b border-b-gray-200",id:"notifications_header",children:["Notifications",e.jsx("button",{className:"btn btn-sm btn-icon btn-light btn-clear shrink-0","data-dropdown-dismiss":"true",children:e.jsx("i",{className:"ki-filled ki-cross"})})]}),e.jsx("div",{className:"justify-between px-5 mb-2 tabs","data-tabs":"true",id:"notifications_tabs"}),e.jsx("div",{className:"grow",id:"notifications_tab_all",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"scrollable-y-auto","data-scrollable":"true","data-scrollable-dependencies":"#header","data-scrollable-max-height":"auto","data-scrollable-offset":"200px",children:e.jsx("div",{className:"flex flex-col gap-5 pt-3 pb-4 divider-y divider-gray-200",children:o.map((a,r)=>e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex grow gap-2.5 px-5",children:k(a)},r),e.jsx("div",{className:"border-b border-b-gray-200"})]}))})}),e.jsx("div",{className:"border-b border-b-gray-200"}),e.jsxs("div",{className:"grid grid-cols-2 p-5 gap-2.5",id:"notifications_all_footer",children:[e.jsx("button",{onClick:a=>c("/notifikasi/delete"),className:"justify-center btn btn-sm btn-light",children:"Delete all"}),e.jsx("button",{onClick:a=>c("/notifikasi/read"),className:"justify-center btn btn-sm btn-light",children:"Mark all as read"})]})]})})]})]}),e.jsx("div",{className:"menu","data-menu":"true",children:e.jsxs("div",{className:"menu-item","data-menu-item-offset":"20px, 10px","data-menu-item-placement":"bottom-end","data-menu-item-toggle":"dropdown","data-menu-item-trigger":"click|lg:click",children:[e.jsx("div",{className:"rounded-full menu-toggle btn btn-icon",children:e.jsx("i",{className:"!text-lg md:!text-3xl text-blue-500 ki-filled ki-profile-circle"})}),e.jsxs("div",{className:"menu-dropdown menu-default light:border-gray-300 w-screen max-w-[250px]",children:[e.jsx("div",{className:"flex items-center justify-between px-5 py-1.5 gap-1.5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"rounded-full menu-toggle btn btn-icon",children:e.jsx("i",{className:"!text-lg md:!text-3xl text-blue-500 ki-filled ki-profile-circle"})}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"text-sm font-semibold leading-none text-gray-800",children:(m=t==null?void 0:t.user)==null?void 0:m.name}),e.jsx("a",{className:"text-xs font-medium leading-none text-gray-600 hover:text-primary",href:"html/demo1/account/home/get-started.html",children:(x=t==null?void 0:t.user)==null?void 0:x.email})]})]})}),e.jsx("div",{className:"menu-separator"}),e.jsx("div",{className:"flex flex-col"}),e.jsx("div",{className:"menu-separator"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"menu-item px-4 py-1.5",children:e.jsx("a",{className:"justify-center btn btn-sm btn-light",href:"/logout",children:"Log out"})})})]})]})})]})]})})]})}export{D as default};
