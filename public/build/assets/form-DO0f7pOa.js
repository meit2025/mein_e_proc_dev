import{u as R,r as A,j as e}from"./app-IQwIjIau.js";import{F as N,a as o,b as i,c as d,d as c}from"./form-B2mg5zRK.js";import{z as l,t as P}from"./index-BxkK7xV6.js";import{F as h,B as U}from"./button-Y24lxrSy.js";import{u as O}from"./index.esm-BNAaWfT5.js";import{S as B}from"./scroll-area-CulWtV1S.js";import{S as j,a as u,b as p,c as g,d as f}from"./select-BLw5suOl.js";import{I as S}from"./input-BAlMeipZ.js";import{a as E}from"./axiosInstance-hLWWsmsQ.js";const b="/api/master/reimburse-quota",K=`${b}/`,L=`${b}/create`,M=a=>`${b}/detail/${a}`;function V({onSuccess:a,type:m=h.create,id:x,listTypeReimburse:T,listPeriodReimburse:_,listGrade:C}){const I=l.object({period:l.string("Period must choose"),type:l.string("Type must choose"),grade:l.string("Grade must choose"),limit:l.number("Limit must set"),plafon:l.number("Plafon must set")}),w={period:"",type:"",grade:"",limit:0,plafon:0};async function y(){const t=M(x);try{const s=await E.get(t);n.reset({id:s.data.data.id})}catch{}}const n=O({resolver:P(I),defaultValues:w}),{showToast:v}=R(),F=async t=>{var s;try{const r=await E.post(L,t);a==null||a(!0),v((s=r==null?void 0:r.data)==null?void 0:s.message,"success")}catch(r){a==null||a(!1),v(r.message,"error")}};return A.useEffect(()=>{x&&m==h.edit&&y()},[x,m]),e.jsx(B,{className:"h-[600px] w-full",children:e.jsx(N,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(F),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"period",render:({field:t})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:_.map(r=>e.jsxs(f,{value:r.id.toString(),children:[r.start," - ",r.end]},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"type",render:({field:t})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:T.map(r=>e.jsx(f,{value:r.id.toString(),children:r.name},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsx("td",{children:e.jsx(o,{control:n.control,name:"grade",render:({field:t})=>{var s;return e.jsxs(i,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:r=>t.onChange(r),value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:C.map(r=>e.jsx(f,{value:r.id.toString(),children:r.grade},r.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Limit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:n.control,disabled:m==h.edit,name:"limit",render:({field:t})=>e.jsxs(i,{children:[e.jsx(d,{children:e.jsx(S,{type:"number",placeholder:"0.0",onChange:s=>t.onChange(Number(s.target.value)),value:t.value||0})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Plafon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:n.control,disabled:m==h.edit,name:"plafon",render:({field:t})=>e.jsxs(i,{children:[e.jsx(d,{children:e.jsx(S,{type:"number",placeholder:"0",...t,onChange:s=>t.onChange(Number(s.target.value)),value:t.value||0})}),e.jsx(c,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(U,{type:"submit",children:"Save"})})]})})})}const W=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{K as L,V as R,W as f};
