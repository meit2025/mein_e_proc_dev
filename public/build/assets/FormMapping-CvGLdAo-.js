import{r as q,j as s,c as z,u as A,a as I}from"./app-B6FM1uUE.js";import{a as y,C as $,F as P}from"./index.esm-CAEj-d3i.js";import{g as R,a as L,s as F,c as k,S as O,m as C,l as B,n as D,p as U,q as V,u as X,b as _,F as S,A as E,r as M,t as H,C as W,v as G,I as J,T as K}from"./TextField-CniPNbi4.js";import{a as Q}from"./axiosInstance-BNFoeJ7F.js";import{L as Y}from"./Loading-CJy7ekum.js";function Z(e){return L("MuiSwitch",e)}const v=R("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ee=e=>{const{classes:a,edge:r,size:d,color:p,checked:h,disabled:u}=e,g={root:["root",r&&`edge${k(r)}`,`size${k(d)}`],switchBase:["switchBase",`color${k(p)}`,h&&"checked",u&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},o=_(g,Z,a);return{...a,...o}},se=F("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,r.edge&&a[`edge${k(r.edge)}`],a[`size${k(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${v.thumb}`]:{width:16,height:16},[`& .${v.switchBase}`]:{padding:4,[`&.${v.checked}`]:{transform:"translateX(16px)"}}}}]}),ae=F(O,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.switchBase,{[`& .${v.input}`]:a.input},r.color!=="default"&&a[`color${k(r.color)}`]]}})(C(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${v.checked}`]:{transform:"translateX(20px)"},[`&.${v.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${v.checked} + .${v.track}`]:{opacity:.5},[`&.${v.disabled} + .${v.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${v.input}`]:{left:"-100%",width:"300%"}})),C(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:B(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(D(["light"])).map(([a])=>({props:{color:a},style:{[`&.${v.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:B(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?U(e.palette[a].main,.62):V(e.palette[a].main,.55)}`}},[`&.${v.checked} + .${v.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]}))),re=F("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(C(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),te=F("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(C(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),le=q.forwardRef(function(a,r){const d=X({props:a,name:"MuiSwitch"}),{className:p,color:h="primary",edge:u=!1,size:g="medium",sx:o,...l}=d,n={...d,color:h,edge:u,size:g},c=ee(n),x=s.jsx(te,{className:c.thumb,ownerState:n});return s.jsxs(se,{className:z(c.root,p),sx:o,ownerState:n,children:[s.jsx(ae,{type:"checkbox",icon:x,checkedIcon:x,ref:r,ownerState:n,...l,classes:{...c,root:c.switchBase}}),s.jsx(re,{className:c.track,ownerState:n})]})}),ie=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,type:h="text",requiredMessage:u,placeholder:g,minLength:o,maxLength:l,classNames:n,icon:c})=>{var t;const{control:x,formState:{errors:f}}=y();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx($,{name:a,control:x,rules:{required:r?u??`${e} is required`:!1,...o!==void 0?{minLength:{value:o,message:`Minimum length is ${o} characters`}}:{},...l!==void 0?{maxLength:{value:l,message:`Maximum length is ${l} characters`}}:{}},render:({field:i})=>s.jsx(s.Fragment,{children:s.jsxs("label",{className:`input ${r&&f[a]?"border-danger":""} ${n}`,style:p,children:[c,s.jsx("input",{placeholder:g,type:h,required:r,disabled:d,...i,...o!==void 0?{minLength:o}:{},...l!==void 0?{maxLength:l}:{}}),s.jsx("br",{})]})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),f[a]&&s.jsx(S,{error:!0,children:String((t=f[a])==null?void 0:t.message)})]})]})},ne=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,options:u,placeholder:g,classNames:o,onChangeOutside:l})=>{var x;const{control:n,formState:{errors:c}}=y();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx($,{name:a,control:n,rules:{required:r?h??`${e} is required`:!1},render:({field:f})=>s.jsx("div",{className:`${o}`,children:s.jsx(E,{...f,options:u,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,i)=>t.value===i,onChange:(t,i)=>{f.onChange(i?i.value:null),l&&l(i?i.value:null)},sx:p,disabled:d,renderInput:t=>s.jsx(M,{...t,placeholder:g,error:!!c[a],required:r,InputProps:{...t.InputProps,sx:{height:"36px"}}})})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),c[a]&&s.jsx(S,{error:!0,children:String((x=c[a])==null?void 0:x.message)})]})]})},oe=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,classNames:u})=>{const{control:g,formState:{errors:o}}=y();return s.jsx($,{name:a,control:g,rules:{required:r?h??`${e} is required`:!1},render:({field:l})=>{var n;return s.jsxs("div",{style:p,className:u,children:[s.jsx(H,{control:s.jsx(W,{...l,checked:!!l.value,disabled:d}),label:e}),o[a]&&s.jsx(S,{error:!0,children:String((n=o[a])==null?void 0:n.message)})]})}})},ce=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,options:u=[],placeholder:g,classNames:o,onChangeOutside:l})=>{const{control:n,formState:{errors:c}}=y();return s.jsx($,{name:a,control:n,rules:{required:r?h??`${e} is required`:!1},render:({field:x})=>{var f;return s.jsxs("div",{style:p,className:o,children:[s.jsx(E,{...x,multiple:!0,options:u,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,i)=>t.value===i,onChange:(t,i)=>{x.onChange(i.map(m=>m.value)),l&&l(i.map(m=>m.value))},value:u.filter(t=>{var i;return(i=x.value)==null?void 0:i.includes(t.value)}),disabled:d,renderInput:t=>s.jsx(M,{...t,label:e,placeholder:g,error:!!c[a],required:r}),renderTags:(t,i)=>t.map((m,b)=>q.createElement(G,{label:m.label,...i({index:b}),key:b}))}),c[a]&&s.jsx(S,{error:!0,children:String((f=c[a])==null?void 0:f.message)})]})}})},de=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,allowedExtensions:u=[],classNames:g,onFileChangeOutside:o})=>{const[l,n]=q.useState(null),{control:c,formState:{errors:x},setError:f,clearErrors:t}=y(),i=(m,b)=>{var j;const w=m.target.files?m.target.files[0]:null;if(w){const N=(j=w.name.split(".").pop())==null?void 0:j.toLowerCase();if(u.length>0&&N&&!u.includes(N)){b(null),n(null),f(a,{type:"manual",message:`Invalid file type. Allowed types: ${u.join(", ")}`});return}t(a),n(w.name),b(w),o&&o(w)}else b(null),n(null),t(a)};return s.jsx($,{name:a,control:c,rules:{required:r?h??`${e} is required`:!1},render:({field:m})=>{var b;return s.jsxs("div",{style:p,className:g,children:[s.jsx("label",{children:e}),s.jsx(J,{type:"file",disabled:d,onChange:w=>i(w,m.onChange)}),l&&s.jsxs("p",{children:["Selected file: ",l]}),x[a]&&s.jsx(S,{error:!0,children:String((b=x[a])==null?void 0:b.message)})]})}})},ue=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,placeholder:u,rows:g=10,maxRows:o=10,maxLength:l,classNames:n})=>{var m;const[c,x]=q.useState(0),{control:f,formState:{errors:t}}=y(),i=b=>{x(b.target.value.length)};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx($,{name:a,control:f,rules:{required:r?h??`${e} is required`:!1},render:({field:b})=>{var w;return s.jsxs("div",{style:p,className:n,children:[s.jsx(M,{...b,multiline:!0,rows:g,style:p,maxRows:o,placeholder:u,disabled:d,error:!!t[a],required:r,variant:"outlined",inputProps:{...l?{maxLength:l}:{}},onChange:j=>{b.onChange(j),i(j)}}),l&&s.jsxs(K,{variant:"caption",style:{textAlign:"right",display:"block",marginTop:4},children:[c,"/",l," characters"]}),t[a]&&s.jsx(S,{error:!0,children:String((w=t[a])==null?void 0:w.message)})]})}})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),t[a]&&s.jsx(S,{error:!0,children:String((m=t[a])==null?void 0:m.message)})]})]})},pe=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:d=!1,style:p,requiredMessage:h,classNames:u,defaultChecked:g=!1})=>{var n;const{control:o,formState:{errors:l}}=y();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx($,{name:a,control:o,rules:{required:r?h??`${e} is required`:!1},render:({field:c})=>s.jsx("div",{style:p,className:u,children:s.jsx(le,{...c,checked:!!(c.value??g),onChange:x=>c.onChange(x.target.checked),disabled:d})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),l[a]&&s.jsx(S,{error:!0,children:String((n=l[a])==null?void 0:n.message)})]})]})},xe=({model:e,onChangeOutside:a})=>{switch(e.type){case"input":return s.jsx(ie,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon,iconPosition:e.iconPosition});case"textarea":return s.jsx(ue,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames});case"select":return s.jsx(ne,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"checkbox":return s.jsx(oe,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(ce,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"switch":return s.jsx(pe,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(de,{fieldLabel:e.label,fieldName:e.name,allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:a});default:return null}},je=({formModel:e,url:a,redirectUrl:r,methods:d,onSave:p,isLoading:h,classForm:u,isCustom:g=!1,formCustom:o})=>{const{setError:l}=d,{showToast:n}=A(),[c,x]=q.useState(!1),f=async t=>{var i,m,b,w;x(!0);try{const j=await Q.post(a,t,{headers:{"Content-Type":"application/json"}});n(j.data.message,"success"),p&&await p(j),r&&setTimeout(()=>{window.location.href=r},2e3)}catch(j){if(I.isAxiosError(j)&&((m=(i=j.response)==null?void 0:i.data)!=null&&m.message)&&n(j.response.data.message,"error"),I.isAxiosError(j)&&((w=(b=j.response)==null?void 0:b.data)!=null&&w.errors)){const N=j.response.data.errors;Object.keys(N).forEach(T=>{l(T,{type:"server",message:N[T].join(", ")})})}}x(!1)};return s.jsxs(P,{...d,children:[s.jsx(Y,{isLoading:h||c}),s.jsxs("form",{onSubmit:d.handleSubmit(f),children:[s.jsx("div",{className:u,children:g?s.jsx(s.Fragment,{children:o}):s.jsx(s.Fragment,{children:e.map((t,i)=>s.jsx("div",{className:`mt-8 ${t.classPosition}`,children:s.jsx(xe,{model:t})},i))})}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{je as F};
