import{b as $,r as j,j as e}from"./app-DNuiccyu.js";import{F as M,a as i,b as m,c,d}from"./form-BFacE67e.js";import{z as o,t as L}from"./zod-D9eZXHnj.js";import{B as P}from"./button-D8tf04qm.js";import{u as R}from"./index.esm-BcJX4rF5.js";import{S as O}from"./scroll-area-Bn5SUfz7.js";import{S as p}from"./separator-cPnQUmYX.js";import{T as Y,a as B,b as H,c as U}from"./tabs-C6oZImh0.js";import{S as g,a as y,b,c as C,d as f}from"./select-Dy9DsFSZ.js";import{C as k}from"./CustomDatePicker-Cv__HzPe.js";import{I as F}from"./input-B47TkicD.js";import{a as w}from"./axiosInstance-D0MU2t6I.js";const{Axios:oe,AxiosError:q,CanceledError:ie,isCancel:me,CancelToken:ce,VERSION:de,all:he,Cancel:xe,isAxiosError:ue,spread:je,toFormData:fe,AxiosHeaders:pe,HttpStatusCode:ge,formToJSON:ye,getAdapter:be,mergeConfig:Ce}=$,x="/api/master/family",Fe=`${x}/`,z=`${x}/create`,J=l=>`${x}/edit/${l}`,we=l=>`${x}/update/${l}`,W=({onSuccess:l,idUser:u})=>{const T=o.object({total_family:o.string().min(1,"Total Family is Required"),families:o.array(o.object({id:o.string(),status:o.string().min(1,"Type Family is Must Choose"),bod:o.date(),name:o.string().min(1,"Name Family is Required")}))}),[_,A]=j.useState("family1"),v=r=>{A(r)},[D,S]=j.useState("1"),N=r=>{S(r);const t=s.getValues("families"),a=Array.from({length:r}).map((n,E)=>t[E]||{id:"",name:"",status:"",bod:new Date});s.setValue("families",a),s.setValue("total_family",r.toString())};async function V(){try{const t=(await w.get(J(u??""))).data.data;t&&t.length>0?(s.setValue("total_family",t.length.toString()),s.setValue("families",t.map(a=>({id:a.id??"",status:a.status??"",name:a.name??"",bod:a.bod?new Date(a.bod):new Date})))):(s.setValue("total_family","1"),s.setValue("families",[{id:"",name:"",status:"",bod:new Date}]))}catch(r){r instanceof q?h(r.message):h(),s.setValue("total_family","1"),s.setValue("families",[{id:"",name:"",status:"",bod:new Date}])}}const I=async r=>{try{const t={...r,user:u},a=await w.post(z,t);l==null||l(!0),h(a.message,"success")}catch(t){l==null||l(!1),h(t.message)}},s=R({resolver:L(T),defaultValues:{total_family:"1",families:[{id:"",status:"",bod:new Date,name:""}]}});return j.useEffect(()=>{V()},[D]),e.jsx(O,{className:"h-[600px] w-full ",children:e.jsx(M,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(I),children:[e.jsx("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Total Member"}),e.jsxs("td",{children:[" ",e.jsx(i,{control:s.control,name:"total_family",render:({field:r})=>{var t;return e.jsxs(m,{children:[e.jsx(c,{children:e.jsxs(g,{onValueChange:a=>N(a),value:(t=r.value)==null?void 0:t.toString(),children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(b,{placeholder:"-"})}),e.jsx(C,{children:Array.from({length:5},(a,n)=>e.jsxs(f,{value:(n+1).toString(),children:[" ",n+1," "]}))})]})}),e.jsx(d,{})]})}})]})]})}),e.jsx(p,{className:"my-4"}),e.jsxs(Y,{value:_,onValueChange:v,className:"w-full",children:[e.jsxs(B,{className:"flex items-center justify-start space-x-4",children:[" ",Array.from({length:s.watch("total_family")||1}).map((r,t)=>e.jsxs(H,{value:`family${t+1}`,children:["Member ",t+1]},t))]}),Array.from({length:s.watch("total_family")||1}).map((r,t)=>e.jsxs(U,{value:`family${t+1}`,children:[e.jsx(i,{control:s.control,name:`families.${t}.id`,render:({field:a})=>e.jsx(m,{children:e.jsx(c,{children:e.jsx(F,{type:"text",className:"sr-only",...a,value:a.value.toString()||"",onChange:n=>a.onChange(n.target.value)})})})}),e.jsx("div",{children:e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:`families.${t}.name`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(c,{children:e.jsx(F,{type:"text",placeholder:"John Doe",...a,value:a.value||"",onChange:n=>a.onChange(n.target.value)})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Family Type"}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:`families.${t}.status`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(c,{children:e.jsxs(g,{onValueChange:n=>a.onChange(n),value:a.value,children:[e.jsx(y,{className:"w-[200px]",children:e.jsx(b,{placeholder:"Child / Wife"})}),e.jsxs(C,{children:[e.jsx(f,{value:"wife",children:"Wife"}),e.jsx(f,{value:"child",children:"Child"})]})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Birth of Date"}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:`families.${t}.bod`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(c,{children:e.jsx(k,{initialDate:a.value instanceof Date?a.value:new Date(a.value),onDateChange:n=>a.onChange(n)})}),e.jsx(d,{})]})})})]})]})})]},t))]}),e.jsx(p,{className:"my-4"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(P,{type:"submit",className:"w-32",children:"Update"})})]})})})};function h(l,u){throw new Error("Function not implemented.")}const Te=Object.freeze(Object.defineProperty({__proto__:null,FamilyHeaderForm:W},Symbol.toStringTag,{value:"Module"}));export{z as C,J as E,W as F,Fe as L,we as U,Te as f};
