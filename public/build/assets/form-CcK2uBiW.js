import{r as v,u as L,j as e}from"./app-BoGhxFfj.js";import{F as V,a as l,b as i,c,d as m}from"./form-BM_GaCgb.js";import{z as o,t as q}from"./index-BumsDIuW.js";import{F as h,B}from"./button-BkVfOLOa.js";import{u as G}from"./index.esm-qKGhRFQd.js";import{S as P}from"./scroll-area-_rL8zPVH.js";import{S as j,a as p,b as g,c as b,d}from"./select-CANdNcqw.js";import{I as w}from"./input-CBBrWyLw.js";import{a as y}from"./axiosInstance-CiXY2vKi.js";import{u as C}from"./getDropdown-BvgPYmrU.js";import{L as U}from"./Loading-Bq2BS07I.js";import"./app-wnGHkkFm.js";import"./index-dtF5_4Zn.js";import"./react-icons.esm-DkdrgO7U.js";import"./index-BNzbO34V.js";import"./Combination-D5lZjH_0.js";import"./index-h1by9faH.js";import"./index-uCvVN-5v.js";const E="/api/master/reimburse-type",$=`${E}/create`,O=t=>`${E}/detail/${t}`;function ce({onSuccess:t,type:x=h.create,id:u,listMaterial:Y}){const F=o.object({code:o.string().min(1,"Code is required"),name:o.string().min(1,"Name is required"),is_employee:o.boolean(),material_group:o.string().min(1,"Material group required"),material_number:o.string().min(1,"Material number required")}),{dataDropdown:S,getDropdown:I}=C(),{dataDropdown:N,getDropdown:M}=C(),[T,f]=v.useState(!1),D={code:"",name:"",is_employee:!0};async function R(){const a=O(u);try{const r=await y.get(a);s.reset({code:r.data.data.code,name:r.data.data.name})}catch{}}const s=G({resolver:q(F),defaultValues:D}),{showToast:_}=L(),A=async a=>{var r;f(!0);try{const n=await y.post($,a);console.log("ini respone",n),t&&t(!0),_((r=n==null?void 0:n.data)==null?void 0:r.message,"success")}catch(n){t&&t(!1),_(n.message,"error")}f(!1)};return v.useEffect(()=>{u&&x===h.edit&&R(),I("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),M("",{name:"material_number",id:"material_number",tabel:"master_materials"})},[u,x]),e.jsxs(P,{className:"h-[600px] w-full",children:[e.jsx(U,{isLoading:T}),e.jsx(V,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(A),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(l,{control:s.control,disabled:x===h.edit,name:"code",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(w,{type:"text",placeholder:"Insert code",...a,value:a.value||"",onChange:r=>a.onChange(r.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(l,{control:s.control,name:"name",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(w,{type:"text",...a,value:a.value||"",onChange:r=>a.onChange(r.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"For"}),e.jsx("td",{children:e.jsx(l,{control:s.control,name:"is_employee",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r==="true"),value:a.value?"true":"false",children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsxs(b,{children:[e.jsx(d,{value:"true",children:"Employee"},"is_employee"),e.jsx(d,{value:"false",children:"Family"},"is_employee")]})]})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Group"}),e.jsx("td",{children:e.jsx(l,{control:s.control,name:"material_group",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r),value:a.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(b,{children:S.map(r=>e.jsx(d,{value:r.value,children:r.label},r.id))})]})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Number"}),e.jsx("td",{children:e.jsx(l,{control:s.control,name:"material_number",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r),value:a.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(b,{children:N.map(r=>e.jsx(d,{value:r.value,children:r.label},r.value))})]})}),e.jsx(m,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(B,{type:"submit",children:"Save"})})]})})]})}export{ce as default};
