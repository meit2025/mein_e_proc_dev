import{r as C,j as e}from"./app-B-4ErjWL.js";import{a as S,C as v}from"./index.esm-B8uEeNnt.js";import{I as A}from"./TextField-DJYH-Cua.js";import{F as I}from"./FormHelperText-0KOICH36.js";const B=({fieldLabel:m,fieldName:r,isRequired:d=!1,disabled:x=!1,style:j,requiredMessage:y,allowedExtensions:a=[],classNames:F,onFileChangeOutside:u})=>{const[R,n]=C.useState(null),{control:h,formState:{errors:p},setError:i,clearErrors:c}=S(),b=(l,t)=>{var g;const s=l.target.files?l.target.files[0]:null;if(s){const f=(g=s.name.split(".").pop())==null?void 0:g.toLowerCase();if(a.length>0&&f&&!a.includes(f)){l.target.value="",t(null),n(null),i(r,{type:"manual",message:`Invalid file type. Allowed types: ${a.join(", ")}`});return}const o=new FileReader;o.readAsDataURL(s),o.onload=()=>{typeof o.result=="string"?u&&u(o.result,s.name):i(r,{type:"manual",message:"Failed to read file as Base64"})},o.onerror=()=>i(r,{type:"manual",message:"Failed to read file as Base64"}),c(r),n(s.name),t(s)}else t(null),n(null),c(r)};return e.jsx(v,{name:r,control:h,rules:{required:d?y??`${m} is required`:!1},render:({field:l})=>{var t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:j,className:F,children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 max-w-75",children:m}),e.jsx(A,{type:"file",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",disabled:x,onChange:s=>b(s,l.onChange)})]}),e.jsxs("span",{style:{marginLeft:"6rem",marginTop:"0.5rem",fontSize:"0.75rem"},children:[a.length>0&&e.jsxs(e.Fragment,{children:["Allowed types: ",a.join(", ")]}),e.jsx("br",{}),e.jsx("p",{children:"Please Upload Your Quotation Here"}),p[r]&&e.jsx(I,{error:!0,children:String((t=p[r])==null?void 0:t.message)})]})]})}})};export{B as F};
