import{r as c,j as a}from"./app-BNFEk2NP.js";import{F as i}from"./formInput-DptTe2PP.js";import{F as j}from"./formSwitch-CApVbcP5.js";import{a as A,c as m}from"./index.esm-BXIDPTM8.js";import"./app-DQK4SJPx.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-C-F_PRws.js";import"./DefaultPropsProvider-Cnd1Iz2f.js";import"./Switch-D57xHuSc.js";import"./createSimplePaletteValueFilter-BdnWHAGx.js";import"./SwitchBase-C9jFnNpy.js";import"./useControlled-Ddn9te-u.js";const D=({disable:n})=>{const{getValues:h,setValue:r,watch:d}=A(),[p,l]=c.useState(!0),f=m({name:"is_cashAdvance"}),u=m({name:"vendors"}),_=e=>Array.isArray(e)?e.find(t=>t&&t.winner===!0):null;c.useEffect(()=>{const e=_(u);l(!e)},[u]);const s=d("total_all_amount"),v=e=>{console.log(e);const t=h("vendors").filter(o=>(o.winner||!1)===!0),x=((t.length>0?t[0]:null).units||[]).reduce((o,g)=>o+g.total_amount,0);r("total_all_amount",x);const b=parseInt(e)/100*parseInt(s);r("cash_advance_purchases.nominal",b)};return c.useEffect(()=>{if(s>0){const e=parseInt(d("cash_advance_purchases.dp"))/100*parseInt(s);r("cash_advance_purchases.nominal",e)}},[s]),a.jsxs("div",{children:[a.jsx(j,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:n}),f&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(i,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:n,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>v(e.target.value)}),a.jsx(i,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:n,type:"text",placeholder:"Enter reference"}),a.jsx(i,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:p?"Please Chose The Propose Vendor":""})]})]})};export{D as default};
