import{r as c,u as B,j as e}from"./app-DUyOpTBh.js";import{F as D,a as x,b as h,c as p,d as j}from"./form-D_g86boo.js";import{z as i,t as P}from"./index-DAFFb4oY.js";import{B as R}from"./button-dOIyZ1Od.js";import{u as U}from"./index.esm-CyYOhRC8.js";import{S as z}from"./scroll-area-D_dUkDib.js";import{S as u,a as f,b as g,c as S,d as b}from"./select-DXzILdmy.js";import{a as n}from"./axiosInstance-DZ_xSXPt.js";import{F as m}from"./utils-oyoOCCx1.js";import{M as Q}from"./MultiSelect-DG4iqSba.js";import"./app-CTy9eNAz.js";import"./index-Di4m602d.js";import"./index-QPKrL-d-.js";import"./index-CB6Ta-Yx.js";import"./index-x_0t86yQ.js";import"./index-YlRy_ugV.js";import"./index-CKpeL3KV.js";import"./index-B0kGco6o.js";import"./index-I6oN4Wqp.js";import"./checkbox-VRWVQpBQ.js";function ie({onSuccess:o,type:l=m.create,listUser:y,storeURL:F,editURL:w,listPeriodReimburse:v,listReimburseType:C,updateURL:N}){const[V,T]=c.useState([]),E=i.object({period:i.string("Period must choose"),type:i.string("Type must choose"),users:i.array(i.number().optional())}),I={period:"",type:"",users:[]},a=U({resolver:P(E),defaultValues:I});async function M(){try{const r=(await n.get(w)).data.data;a.reset({period:r.period.toString(),type:r.type.toString(),users:r.users})}catch{}}const{showToast:d}=B(),A=async s=>{var r;try{let t;l===m.edit?t=await n.put(N??"",s):t=await n.post(F??"",s),o==null||o(!0),d((r=t==null?void 0:t.data)==null?void 0:r.data,"success")}catch(t){o==null||o(!1),d(t.message,"error")}};return c.useEffect(()=>{l===m.edit&&M(),T(y)},[l]),e.jsx(z,{className:"h-[600px] w-full",children:e.jsx(D,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(A),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(x,{control:a.control,name:"period",render:({field:s})=>{var r;return e.jsxs(h,{children:[e.jsx(p,{children:e.jsxs(u,{onValueChange:t=>s.onChange(t),value:(r=s.value)==null?void 0:r.toString(),children:[e.jsx(f,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(S,{children:v.map(t=>e.jsxs(b,{value:t.id.toString(),children:[t.start," - ",t.end]},t.id))})]})}),e.jsx(j,{})]})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Users ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(Q,{onSelect:s=>{a.setValue("users",s.map(r=>r.id))},value:a.getValues("users"),id:"id",label:"name",options:V})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(x,{control:a.control,name:"type",render:({field:s})=>{var r;return e.jsxs(h,{children:[e.jsx(p,{children:e.jsxs(u,{onValueChange:t=>s.onChange(t),value:(r=s.value)==null?void 0:r.toString(),children:[e.jsx(f,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(S,{children:C.map(t=>e.jsx(b,{value:t.id.toString(),children:t.name},t.id))})]})}),e.jsx(j,{})]})}})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(R,{type:"submit",children:"Save"})})]})})})}export{ie as default};
