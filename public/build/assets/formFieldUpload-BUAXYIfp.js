import{r as C,j as a}from"./app-BThzlRZv.js";import{a as w,C as E}from"./index.esm-pC3ybV9_.js";import{I}from"./TextField-C49lTCJC.js";import{F as R}from"./FormHelperText-BcDQMpbS.js";const B=({fieldLabel:m,fieldName:e,isRequired:x=!1,disabled:d=!1,style:y,requiredMessage:F,allowedExtensions:o=[],classNames:j,onFileChangeOutside:u})=>{const[S,n]=C.useState(null),{control:b,formState:{errors:c},setError:i,clearErrors:p}=w(),h=(l,s)=>{var f;const r=l.target.files?l.target.files[0]:null;if(r){const g=(f=r.name.split(".").pop())==null?void 0:f.toLowerCase();if(o.length>0&&g&&!o.includes(g)){s(null),n(null),i(e,{type:"manual",message:`Invalid file type. Allowed types: ${o.join(", ")}`});return}const t=new FileReader;t.readAsDataURL(r),t.onload=()=>{typeof t.result=="string"?u&&u(t.result,r.name):i(e,{type:"manual",message:"Failed to read file as Base64"})},t.onerror=()=>i(e,{type:"manual",message:"Failed to read file as Base64"}),p(e),n(r.name),s(r)}else s(null),n(null),p(e)};return a.jsx(E,{name:e,control:b,rules:{required:x?F??`${m} is required`:!1},render:({field:l})=>{var s;return a.jsxs("div",{style:y,className:j,children:[a.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 max-w-75",children:m}),a.jsx(I,{type:"file",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",disabled:d,onChange:r=>h(r,l.onChange)}),c[e]&&a.jsx(R,{error:!0,children:String((s=c[e])==null?void 0:s.message)})]})}})};export{B as F};
