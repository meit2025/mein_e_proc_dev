import{u as A,r as S,j as e}from"./app-6QURCtjv.js";import{d as V,F as i,a as l,b as n,c,e as j}from"./form-Ct2h3tvq.js";import{z as o,t as L}from"./index-BRgh8xKP.js";import{B as R}from"./button-DvJmOIhO.js";import{u as P}from"./index.esm-C4Ha2sL8.js";import{T as G}from"./textarea-ICIPjlda.js";import{S as _}from"./scroll-area-BPKjWyxw.js";/* empty css              */import{S as u,a as p,b as g,c as f,d}from"./select-aypyQszt.js";import{I as N}from"./input-BVcCkaCi.js";import{a as y}from"./axiosInstance-BGk08Ut6.js";import{G as D}from"./api-Bcnus_NZ.js";import{R as O,a as v}from"./radio-group-C6xVstD2.js";import{C as B}from"./api-B_24iBZb.js";import{G as M}from"./api-BG2DVmVj.js";import"./app-DQK4SJPx.js";import"./index-Dy6P3T8c.js";import"./utils-CzBzXHP3.js";import"./index-BonVV8wM.js";import"./index-Cgm8sQpd.js";import"./index-Bb4qSo10.js";import"./createLucideIcon-CvRH3hw0.js";import"./index-DxA8uxjm.js";import"./index-D31uOh3h.js";import"./index-BltVV4w7.js";import"./index-BdQq_4o_.js";import"./index-B0KP46jq.js";import"./index-CXgYkGzv.js";import"./Combination-vIb7XICu.js";import"./index-CoYaxYw1.js";import"./index-I32ThLQU.js";import"./index-BwpWqyaq.js";import"./index-CUJ38o0e.js";var U=(t=>(t[t.create=0]="create",t[t.edit=1]="edit",t[t.update=2]="update",t))(U||{});function _e({onSuccess:t,type:x=0,id:m,listCurrency:w,listAllowanceCategory:E}){var F=o.object({code:o.string().min(1,"Code is required"),name:o.string().min(1,"Name is required"),type:o.string().min(1,"Type is required"),currency_id:o.string().min(1,"Currency is required"),formula:o.string().min(1,"Formula is required"),allowance_category_id:o.string().min(1,"Allowance Category is required"),request_value:o.string().min(1,"Required")});let I={code:"",name:"",type:"",currency_id:"",fixed_value:"",max_value:"",request_value:"unlimited",formula:"",allowance_category_id:""};async function T(){let r=D(m);try{let s=await y.get(r);a.reset({code:s.data.data.code,name:s.data.data.name})}catch{}}async function b(r){console.log(r);let s=M(r);try{let h=await y.get(s);console.log(h)}catch(h){console.log(h)}}const a=P({resolver:L(F),defaultValues:I}),{showToast:C}=A(),q=async r=>{console.log(r);try{const s=await y.post(B,r);console.log("response",s),C("success","success"),t==null||t(!0)}catch{t==null||t(!1),C("Please Check the input","error")}};return S.useEffect(()=>{m&&x==1&&T()},[m,x]),e.jsx(_,{className:"h-[600px] w-full",children:e.jsx(V,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(q),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:a.control,disabled:x==1,name:"code",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(N,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(N,{type:"text",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Business Purpose Type"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:b,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select type"})}),e.jsxs(f,{children:[e.jsx(d,{value:"Day",children:"Day"},"day"),e.jsx(d,{value:"total",children:"Total"},"total")]})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"currency_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select Currency"})}),e.jsx(f,{children:w.map(s=>e.jsxs(d,{value:s.code,children:[s.name," ",s.code]},s.code))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"allowance_category_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select Allowance Category"})}),e.jsx(f,{children:E.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{children:e.jsx(_,{className:"h-[250px] border rounded-lg p-6 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Formula"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"formula",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(G,{placeholder:"Insert formula",...r})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(i,{control:a.control,name:"request_value",render:({field:r})=>e.jsx(l,{children:e.jsx(n,{children:e.jsxs(O,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(l,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"unlimited"})}),e.jsx(j,{className:"text-xs",children:"Unlimited"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"up to max value"})}),e.jsx(j,{className:"text-xs",children:"Up To Max Value"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"fixed value"})}),e.jsx(j,{className:"text-xs",children:"Fixed Value"})]})]})})})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(R,{type:"submit",children:"Save"})})]})})})}export{U as AllowanceType,_e as default};
