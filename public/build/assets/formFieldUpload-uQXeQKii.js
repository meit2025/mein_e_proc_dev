import{r as S,j as e}from"./app-DG0UbLGy.js";import{a as v,C as A}from"./index.esm-Dwgpd8ha.js";import{I}from"./TextField-Dm54xFGW.js";import{F as R}from"./FormHelperText-2iRkCqW_.js";const T=({fieldLabel:i,fieldName:r,isRequired:d=!1,disabled:j=!1,style:y,requiredMessage:F,allowedExtensions:a=[],classNames:h,onFileChangeOutside:u,note:c})=>{const[k,o]=S.useState(null),{control:b,formState:{errors:p},setError:m,clearErrors:g}=v(),C=(l,t)=>{var f;const s=l.target.files?l.target.files[0]:null;if(s){const x=(f=s.name.split(".").pop())==null?void 0:f.toLowerCase();if(a.length>0&&x&&!a.includes(x)){l.target.value="",t(null),o(null),m(r,{type:"manual",message:`Invalid file type. Allowed types: ${a.join(", ")}`});return}const n=new FileReader;n.readAsDataURL(s),n.onload=()=>{typeof n.result=="string"?u&&u(n.result,s.name):m(r,{type:"manual",message:"Failed to read file as Base64"})},n.onerror=()=>m(r,{type:"manual",message:"Failed to read file as Base64"}),g(r),o(s.name),t(s)}else t(null),o(null),g(r)};return e.jsx(A,{name:r,control:b,rules:{required:d?F??`${i} is required`:!1},render:({field:l})=>{var t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:y,className:h,children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 max-w-75",children:i}),e.jsx(I,{type:"file",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",disabled:j,onChange:s=>C(s,l.onChange)})]}),e.jsxs("span",{style:{marginLeft:"6rem",marginTop:"0.5rem",fontSize:"0.75rem"},children:[a.length>0&&e.jsxs(e.Fragment,{children:["Allowed types: ",a.join(", ")]}),e.jsx("br",{}),c&&c,p[r]&&e.jsx(R,{error:!0,children:String((t=p[r])==null?void 0:t.message)})]})]})}})};export{T as F};
