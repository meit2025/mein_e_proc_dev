import{u as A,r as S,j as e}from"./app-uRWqf6mz.js";import{d as V,F as o,a as l,b as n,c,e as j}from"./form-Baj1g4N9.js";import{B as L}from"./button-Cj9113Qv.js";import{o as R,s as i,t as P}from"./types-LVZjFG3Q.js";import{u as G}from"./index.esm-naLgFjEW.js";import{T as D}from"./textarea-CEGYTmjE.js";import{S as _}from"./scroll-area-quDK76cm.js";/* empty css              */import{S as u,a as p,b as f,c as g,d}from"./select-DGJbIT7t.js";import{I as N}from"./input-Bsp0qJGn.js";import{a as y}from"./axiosInstance-DIHC850p.js";import{G as O}from"./api-Bcnus_NZ.js";import{R as B,a as v}from"./radio-group-BZ2kCQQ5.js";import{C as M}from"./api-B_24iBZb.js";import{G as U}from"./api-BG2DVmVj.js";import"./app-DGQxOE2s.js";import"./index-5YQ0p5Ok.js";import"./utils-6c-1N45d.js";import"./index-dKKEklmG.js";import"./index-Cl4Lx6oR.js";import"./index-Bmio8WOz.js";import"./createLucideIcon-DL6vss9c.js";import"./index-hAGEpAjM.js";import"./index-DNAwJ2DJ.js";import"./index-Dujad_d1.js";import"./index-BdQq_4o_.js";import"./index-B4vYLwns.js";import"./index-DJ2zQna1.js";import"./index-BULSGXH8.js";import"./index-C9PPrhLt.js";import"./index-4QINRqyi.js";import"./index-D4x3eUGU.js";import"./index-D7rIDeiQ.js";var W=(a=>(a[a.create=0]="create",a[a.edit=1]="edit",a[a.update=2]="update",a))(W||{});function Ne({onSuccess:a,type:x=0,id:m,listCurrency:w,listAllowanceCategory:E}){var T=R({code:i().min(1,"Code is required"),name:i().min(1,"Name is required"),type:i().min(1,"Type is required"),currency_id:i().min(1,"Currency is required"),formula:i().min(1,"Formula is required"),allowance_category_id:i().min(1,"Allowance Category is required"),request_value:i().min(1,"Required")});let F={code:"",name:"",type:"",currency_id:"",fixed_value:"",max_value:"",request_value:"unlimited",formula:"",allowance_category_id:""};async function I(){let r=O(m);try{let s=await y.get(r);t.reset({code:s.data.data.code,name:s.data.data.name})}catch{}}async function b(r){console.log(r);let s=U(r);try{let h=await y.get(s);console.log(h)}catch(h){console.log(h)}}const t=G({resolver:P(T),defaultValues:F}),{showToast:C}=A(),q=async r=>{console.log(r);try{const s=await y.post(M,r);console.log("response",s),C("success","success"),a==null||a(!0)}catch{a==null||a(!1),C("Please Check the input","error")}};return S.useEffect(()=>{m&&x==1&&I()},[m,x]),e.jsx(_,{className:"h-[600px] w-full",children:e.jsx(V,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:t.control,disabled:x==1,name:"code",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(N,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(N,{type:"text",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Business Purpose Type"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:b,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(f,{placeholder:"Select type"})}),e.jsxs(g,{children:[e.jsx(d,{value:"Day",children:"Day"},"day"),e.jsx(d,{value:"total",children:"Total"},"total")]})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"currency_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(f,{placeholder:"Select Currency"})}),e.jsx(g,{children:w.map(s=>e.jsxs(d,{value:s.code,children:[s.name," ",s.code]},s.code))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"allowance_category_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(f,{placeholder:"Select Allowance Category"})}),e.jsx(g,{children:E.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{children:e.jsx(_,{className:"h-[250px] border rounded-lg p-6 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Formula"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"formula",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(D,{placeholder:"Insert formula",...r})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"request_value",render:({field:r})=>e.jsx(l,{children:e.jsx(n,{children:e.jsxs(B,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(l,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"unlimited"})}),e.jsx(j,{className:"text-xs",children:"Unlimited"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"up to max value"})}),e.jsx(j,{className:"text-xs",children:"Up To Max Value"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"fixed value"})}),e.jsx(j,{className:"text-xs",children:"Fixed Value"})]})]})})})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(L,{type:"submit",children:"Save"})})]})})})}export{W as AllowanceType,Ne as default};
