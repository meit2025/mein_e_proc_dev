import{j as e,r as a,u as Z,a as u,b as ee}from"./app-Cah4gZos.js";import{a as F}from"./axiosInstance-B2FrEcPI.js";import{D as se,b as te,d as ae,L as ie}from"./LoadingSpin-A3cRwBk8.js";import{B as M}from"./button-CunotFV6.js";import{D as re,a as ne,b as le,c as oe,d as N,e as L}from"./dropdown-menu-DMzK1hxY.js";import{e as de}from"./index-5UNkdBC_.js";import{c as T}from"./createLucideIcon-CZVO_9wW.js";import{B as I,a as ce}from"./ListItemText-BGjf13-q.js";import{D as xe}from"./DataGrid-CIZVi0Oh.js";const he=({open:w,onOpenChange:S,onDelete:x,onClose:s,children:$,className:i,isLoading:o,title:r,description:h})=>e.jsx(se,{open:w,onOpenChange:s,children:e.jsxs(te,{className:i||"md:max-w-[768px]",children:[h||"Are you sure delete this item?",e.jsxs(ae,{children:[s?e.jsx(M,{variant:"outline",onClick:s,children:"Close"}):null,x?e.jsx(e.Fragment,{children:o?e.jsx(ie,{}):e.jsx(M,{type:"submit",onClick:x,children:"Delete"})}):null]})]})});/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=T("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Me=({columns:w,buttonCustome:S,onExport:x,url:s,labelFilter:$="Search",onEdit:i,onDelete:o,onDetail:r,defaultSearch:h,actionType:A,buttonActionCustome:b,deleteConfirmationText:R,titleConfirmationText:ge})=>{const[P,H]=a.useState([]),[O,U]=a.useState(!1),[d,V]=a.useState({page:0,pageSize:10}),[m,W]=a.useState([]),[p,_]=a.useState({items:[]}),[D,y]=a.useState(null),[q,z]=a.useState(!1),[G,X]=a.useState(0),[g,E]=a.useState(""),{showToast:k}=Z(),C=a.useCallback(async(t,j,f,c,n)=>{U(!0);const v=c.length>0?c[0].field:"id",Q=c.length>0?c[0].sort:"asc",Y=n.items.map(l=>`${l.field}=${l.operator},${l.value}`).join("&");try{const l=await F.get(`${s.url}${h||"?"}page=${t+1}&per_page=${j}&search=${f}&sort_by=${v}&sort_direction=${Q}&${Y}`);H(l.data.data.data),X(l.data.data.total)}catch(l){console.error("Error fetching data:",l)}finally{U(!1)}},[s]);a.useEffect(()=>{C(d.page,d.pageSize,g,m,p)},[C,p,d,g,m]);const B=async t=>{var j,f,c;z(!0);try{const n=await F.delete(`${s.deleteUrl}/${t}`);k(((j=n==null?void 0:n.data)==null?void 0:j.message)||"Record deleted successfully","success"),z(!1),y(null),o&&await o(t),C(d.page,d.pageSize,g,m,p)}catch(n){if(ee.isAxiosError(n)){const v=((c=(f=n.response)==null?void 0:f.data)==null?void 0:c.message)||"Failed to delete record";k(v,"error")}else k("An unexpected error occurred","error")}},J=t=>{y(t)},K=i||o||r||s.detailUrl||s.editUrl||s.deleteUrl||b?[{field:"actions",headerName:"Actions",width:150,renderCell:t=>e.jsx(e.Fragment,{children:A==="dropdown"?e.jsx(e.Fragment,{children:e.jsxs(re,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"..."}),e.jsx(de,{className:"h-4 w-4"})]})}),e.jsxs(le,{align:"end",children:[e.jsx(oe,{children:"Actions"}),(i||s.editUrl)&&e.jsx(N,{onClick:()=>i&&i(t.row.id),children:e.jsxs("span",{className:"flex items-center text-sm space-x-2",children:[e.jsx("span",{children:"Edit"}),e.jsx(me,{size:14})]})}),e.jsx(L,{}),(s.deleteUrl||o)&&e.jsx(N,{className:"bg-red-400 text-white hover:!bg-red-500 hover:!text-white transition-all duration-300",onClick:()=>J(t.row.id),children:e.jsxs("span",{className:"flex items-center  text-sm space-x-2",children:[e.jsx("span",{children:"Delete"}),e.jsx(pe,{size:14})]})}),e.jsx(L,{}),(r||s.detailUrl)&&e.jsx(N,{onClick:()=>{r&&r(t.row.id),s.detailUrl&&(window.location.href=`${s.detailUrl}/${t.row.id}`)},children:"View details"})]})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",gap:"10px"},children:[(r||s.detailUrl)&&e.jsx(u,{href:`${s.detailUrl}/${t.row.id}`,onClick:()=>r&&r(t.row.id),alt:"detail",children:e.jsx("i",{className:" ki-duotone ki-size text-info text-2xl"})}),(i||s.editUrl)&&e.jsx(u,{href:`${s.editUrl}/${t.row.id}`,onClick:()=>i&&i(t.row.id),alt:"edit",children:e.jsx("i",{className:" ki-duotone ki-notepad-edit text-success text-2xl"})}),(s.deleteUrl||o)&&e.jsx(u,{href:"",onClick:()=>B(t.row.id),alt:"delete",children:e.jsx("i",{className:" ki-duotone ki-trash-square text-danger text-2xl"})}),b]})})})}]:[];return e.jsx(I,{children:e.jsx(I,{sx:{height:"45rem",width:"100%",overflowX:"auto"},children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"grid",children:e.jsxs("div",{className:"card card-grid h-full min-w-full",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:e.jsxs("div",{className:"input input-sm max-w-48",children:[e.jsx("i",{className:"ki-filled ki-magnifier"}),e.jsx("input",{placeholder:$,type:"text",value:g,onChange:t=>E(t.target.value),style:{width:"100%",maxWidth:"200px",marginBottom:"10p"}})]})}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",gap:"10px"},children:[s.addUrl&&e.jsxs(u,{href:s.addUrl??"#",className:"btn btn-success",style:{marginRight:"10px",marginBottom:"10px"},children:[e.jsx("i",{className:"ki-filled ki-additem"}),"Add New"]}),x&&e.jsx(ce,{className:"btn",variant:"contained",onClick:()=>x(),color:"primary",startIcon:e.jsx("i",{className:"ki-filled ki-folder-down"}),style:{marginBottom:"10px"},children:"Export TXT"}),S]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(he,{isLoading:q,description:R,open:D!==null,onClose:()=>{y(null)},onDelete:()=>B(D??0)}),e.jsx("div",{"data-datatable":"true","data-datatable-page-size":d.pageSize,children:e.jsx("div",{className:"scrollable-x-auto",children:e.jsx(xe,{rows:P,columns:[...w,...K],loading:O,paginationMode:"server",rowCount:G,paginationModel:d,onPaginationModelChange:V,pageSizeOptions:[10,20],sortingMode:"server",sortModel:m,onSortModelChange:t=>W(t),filterMode:"server",filterModel:p,onFilterModelChange:t=>_(t)})})})]})]})})})})})};export{he as C,Me as D};
