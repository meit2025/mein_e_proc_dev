import{u as b,r as R,j as e}from"./app-nYBTD1fo.js";import{F as _,a as l,b as i,c,d as m}from"./form-B2JPCxtq.js";import{z as o,t as D}from"./index-C4FlvXrp.js";import{F as x,B as C}from"./button-CA57fXNi.js";import{u as F}from"./index.esm-CzPujvt0.js";import{S as w}from"./scroll-area-B3JJXvHI.js";import{C as f}from"./CustomDatePicker-C1lJCnVR.js";import{I as T}from"./input-CIuB1FEo.js";import{a as p}from"./axiosInstance-DMOvDrDW.js";const h="/api/master/reimburse-period",z=`${h}/list`,v=`${h}/create`,y=s=>`${h}/detail/${s}`;function P({onSuccess:s,type:n=x.create,id:d}){var u=o.object({code:o.string(),start:o.date(),end:o.date()});let E={code:"",start:new Date,end:new Date};async function g(){let r=y(d);try{let t=await p.get(r);a.reset({id:t.data.data.id,code:t.data.data.code})}catch{}}const a=F({resolver:D(u),defaultValues:E}),{showToast:j}=b(),I=async r=>{try{const t=await p.post(v,r);s==null||s(!0),j(t.message,"success")}catch(t){s==null||s(!1),j(t.message,"error")}};return R.useEffect(()=>{d&&n==x.edit&&g()},[d,n]),e.jsx(w,{className:"h-[600px] w-full",children:e.jsx(_,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(I),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(l,{control:a.control,disabled:n==x.edit,name:"code",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(T,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:t=>r.onChange(t.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Start Date"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"start",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(f,{onDateChange:t=>r.onChange(t)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"End Date"}),e.jsx("td",{children:e.jsx(l,{control:a.control,name:"end",render:({field:r})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(f,{onDateChange:t=>r.onChange(t)})}),e.jsx(m,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(C,{type:"submit",children:"Save"})})]})})})}const L=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{z as G,P as R,L as f};
