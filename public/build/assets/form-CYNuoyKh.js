import{u as v,r as y,j as t}from"./app-CdxNz3Fg.js";import{d as I,F as d,a as c,b as l,c as x}from"./form-BWBLWa5s.js";import{z as i,t as M}from"./index-BsUXZaRE.js";import{h as u}from"./moment-C5S46NFB.js";import{B as S}from"./button-WppIiKql.js";import{u as E}from"./index.esm-Daikg2D5.js";import{S as N}from"./scroll-area-D1u7ZKH1.js";import{C as f}from"./CustomDatePicker-x26aTSRR.js";import{I as k}from"./input-l5DUaH8p.js";import{a as h}from"./axiosInstance-CV3C3TkO.js";import{F as m}from"./utils-DIUC5XgE.js";import"./app-DQK4SJPx.js";import"./index-DYADgnKO.js";import"./index-BuUs93Nt.js";import"./index-Bb4qSo10.js";import"./index-BB9GNiFr.js";import"./index-DBWY5eFR.js";import"./index-BhgxcSLd.js";import"./popover-DYasNz9Y.js";import"./Combination-ClosC46z.js";import"./index-DrqB5MPj.js";import"./index-DbXWr8e9.js";import"./createLucideIcon-BQWl9YAp.js";import"./index-CxMJG4Xk.js";function st({onSuccess:o,type:n=m.create,storeURL:D,editURL:g,updateURL:F}){const b=i.object({code:i.string(),start:i.date(),end:i.date()}),w={code:"",start:null,end:null},a=E({resolver:M(b),defaultValues:w});async function C(){try{const r=(await h.get(g)).data.data[0];a.reset({code:r.code,start:new Date(r.start),end:new Date(r.end)})}catch{}}const{showToast:j}=v(),Y=async e=>{var r;try{let s;const p={...e,start:u(e.start).format("YYYY-MM-DD"),end:u(e.end).format("YYYY-MM-DD")};n===m.edit?s=await h.put(F??"",p):s=await h.post(D??"",p),o&&o(!0),j((r=s==null?void 0:s.data)==null?void 0:r.message,"success")}catch(s){o&&o(!1),j(s.message,"error")}};return y.useEffect(()=>{n===m.edit&&C()},[n]),t.jsx(N,{className:"h-[600px] w-full",children:t.jsx(I,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(Y),children:[t.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[t.jsxs("tr",{children:[t.jsxs("td",{width:200,children:["Code ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("td",{children:t.jsx(d,{control:a.control,name:"code",render:({field:e})=>t.jsxs(c,{children:[t.jsx(l,{children:t.jsx(k,{type:"text",placeholder:"Insert code",...e,value:e.value||"",disabled:n==m.edit,onChange:r=>e.onChange(r.target.value)})}),t.jsx(x,{})]})})})]}),t.jsxs("tr",{children:[t.jsx("td",{width:200,children:"Start Date"}),t.jsx("td",{children:t.jsx(d,{control:a.control,name:"start",render:({field:e})=>t.jsxs(c,{children:[t.jsx(l,{children:t.jsx(f,{initialDate:e.value,onDateChange:r=>e.onChange(r)})}),t.jsx(x,{})]})})})]}),t.jsxs("tr",{children:[t.jsx("td",{width:200,children:"End Date"}),t.jsx("td",{children:t.jsx(d,{control:a.control,name:"end",render:({field:e})=>t.jsxs(c,{children:[t.jsx(l,{children:t.jsx(f,{initialDate:e.value,onDateChange:r=>e.onChange(r)})}),t.jsx(x,{})]})})})]})]}),t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(S,{type:"submit",children:"Save"})})]})})})}export{st as default};
