import{r as i,j as a}from"./app-B4pXGI16.js";import{F as d}from"./formInput-DU6bTKGs.js";import{F as y}from"./formSwitch-BqZYrL9W.js";import{a as w,c as u}from"./index.esm-CX0hNNya.js";import"./app-DGQxOE2s.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-CW-YYcMs.js";import"./DefaultPropsProvider-Bp0HVLaz.js";import"./Switch-Bf8sO2t_.js";import"./createSimplePaletteValueFilter-aPV_oOw8.js";import"./SwitchBase-C__OwsaA.js";import"./useControlled-45KGqgG9.js";const U=({disable:c})=>{const{getValues:_,setValue:r,watch:l}=w(),[v,m]=i.useState(!0),x=u({name:"is_cashAdvance"}),p=u({name:"currency_from"});console.log(p);const h=u({name:"vendors"}),g=e=>Array.isArray(e)?e.find(n=>n&&n.winner===!0):null;i.useEffect(()=>{const e=g(h);m(!e)},[h]);const s=l("total_all_amount"),b=e=>{console.log(e);const n=_("vendors").filter(t=>(t.winner||!1)===!0),f=(n.length>0?n[0]:null).units||[],A=f.reduce((t,o)=>t+parseInt(o.total_amount),0);r("total_all_amount",A);const I=f.reduce((t,o)=>o.unit_price>t?parseInt(o.unit_price):t,0);r("amount_max",I);const j=parseInt(e)/100*parseInt(s);r("cash_advance_purchases.nominal",j)};return i.useEffect(()=>{if(s>0){const e=parseInt(l("cash_advance_purchases.dp"))/100*parseInt(s);r("cash_advance_purchases.nominal",e)}},[s]),a.jsxs("div",{children:[p==="IDR"&&a.jsx(y,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:c}),x&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(d,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:c,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>b(e.target.value)}),a.jsx(d,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:c,type:"text",placeholder:"Enter reference"}),a.jsx(d,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:v?"Please Chose The Propose Vendor":""})]})]})};export{U as default};
