import{r as b,u as U,j as e}from"./app-BU72IBan.js";import{F as A,a as n,b as l,c,d}from"./form-CuVdLb2K.js";import{z as i,t as B}from"./index-FN_YMoh4.js";import{B as D}from"./button-Dl1zIadY.js";import{u as L}from"./index.esm-BaTRP5OL.js";import{S as P}from"./scroll-area-A7vbRo35.js";import{S as m,a as h,b as x,c as p,d as j}from"./select-Cmh17MTk.js";import{a as u}from"./axiosInstance-CMx2H2kc.js";import{F as q}from"./utils-coB2I7n8.js";import"./app-wnGHkkFm.js";import"./index-CiXik7WL.js";import"./index-DVzCrD7u.js";import"./index-Bf1Xc0FA.js";import"./index-B4J0Sg_D.js";import"./index-DeqNDWTz.js";import"./index-C6HSi_dC.js";import"./index-BvlNloJV.js";import"./index-BcolYxZq.js";function ae({onSuccess:o,type:g,listPeriodReimburse:S,listUsers:v,storeURL:w,editURL:F,updateURL:z}){const T=i.object({period:i.string("Period must choose"),type:i.string("Type must choose"),user:i.string("User must choose")}),C={period:"",type:"",user:""},a=L({resolver:B(T),defaultValues:C}),[N,V]=b.useState([]);async function f(s){const r=`/api/master/reimburse-quota/selection_grade/${s}`;try{const I=(await u.get(r)).data.data;V(I)}catch{}a.setValue("user",s)}async function R(){try{const r=(await u.get(F)).data.data[0];await f(r.user),a.reset({period:r.period,user:r.user,type:r.type})}catch{}}const{showToast:y}=U(),E=async s=>{var r;try{const t=await u.post(w,s);o==null||o(!0),y((r=t==null?void 0:t.data)==null?void 0:r.message,"success")}catch(t){o==null||o(!1),y(t.message,"error")}};return b.useEffect(()=>{g===q.edit&&R()},[g]),e.jsx(P,{className:"h-[600px] w-full",children:e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(E),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(n,{control:a.control,name:"period",render:({field:s})=>{var r;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>s.onChange(t),value:(r=s.value)==null?void 0:r.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(p,{children:S.map(t=>e.jsxs(j,{value:t.id.toString(),children:[t.start," - ",t.end]},t.id))})]})}),e.jsx(d,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"User"}),e.jsx("td",{children:e.jsx(n,{control:a.control,name:"user",render:({field:s})=>{var r;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>f(t),value:(r=s.value)==null?void 0:r.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(p,{children:v.map(t=>e.jsxs(j,{value:t.id.toString(),children:["(",t.nip,") ",t.name]},t.id.toString()))})]})}),e.jsx(d,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(n,{control:a.control,name:"type",render:({field:s})=>{var r;return e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs(m,{onValueChange:t=>s.onChange(t),value:(r=s.value)==null?void 0:r.toString(),children:[e.jsx(h,{className:"w-[200px]",children:e.jsx(x,{placeholder:"-"})}),e.jsx(p,{children:N.map(t=>e.jsx(j,{value:t.id.toString(),children:t.name},t.id))})]})}),e.jsx(d,{})]})}})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(D,{type:"submit",children:"Save"})})]})})})}export{ae as default};
