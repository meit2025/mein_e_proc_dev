import{r as y,u as L,j as e}from"./app-IQwIjIau.js";import{F as P,a as o,b as i,c,d}from"./form-B2mg5zRK.js";import{z as l,t as B}from"./index-BxkK7xV6.js";import{F as h,B as V}from"./button-Y24lxrSy.js";import{u as q}from"./index.esm-BNAaWfT5.js";import{S as G}from"./scroll-area-CulWtV1S.js";import{S as j,a as p,b as g,c as _,d as m}from"./select-BLw5suOl.js";import{I as E}from"./input-BAlMeipZ.js";import{a as w}from"./axiosInstance-hLWWsmsQ.js";import{u as S}from"./getDropdown-Cqc-xHi-.js";import{L as O}from"./Loading-C6r14z1L.js";const b="/api/master/reimburse-type",se=`${b}/`,U=`${b}/create`,$=t=>`${b}/detail/${t}`;function Y({onSuccess:t,type:u=h.create,id:x,listMaterial:z}){const C=l.object({code:l.string().min(1,"Code is required"),name:l.string().min(1,"Name is required"),is_employee:l.boolean(),material_group:l.string().min(1,"Material group required"),material_number:l.string().min(1,"Material number required")}),{dataDropdown:I,getDropdown:F}=S(),{dataDropdown:T,getDropdown:M}=S(),[N,f]=y.useState(!1),R={code:"",name:"",is_employee:!0};async function D(){const a=$(x);try{const r=await w.get(a);s.reset({code:r.data.data.code,name:r.data.data.name})}catch{}}const s=q({resolver:B(C),defaultValues:R}),{showToast:v}=L(),A=async a=>{var r;f(!0);try{const n=await w.post(U,a);console.log("ini respone",n),t&&t(!0),v((r=n==null?void 0:n.data)==null?void 0:r.message,"success")}catch(n){t&&t(!1),v(n.message,"error")}f(!1)};return y.useEffect(()=>{x&&u===h.edit&&D(),F("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),M("",{name:"material_number",id:"material_number",tabel:"master_materials"})},[x,u]),e.jsxs(G,{className:"h-[600px] w-full",children:[e.jsx(O,{isLoading:N}),e.jsx(P,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(A),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:s.control,disabled:u===h.edit,name:"code",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(E,{type:"text",placeholder:"Insert code",...a,value:a.value||"",onChange:r=>a.onChange(r.target.value)})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(o,{control:s.control,name:"name",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsx(E,{type:"text",...a,value:a.value||"",onChange:r=>a.onChange(r.target.value)})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"For"}),e.jsx("td",{children:e.jsx(o,{control:s.control,name:"is_employee",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r==="true"),value:a.value?"true":"false",children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsxs(_,{children:[e.jsx(m,{value:"true",children:"Employee"},"is_employee"),e.jsx(m,{value:"false",children:"Family"},"is_employee")]})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Group"}),e.jsx("td",{children:e.jsx(o,{control:s.control,name:"material_group",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r),value:a.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(_,{children:I.map(r=>e.jsx(m,{value:r.value,children:r.label},r.id))})]})}),e.jsx(d,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Material Number"}),e.jsx("td",{children:e.jsx(o,{control:s.control,name:"material_number",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(j,{onValueChange:r=>a.onChange(r),value:a.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"-"})}),e.jsx(_,{children:T.map(r=>e.jsx(m,{value:r.value,children:r.label},r.value))})]})}),e.jsx(d,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(V,{type:"submit",children:"Save"})})]})})]})}const te=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{se as L,Y as R,te as f};
