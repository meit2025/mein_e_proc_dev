import{r as c,u as v,j as e}from"./app-J3C_gNYK.js";import{F as A}from"./form-CfE7Jfyn.js";import{z as o,t as E}from"./index-D-lnPlpe.js";import{B as V}from"./button-CGaoiNOe.js";import{u as B}from"./index.esm-BvbBLOu8.js";import{S as M}from"./scroll-area-Cc0rEE6R.js";import{F as h}from"./formDropdown-DnZo0FH_.js";import{u as f}from"./getDropdown-dOHWYze0.js";import{a as d}from"./axiosInstance-Bk-VVKCf.js";import{F as l}from"./utils-DDnST7vQ.js";import{M as U}from"./MultiSelect-Wm6mYoSY.js";import"./app-HlhieNAw.js";import"./index-BaRfinAe.js";import"./TextField-KvLBo3hO.js";import"./useSlot-0QiNM37_.js";import"./FormHelperText-zSIJQ4rc.js";import"./createSimplePaletteValueFilter-DSc7jG2e.js";import"./index-HQg32Fnt.js";import"./checkbox-Cn-xg2ki.js";import"./index-DhosLwU9.js";import"./index-CKkiX__k.js";import"./index-8ThcBMYR.js";function ae({onSuccess:i,type:m=l.create,listUser:b,storeURL:x,editURL:j,updateURL:y}){const[w,g]=c.useState([]),{dataDropdown:R,getDropdown:n}=f(),{dataDropdown:F,getDropdown:p}=f(),N=o.object({period:o.number("Period must choose"),type:o.number("Type must choose"),users:o.array(o.number().optional())}),T={period:null,type:null,users:[]},a=B({resolver:E(N),defaultValues:T});async function _(){try{const r=(await d.get(j)).data.data;a.reset({period:r.period.toString(),type:r.type.toString(),users:r.users})}catch{}}const{showToast:u}=v(),D=async t=>{var r;try{let s;m===l.edit?s=await d.put(y??"",t):s=await d.post(x??"",t),i==null||i(!0),u((r=s==null?void 0:s.data)==null?void 0:r.data,"success")}catch(s){i==null||i(!1),u(s.message,"error")}},S=async t=>{t.length>0&&n(t,{name:"code",id:"id",tabel:"master_type_reimburses"})},P=async t=>{t.length>0&&p(t,{name:"start",id:"id",tabel:"master_period_reimburses"})};return c.useEffect(()=>{n("",{name:"code",id:"id",tabel:"master_type_reimburses"}),p("",{name:"start",id:"id",tabel:"master_period_reimburses"}),m===l.edit&&_(),g(b)},[m]),e.jsx(M,{className:"h-[600px] w-full",children:e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(D),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(h,{options:F,fieldName:"period",isRequired:!0,disabled:!1,placeholder:"Reimburse Period",onSearch:P,classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Users ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(U,{onSelect:t=>{a.setValue("users",t.map(r=>r.id))},value:a.getValues("users"),id:"id",label:"name",options:w})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(h,{options:R,fieldName:"type",isRequired:!0,disabled:!1,placeholder:"Reimburse Type",onSearch:S,classNames:"mt-2 w-full"})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(V,{type:"submit",children:"Save"})})]})})})}export{ae as default};
