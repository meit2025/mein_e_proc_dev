import{u as A,j as e}from"./app-BIOi_O7g.js";import{z as a,F as S,a as i,b as n,d as t,I as h,e as c,c as o,t as T}from"./index-xVSCDvl5.js";import{B as R}from"./button-D9RCpmB9.js";import{u as G,b as L}from"./index.esm-BVoG1Nd3.js";import{T as E}from"./textarea-B3h3MJF8.js";import{S as f}from"./scroll-area-D2vZFU-X.js";import{S as m,a as u,b as p,c as g,d as j}from"./select-BQEeHfE3.js";import{a as M}from"./axiosInstance-DV-uprs0.js";import{R as y,a as x}from"./radio-group-B1_1TYJd.js";import{C as P}from"./api-DCFLeO7i.js";import{M as B}from"./MultiSelect-OD_GGiRT.js";/* empty css            */import"./index-Dox7fKga.js";import"./react-icons.esm-Bx38emjL.js";import"./Combination-v-JBI_-j.js";import"./index-CTfkAyHj.js";import"./index-CUsis8Jc.js";import"./index-B1DW66uR.js";var D=(d=>(d[d.create=0]="create",d[d.edit=1]="edit",d[d.update=2]="update",d))(D||{});function te({onSuccess:d,type:C=0,id:O,listCurrency:_,listAllowanceCategory:N,listGrade:b}){var w=a.object({code:a.string().min(1,"Code is required"),name:a.string().min(1,"Name is required"),type:a.string().min(1,"Type is required"),currency_id:a.string().min(1,"Currency is required"),formula:a.string().min(1,"Formula is required"),allowance_category_id:a.string().min(1,"Allowance Category is required"),request_value:a.string().min(1,"Required"),grade_option:a.string().min(1,"Grade must be selected"),grade_all_price:a.string().optional(),grades:a.array(a.object({grade:a.string(),id:a.number(),plafon:a.string()}))});let V={code:"",name:"",type:"",currency_id:"",formula:"",allowance_category_id:"",request_value:"unlimited",grade_option:"all",grade_all_price:"0",grades:[]};const l=G({resolver:T(w),defaultValues:V}),{fields:F}=L({control:l.control,name:"grades"}),{showToast:v}=A(),I=async r=>{console.log(r);try{const s=await M.post(P,r);console.log("response",s),v("success","success"),d==null||d(!0)}catch{d==null||d(!1),v("Please Check the input","error")}};return e.jsx(f,{className:"h-[600px] w-full",children:e.jsx(S,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(I),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:l.control,disabled:C==1,name:"code",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsx(h,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"name",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsx(h,{type:"text",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"type",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsxs(m,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select type"})}),e.jsxs(g,{children:[e.jsx(j,{value:"daily",children:"DAILY"},"DAILY"),e.jsx(j,{value:"total",children:"Total"},"TOTAL")]})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"currency_id",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsxs(m,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select Currency"})}),e.jsx(g,{children:_.map(s=>e.jsxs(j,{value:s.code,children:[s.name," ",s.code]},s.code))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"allowance_category_id",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsxs(m,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"Select Allowance Category"})}),e.jsx(g,{children:N.map(s=>e.jsx(j,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{children:e.jsx(f,{className:"h-[250px] border rounded-lg p-6 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Formula"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"formula",render:({field:r})=>e.jsxs(n,{children:[e.jsx(t,{children:e.jsx(E,{placeholder:"Insert formula",...r})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsxs("td",{children:[e.jsx(i,{control:l.control,name:"grade_option",render:({field:r})=>e.jsx(n,{children:e.jsx(t,{children:e.jsxs(y,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(n,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(x,{value:"all"})}),e.jsx(o,{className:"text-xs",children:"All"})]}),e.jsxs(n,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(x,{value:"grade"})}),e.jsx(o,{className:"text-xs",children:"Grade"})]})]})})})}),l.getValues("grade_option")=="all"?e.jsx("div",{children:e.jsx(i,{control:l.control,name:"grade_all_price",render:({field:r})=>e.jsx(n,{children:e.jsx(t,{children:e.jsx(h,{...r})})})})}):e.jsx("div",{children:e.jsx(B,{label:"grade",id:"id",options:b,value:l.getValues("grades"),onSelect:r=>{l.setValue("grades",r.map(s=>({id:s.id,grade:s.grade,price:0})))}})}),l.getValues("grade_option")=="grade"?e.jsx("div",{className:"mt-4",children:e.jsx("table",{children:F.map((r,s)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["Grade ",r.grade]}),e.jsx("td",{children:":"}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(i,{control:l.control,name:`grades.${s}.plafon`,render:({field:q})=>e.jsx(n,{children:e.jsx(t,{children:e.jsx(h,{...q})})})})})})]}))})}):null]})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(i,{control:l.control,name:"request_value",render:({field:r})=>e.jsx(n,{children:e.jsx(t,{children:e.jsxs(y,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(n,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(x,{value:"unlimited"})}),e.jsx(o,{className:"text-xs",children:"Unlimited"})]}),e.jsxs(n,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(x,{value:"up to max value"})}),e.jsx(o,{className:"text-xs",children:"Up To Max Value"})]}),e.jsxs(n,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(x,{value:"fixed value"})}),e.jsx(o,{className:"text-xs",children:"Fixed Value"})]})]})})})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(R,{type:"submit",children:"Save"})})]})})})}export{D as AllowanceType,te as default};
