import{r as g,j as e}from"./app-BU72IBan.js";import{F as I,a as d,b as h,c as x,d as j}from"./form-CuVdLb2K.js";import{z as m,t as S}from"./index-FN_YMoh4.js";import{B as A}from"./button-Dl1zIadY.js";import{u as V,b as _}from"./index.esm-BaTRP5OL.js";import{S as D}from"./scroll-area-A7vbRo35.js";import{S as R}from"./separator-BewCvE_N.js";import{T as $,a as M,b as P,c as q}from"./tabs-Bq3g03xK.js";import{S as f,a as y,b as F,c as b,d as p}from"./select-Cmh17MTk.js";import{C as B}from"./CustomDatePicker-BOUyHWe5.js";import{I as H}from"./input-GknyCmlY.js";import{a as L}from"./axiosInstance-CMx2H2kc.js";import{F as W}from"./utils-coB2I7n8.js";import"./app-wnGHkkFm.js";import"./index-CiXik7WL.js";import"./index-jq9FCCAA.js";import"./index-Bf1Xc0FA.js";import"./index-DeqNDWTz.js";import"./index-C6HSi_dC.js";import"./index-DVzCrD7u.js";import"./index-B4J0Sg_D.js";import"./index-BvlNloJV.js";import"./createLucideIcon-CJV1not7.js";import"./index-BcolYxZq.js";const k="/api/master/family",z=`${k}/create`,be=({onSuccess:t,type:i=W.create,id:o,user:s})=>{const r=m.object({user:m.string().min(1,"Choose Employee is Required"),total_family:m.number().min(1,"Total Family is Required"),families:m.array(m.object({status:m.string().min(1,"Type Family is Must Choose"),bod:m.date(),name:m.string().min(1,"Name Family is Required")}))}),[u,v]=g.useState("1"),w=async l=>{try{const a=await L.post(z,l);t==null||t(!0),C(a.message,"success")}catch(a){t==null||t(!1),C(a.message)}},n=V({resolver:S(r),defaultValues:{user:"",total_family:1,families:[{status:"",bod:new Date,name:""}]}}),T=l=>{v(l)};function N(){let l=[],a=parseInt(u);for(let c=0;c<a;c++)l.push({family:""});n.setValue("families",l)}const{fields:E,append:U,remove:Y,update:G}=_({control:n.control,name:"families"});return g.useEffect(()=>{N()},[u,o,i]),e.jsx(D,{className:"h-[600px] w-full ",children:e.jsx(I,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(w),children:[e.jsxs("table",{className:"text-xs mt-4 reimburse-form-table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Employee Name"}),e.jsx("td",{children:e.jsx(d,{control:n.control,name:"user",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{onValueChange:a=>l.onChange(a),value:l.value,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:s.map(a=>e.jsx(p,{value:a.nip,children:a.name},a.nip))})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Total Destination"}),e.jsxs("td",{children:[" ",e.jsx(d,{control:n.control,name:"total_family",render:({field:l})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{value:u,onValueChange:T,children:[e.jsx(y,{className:"w-[200px] py-2",children:e.jsx(F,{placeholder:"-"})}),e.jsx(b,{children:Array.from({length:5},(a,c)=>e.jsxs(p,{value:(c+1).toString(),children:[" ",c+1," "]}))})]})}),e.jsx(j,{})]})})]})]})]}),e.jsx(R,{className:"my-4"}),e.jsx(J,{form:n,familyField:E,totalFamily:n.getValues("total_family").toString()}),e.jsx(A,{type:"submit",children:"submit"})]})})})};function J({form:t,familyField:i,totalFamily:o}){return e.jsxs($,{defaultValue:"family1",className:"w-full",children:[e.jsx(M,{className:"flex items-center justify-start space-x-4",children:i.map((s,r)=>e.jsxs(P,{value:`family${r+1}`,children:["Member - ",r+1]}))}),i.map((s,r)=>e.jsx(O,{form:t,index:r}))]})}function O({family:t,form:i,index:o}){return e.jsx(q,{value:`family${o+1}`,children:e.jsx("div",{children:e.jsxs("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${o}.name`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(H,{type:"text",placeholder:"John Doe",...s,value:s.value||"",onChange:r=>s.onChange(r.target.value)})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Family Type"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${o}.status`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(f,{onValueChange:r=>s.onChange(r),value:s.value,children:[e.jsx(y,{className:"w-[200px]",children:e.jsx(F,{placeholder:"Child / Wife"})}),e.jsxs(b,{children:[e.jsx(p,{value:"wife",children:"Wife"}),e.jsx(p,{value:"child",children:"Child"})]})]})}),e.jsx(j,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Birth of Date"}),e.jsx("td",{children:e.jsx(d,{control:i.control,name:`families.${o}.bod`,render:({field:s})=>e.jsxs(h,{children:[e.jsx(x,{children:e.jsx(B,{onDateChange:r=>s.onChange(r)})}),e.jsx(j,{})]})})})]})]})},o)})}function C(t,i){throw new Error("Function not implemented.")}export{O as FamilyForm,be as FamilyHeaderForm,J as TabFamily};
