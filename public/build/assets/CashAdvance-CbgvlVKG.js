import{r as o,j as a}from"./app-Dpg2tFWv.js";import{F as l}from"./formInput-Dmpr1n9-.js";import{F as R}from"./formSwitch-DQpS7EYi.js";import{a as w,c as m}from"./index.esm-C0U1qMN8.js";import"./app-DQK4SJPx.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-D6YP5fWN.js";import"./DefaultPropsProvider-a4XMRcUW.js";import"./Switch-DUVm1cUc.js";import"./createSimplePaletteValueFilter-B5YYTZf6.js";import"./SwitchBase-CM752Y3n.js";import"./useControlled-CzBgKcYQ.js";const T=({disable:i})=>{const{getValues:_,setValue:n,watch:u}=w(),[v,h]=o.useState(!0),x=m({name:"is_cashAdvance"}),d=m({name:"currency_from"}),p=m({name:"vendors"}),b=e=>Array.isArray(e)?e.find(s=>s&&s.winner===!0):null;o.useEffect(()=>{const e=b(p);h(!e)},[p]);const t=u("total_all_amount"),g=e=>{console.log(e);const s=_("vendors").filter(r=>(r.winner||!1)===!0),f=(s.length>0?s[0]:null).units||[],A=f.reduce((r,c)=>r+parseInt(c.total_amount),0);n("total_all_amount",A);const I=f.reduce((r,c)=>c.unit_price>r?parseInt(c.unit_price):r,0);n("amount_max",I);const y=parseInt(e)/100*parseInt(t);n("cash_advance_purchases.nominal",y)};return o.useEffect(()=>{if(t>0){const e=parseInt(u("cash_advance_purchases.dp"))/100*parseInt(t);n("cash_advance_purchases.nominal",e)}},[t]),o.useEffect(()=>{const e=u((s,{name:j})=>{d!=="IDR"&&(n("is_cashAdvance",!1),n("entertainment.jenis_kegiatan",""),n("cash_advance_purchases.dp",""),n("cash_advance_purchases.reference",""),n("cash_advance_purchases.nominal",""))});return()=>e.unsubscribe()},[d]),a.jsx("div",{children:d==="IDR"&&a.jsxs(a.Fragment,{children:[a.jsx(R,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:i}),x&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(l,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:i,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>g(e.target.value)}),a.jsx(l,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:i,type:"text",placeholder:"Enter reference"}),a.jsx(l,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:v?"Please Chose The Propose Vendor":""})]})]})})};export{T as default};
