import{j as e,r as F,u as ze,q as Oe}from"./app-DUlwZBBP.js";import{B as Ye}from"./button-CFta8WoG.js";import{z as m,t as We}from"./index-Bt5lDnRA.js";import{f as V}from"./rupiahCurrencyFormat-CP-6egij.js";import{d as Ze,F as w,a as v,b as C,c as N,f as Je,e as He}from"./form-BXaA30j4.js";import{u as Ke,b as Xe}from"./index.esm-prWbEDG0.js";import{T as ce}from"./textarea-iU4Y0W5k.js";/* empty css                  */import{S as Qe}from"./scroll-area-uNga_ejK.js";import{a as T}from"./axiosInstance-klNPWXfx.js";import{S as me}from"./separator-B3xfDYlw.js";import{T as Ue,a as es,b as ss,c as ts}from"./tabs-BvCFBUvj.js";import{S as B,a as P,b as G,c as M,d as z}from"./select-_jl66IeO.js";import{F as J}from"./formDropdown-CUvX1qzS.js";import{C as de}from"./CustomDatePicker-DjdGNbHg.js";import{I as ue}from"./input-Byx9B1XW.js";import{ReimburseFormType as f}from"./listModel-DUCXW7VT.js";import{u as O}from"./getDropdown-DEuims_B.js";import{G as rs,a as pe,b as as}from"./api-DXF7erOJ.js";import{L as ns}from"./LoadingSpin-YRbEAk57.js";import{W as os}from"./WorkflowComponent-Dw0S5mZf.js";import{C as ls}from"./CustomStatus-BX_S5kFp.js";import{B as is}from"./Button-D9V-gb64.js";import"./app-DQK4SJPx.js";import"./index-BaZXhAAe.js";import"./index-Bb4qSo10.js";import"./utils-esySLUJ2.js";import"./index-DCTToA8c.js";import"./index-BQ4yfOTT.js";import"./index-BjVBc_oH.js";import"./index-B9tXHXIN.js";import"./index-BydoZ21u.js";import"./index-Cmw56e_i.js";import"./index-CjHWWDui.js";import"./index-B5Q5h62I.js";import"./Combination-E8o78PVR.js";import"./index-mgRcWngF.js";import"./TextField-CKxzUyeA.js";import"./createSvgIcon-DGSbdwcc.js";import"./DefaultPropsProvider-DQqzBCyA.js";import"./useSlot-DzErYehF.js";import"./createSimplePaletteValueFilter-wdA-2f5l.js";import"./useControlled-CWfq6Ug4.js";import"./FormHelperText-D1a_K-Xi.js";import"./createLucideIcon-QjNjJW5i.js";function cs({isLoading:H=!1,children:K}){return e.jsx("div",{className:"",children:H?e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-64 w-full flex justify-center items-center",children:e.jsx(ns,{})})}):K})}const at=({onSuccess:H,currencies:K,taxDefaultValue:ee,uomDefaultValue:se,categories:ms,users:ds,edit_url:he,update_url:fe,store_url:ge,type:h,currentUser:E})=>{const[je,xe]=F.useState("form1"),{showToast:R}=ze();Oe().props;const{dataDropdown:_e,getDropdown:te}=O(rs),{dataDropdown:be,getDropdown:ye}=O(),{dataDropdown:we,getDropdown:ve}=O(),{dataDropdown:Ce,getDropdown:re}=O("api/master-pr/purchasing-group/dropdown-list"),{dataDropdown:Ne,getDropdown:ae}=O("api/master/cost-center/dropdown-list"),[L,ne]=F.useState([]),[Se,X]=F.useState([]),[D,Fe]=F.useState(!1),[oe,De]=F.useState(!1),[Ee,Y]=F.useState(!1),[x,k]=F.useState([]),[$,Ie]=F.useState({approvalRequest:[],approvalFrom:[],acknowledgeFrom:[],approvalFromStatusRoute:[]}),Te=1*1024*1024,qe=["image/jpeg","image/png","application/pdf","image/heic","image/heif"],Re=m.object({formCount:m.string().min(1,"total form must be have value"),remark_group:m.string().optional(),cost_center:m.string().min(1,"cost center required"),requester:m.string().min(1,"requester required"),value:m.number().optional(),user_id:m.string().optional(),forms:m.array(m.object({reimburseId:m.string().optional(),for:m.string().optional(),group:m.string().optional(),reimburse_type:m.string().min(1,"reimburse type is required"),short_text:m.string().min(1,"remarks is required"),balance:m.string().min(1,"balance required"),currency:m.string().min(1,"currency required"),tax_on_sales:m.string().min(1,"tax required"),purchase_requisition_unit_of_measure:m.string().min(1,"uom required"),purchasing_group:m.string().min(1,"Purchasing Group required"),type:m.any(),item_delivery_data:m.date(),claim_date:m.date(),attachment:m.array(m.instanceof(File).refine(t=>qe.includes(t.type),{message:"File type must be JPG, JPEG, PNG, HEIC, or PDF"}).refine(t=>t.size<=Te,{message:"File size must be less than 1MB"})).min(h===f.create?1:0,"Attachment is required")}))});F.useEffect(()=>{ve("",{name:"mwszkz",id:"id",tabel:"pajaks",where:{key:"mwszkz",parameter:"V0"}}),ye("",{name:"unit_of_measurement_text",id:"id",tabel:"uoms",where:{key:"iso_code",parameter:"PCE"}}),re("",{name:"purchasing_group_desc",id:"id",tabel:"purchasing_groups",idType:"string"}),ae("",{name:"cost_center",id:"id",tabel:"master_cost_centers",idType:"string"}),te("",{name:"name",id:"nip",tabel:"users"}),n.getValues("requester")!==""&&W(0)},[]);const ke={formCount:"1",remark_group:"test",cost_center:"",requester:String(E==null?void 0:E.is_admin)==="1"?"":E==null?void 0:E.nip,forms:[{reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:ee,purchase_requisition_unit_of_measure:se,purchasing_group:"",type:"",item_delivery_data:new Date,claim_date:new Date,attachment:[]}]},n=Ke({resolver:We(Re),defaultValues:ke}),{fields:Q,update:b}=Xe({control:n.control,name:"forms"});async function Ae(){n.setValue("forms",[]),Y(!0);try{const t=await T.get(he??""),s=t.data.data.group,o=t.data.data.forms;Fe(s.reimbursementStatus);const c=o.map(a=>({reimburseId:String(a.id),for:String(a.for),group:String(a.group),reimburse_type:a.reimburse_type.code,short_text:a.short_text,balance:h===f.edit?a.balance:"",currency:a.currency,tax_on_sales:String(a.tax_on_sales),purchase_requisition_unit_of_measure:String(a.purchase_requisition_unit_of_measure),purchasing_group:String(a.purchasing_group),type:a.type,item_delivery_data:new Date(a.item_delivery_data),claim_date:new Date(a.claim_date),attachment:[]}));n.setValue("formCount",o.length.toString()),n.setValue("remark_group",s.remark),n.setValue("cost_center",String(s.cost_center.id)),n.setValue("requester",s.requester);let i=0;for(const a of o)await W(i,{reimburse_type:a.reimburse_type.code}),await le(i,{type:a.type,reimburse_type:a.reimburse_type.code}),await U(i,{reimburse_type:a.reimburse_type.code}),i++;n.setValue("forms",c),Y(!1)}catch{Y(!1)}}F.useEffect(()=>{(h===f.edit||h===f.clone)&&(Y(!0),Ae())},[h]);const Le=async t=>{t.length>0&&te("",{name:"name",id:"nip",tabel:"users"})},W=async(t,s=null)=>{const o=await T.get(pe,{params:{user:n.getValues("requester"),hasValue:s!=null?s.reimburse_type:null},headers:{"Content-Type":"application/json"}});ne(c=>{const i=[...c];return i[t]=o.data.data,i})},$e=async(t,s)=>{if(t&&t.length>0)try{const o=await T.get(pe,{params:{search:t,user:n.getValues("requester")}});ne(c=>{const i=[...c];return i[s]=o.data.data,i})}catch(o){console.error("Error searching reimburse types:",o)}},le=async(t,s)=>{const o=await T.get(as,{params:{user:n.getValues("requester"),familyRelationship:s.type=="Family"?"0":"1",reimburseType:s.reimburse_type},headers:{"Content-Type":"application/json"}});X(c=>{const i=[...c];return i[t]=o.data.data,i})},Ve=t=>{for(let s=0;s<Q.length;s++)W(s);if(t==null)for(let s=0;s<Q.length;s++)n.setValue(`forms.${s}.reimburse_type`,""),n.setValue(`forms.${s}.for`,"");k([]),X([])};function Be(t){const s=[...n.getValues("forms")];for(let o=0;o<parseInt(t);o++)if(o+1>s.length){W(o);const c={reimburseId:"",for:"",group:"",reimburse_type:"",short_text:"",balance:"",currency:"IDR",tax_on_sales:ee,purchase_requisition_unit_of_measure:se,purchasing_group:"",type:"",item_delivery_data:new Date,claim_date:new Date,attachment:[]};s.push(c)}n.setValue("forms",s)}const Pe=t=>{xe(t)},Ge=async t=>{var o,c,i,a;if(x)for(let r=0;r<x.length;r++){if(t.forms.length==0||t.forms.length-1,parseInt((o=x[r])==null?void 0:o.limit)==0){R("Claim Limit for form "+r+" is Empty, Please Contact the Admin","error");return}if(parseInt(((c=x[r])==null?void 0:c.balance)??0)<parseInt(t.forms[r].balance??0)){R("Please check your balance input for forms "+(r+1)+"  is not must be above "+((i=x[r])==null?void 0:i.balance),"error");return}}const s=t.forms.reduce((r,d)=>r+parseInt(d.balance)||0,0);t.value=s,t.user_id=(t==null?void 0:t.requester)||"0";try{let r;h===f.edit?r=await T.put(fe??"",t,{headers:{"Content-Type":"multipart/form-data"}}):r=await T.post(ge??"",t,{headers:{"Content-Type":"multipart/form-data"}}),R((a=r==null?void 0:r.data)==null?void 0:a.data,"success"),H()}catch{}};async function U(t,s=null){var i,a;const o=n.getValues(`forms.${t}`),c={user:n.getValues("requester"),reimbuse_type:s!=null?s.reimburse_type:o.reimburse_type};try{const r=await T.get("reimburse/data-limit-and-balance",{params:c});k(d=>{const l=n.getValues("forms").filter((y,g)=>g!==t&&y.reimburse_type===o.reimburse_type).reduce((y,g)=>y+parseInt(g.balance)||0,0),S=[...d];return S[t]={...r.data.data,balance:r.data.data.balance-l,limit:Math.max(0,r.data.data.limit-(t>0?1:0))},S})}catch(r){R((a=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:a.message,"error")}}const ie=async()=>{var t,s,o,c,i,a,r,d,u,p,l,S;try{const g=n.getValues("forms").map((j,q)=>({index:q,value:j.balance?parseInt(j.balance):0}));if(g.some(j=>j.value===0)){const j=g.findIndex(q=>q.value===0);R(`Please fill the balance for form ${j+1}`,"error");return}const _=await T.get("/check-approval",{params:{value:g==null?void 0:g[0].value,requester:n.getValues("requester"),type:"REIM"}});if(_.data.status_code===200){const j=(s=(t=_.data)==null?void 0:t.data)==null?void 0:s.approval.map(I=>(I==null?void 0:I.division_name)||null),q=(c=(o=_.data)==null?void 0:o.data)==null?void 0:c.approval.map(I=>(I==null?void 0:I.name)||null),A=[];(a=(i=_.data)==null?void 0:i.data)!=null&&a.hr&&A.push((u=(d=(r=_.data)==null?void 0:r.data)==null?void 0:d.hr)==null?void 0:u.name);const Me=(((p=_.data.data)==null?void 0:p.approval)??[]).map(I=>({status:"",name:I.name,dateApproved:""}));Ie({approvalRequest:j,approvalFrom:q,acknowledgeFrom:A,approvalFromStatusRoute:Me}),De(!0)}}catch(y){R((S=(l=y==null?void 0:y.response)==null?void 0:l.data)==null?void 0:S.message,"error")}};return F.useEffect(()=>{n.getValues("forms").reduce((o,c)=>o+parseInt(c.balance)||0,0)>0&&oe===!0&&ie()},[n.watch("forms"),n.watch("requester")]),e.jsx(Qe,{className:"h-[600px] w-full",children:e.jsx(cs,{isLoading:Ee,children:e.jsx(Ze,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(Ge),children:[e.jsx("table",{className:"text-xs mt-4 reimburse-form-table font-thin w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Request Status"}),e.jsx("td",{children:D&&e.jsx(ls,{name:D==null?void 0:D.name,className:D==null?void 0:D.classname,code:D==null?void 0:D.code})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:"remark_group",render:({field:t})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(ce,{placeholder:"Insert remark",...t})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Cost Center"}),e.jsx("td",{children:e.jsx(J,{fieldLabel:"",options:Ne,fieldName:"cost_center",disabled:h===f.edit,placeholder:"Cost Center",classNames:"mt-2 w-full",onChangeOutside:async(t,s)=>{t.length>0&&t!==(s==null?void 0:s.value)&&ae(t,{name:"cost_center",id:"id",tabel:"master_cost_centers",idType:"string",search:t})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Employee"}),e.jsx("td",{children:e.jsx(J,{options:_e,fieldName:"requester",isRequired:!0,disabled:String(E==null?void 0:E.is_admin)==="0"||h===f.edit,placeholder:"Select Employee",onSearch:Le,onChangeOutside:t=>Ve(t),classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Number of Forms"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:"formCount",render:({field:t})=>{var s;return e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(B,{disabled:h===f.edit,onValueChange:o=>{t.onChange(o),Be(o)},value:(s=t.value)==null?void 0:s.toString(),children:[e.jsx(P,{className:"w-[200px]",children:e.jsx(G,{placeholder:"Select number of forms"})}),e.jsx(M,{children:Array.from({length:3},(o,c)=>c+1).map(o=>e.jsx(z,{value:o.toString(),children:o},o))})]})}),e.jsx(N,{})]})}})})]})]})}),e.jsx(me,{className:"my-4"}),e.jsxs(Ue,{value:je,onValueChange:Pe,className:"w-full",children:[e.jsxs(es,{className:"flex items-center justify-start space-x-4",children:[" ",Array.from({length:n.watch("formCount")||1}).map((t,s)=>e.jsxs(ss,{value:`form${s+1}`,children:["Form ",s+1]},s))]}),Q.map((t,s)=>{var o,c,i;return e.jsxs(ts,{value:`form${s+1}`,children:[e.jsx(w,{control:n.control,name:`forms.${s}.reimburseId`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(ue,{className:"sr-only",value:t.reimburseId,onChange:a.onChange})}),e.jsx(N,{})]})}),e.jsx("div",{children:e.jsx("table",{className:"text-xs mt-4 reimburse-form-detail font-thin",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Type of Reimbursement "}),e.jsx("td",{className:"flex items-center space-x-3",children:e.jsx(J,{options:L[s],fieldName:`forms.${s}.reimburse_type`,isRequired:!0,disabled:n.getValues("requester")==""||h===f.edit,placeholder:"Select Reimburse Type",onChangeOutside:(a,r)=>{const d=n.getValues("requester");if(a!==(r==null?void 0:r.value)&&d!==""&&$e(a,s),r!=null&&r.value){let u=L[s].filter(p=>p.value==r.value)[0];b(s,{...t,reimburse_type:r==null?void 0:r.value,type:u.is_employee===1?"Employee":"Family"}),u.is_employee===1?U(s):(k(p=>{const l=[...p];return l[s]=[],l}),n.setValue(`forms.${s}.balance`,""),le(s,{type:"Family",reimburse_type:r==null?void 0:r.value}))}else{k(p=>{const l=[...p];return l[s]=[],l}),b(s,{...t,balance:""}),n.setValue(`forms.${s}.for`,""),X(p=>{const l=[...p];return l[s]=[],l});const u=n.getValues("forms");u.forEach((p,l)=>{var S,y;if(l>s&&u[l].reimburse_type===t.reimburse_type){const g=((S=x[l])==null?void 0:S.balance)||0,Z=((y=x[l])==null?void 0:y.limit)||0;k(_=>{const j=[..._];return j[l]={...j[l],balance:g+parseInt(t.balance||"0"),limit:Z+1},j}),n.setValue(`forms.${l}.balance`,"")}})}},classNames:"mt-2 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Family"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.for`,render:({field:a})=>{var r,d,u,p;return e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(B,{disabled:((u=(d=(r=L==null?void 0:L[s])==null?void 0:r.filter(l=>(l==null?void 0:l.value)==n.getValues(`forms.${s}.reimburse_type`)))==null?void 0:d[0])==null?void 0:u.is_employee)===1||h===f.edit,onValueChange:l=>{b(s,{...t,for:l}),U(s,{reimburse_type:n.getValues(`forms.${s}.reimburse_type`)})},defaultValue:t==null?void 0:t.for,value:t.for,children:[e.jsx(P,{className:"w-[200px]",children:e.jsx(G,{placeholder:"-"})}),e.jsx(M,{children:(p=Se[s])==null?void 0:p.map(l=>e.jsx(z,{value:l.value.toString(),children:l.label},l.value))})]})}),e.jsx(N,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Purchasing Group"}),e.jsx("td",{children:e.jsx(J,{fieldLabel:"",options:Ce,fieldName:`forms.${s}.purchasing_group`,disabled:h===f.edit,placeholder:"Puchasing Group",classNames:"mt-2 w-full",onChangeOutside:async(a,r)=>{a.length>0&&a!==(r==null?void 0:r.value)&&await re(a,{name:"purchasing_group_desc",id:"id",tabel:"purchasing_groups",idType:"string",search:a}),r!=null&&r.value&&b(s,{...t,purchasing_group:r==null?void 0:r.value})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Tax"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.tax_on_sales`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(B,{disabled:!0,onValueChange:r=>{b(s,{...t,tax_on_sales:r})},defaultValue:t.tax_on_sales,children:[e.jsx(P,{className:"w-[200px]",children:e.jsx(G,{placeholder:"-"})}),e.jsx(M,{children:(we??[]).map((r,d)=>e.jsx(z,{value:r.value.toString(),children:r.label},r.value))})]})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Uom"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.purchase_requisition_unit_of_measure`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(B,{disabled:!0,onValueChange:r=>{b(s,{...t,purchase_requisition_unit_of_measure:String(r)})},defaultValue:t.purchase_requisition_unit_of_measure,children:[e.jsx(P,{className:"w-[200px]",children:e.jsx(G,{placeholder:"-"})}),e.jsx(M,{children:(be??[]).map((r,d)=>e.jsx(z,{value:r.value.toString(),children:r.label},r.value))})]})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Remark"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.short_text`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(ce,{placeholder:"Insert remark",onChange:r=>{b(s,{...t,short_text:r.target.value})},defaultValue:t.short_text})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Current Balance"}),e.jsx("td",{children:e.jsx("span",{className:"font-bold",children:((o=x[s])==null?void 0:o.balance)&&V((c=x[s])==null?void 0:c.balance)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Limit Claim"}),e.jsxs("td",{children:[e.jsx("span",{className:"font-bold",children:(i=x[s])==null?void 0:i.limit})," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Receipt Date"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.item_delivery_data`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(de,{disabled:h===f.edit,initialDate:a.value instanceof Date?a.value:new Date(a.value),onDateChange:r=>a.onChange(r)})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Claim Date"}),e.jsx("td",{children:e.jsx(w,{control:n.control,name:`forms.${s}.claim_date`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(de,{disabled:h===f.edit,initialDate:a.value instanceof Date?a.value:new Date(a.value),onDateChange:r=>a.onChange(r)})}),e.jsx(N,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"Reimburse Cost"}),e.jsxs("td",{className:"w-full grid grid-cols-7 gap-x-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(w,{control:n.control,name:`forms.${s}.currency`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(C,{children:e.jsxs(B,{disabled:h===f.edit,onValueChange:r=>{b(s,{...t,currency:r})},defaultValue:t.currency,children:[e.jsx(P,{className:"w-[200px]",children:e.jsx(G,{placeholder:"-"})}),e.jsx(M,{children:K.map(r=>e.jsxs(z,{value:r.code,children:[r.name," (",r.code,")"]},r.code))})]})}),e.jsx(Je,{className:"h-6"}),e.jsx(N,{})]})})}),e.jsx("div",{className:"col-span-4",children:e.jsx(w,{control:n.control,name:`forms.${s}.balance`,render:({field:a})=>{var r;return e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(ue,{type:"text",placeholder:"0",onChange:d=>{var g;const u=d.target.value.replace(/[^0-9]/g,""),p=V(u,!1),l=parseInt(u)||0,S=((g=x[s])==null?void 0:g.balance)||0;if(l>S){d.target.value=V(u.slice(0,-1),!1);return}b(s,{...t,balance:u}),d.target.value=p,n.getValues("forms").forEach((Z,_)=>{if(_>s&&Z.reimburse_type===t.reimburse_type){const j=S-l;k(q=>{const A=[...q];return A[_]={...A[_],balance:j},A}),b(_,{...t,balance:""})}})},defaultValue:V(t.balance,!1),value:V(t.balance,!1),disabled:typeof x[s]>"u"||((r=x[s])==null?void 0:r.length)===0||h===f.edit})}),e.jsx(N,{})]})}})})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"w-1/4",children:"File Attachment"}),e.jsxs("td",{children:[e.jsx(w,{control:n.control,name:`forms.${s}.attachment`,render:({field:a})=>e.jsxs(v,{children:[e.jsx(He,{className:"text-xs text-gray-500 font-extralight mb-1",children:"Max File: 1000KB, Extension : jpg,jpeg,png,pdf,heic"}),e.jsx(C,{children:e.jsx("input",{className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-xs shadow-sm transition-colors file:border-0 file:bg-transparent file:text-xs file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",type:"file",multiple:!0,accept:"image/*,.pdf,.heic",onChange:r=>{const d=r.target.files;if(d){const u=[...t.attachment],p=Array.from(d);u.push(...p),b(s,{...t,attachment:u})}}})}),e.jsx(N,{})]})}),e.jsx("div",{className:"mt-2",children:t.attachment&&t.attachment.length>0&&e.jsx("ul",{children:t.attachment.map((a,r)=>e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:a.name}),e.jsx("button",{type:"button",className:"text-red-500 ml-2",onClick:()=>{const d=t.attachment.filter((u,p)=>p!==r);b(s,{...t,attachment:d})},children:"Delete"})]},r))})})]})]})]})})})]},s)})]}),e.jsx(is,{onClick:async()=>await ie(),variant:"contained",color:"primary",type:"button",children:"Check Approval"}),e.jsx("div",{className:"my-2",children:oe&&e.jsx(os,{workflowApproval:{approvalRequest:$.approvalRequest,approvalFrom:$.approvalFrom,acknowledgeFrom:$.acknowledgeFrom},workflowApprovalStep:$.approvalFromStatusRoute,workflowApprovalDiagram:$.approvalFrom})}),e.jsx(me,{className:"my-4"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(Ye,{type:"submit",className:"w-32",children:"Save"})})]})})})})};export{at as ReimburseForm};
