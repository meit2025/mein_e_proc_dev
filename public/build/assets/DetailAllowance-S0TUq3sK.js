import{j as e,r as N}from"./app-B1AEVzT5.js";import{F as o,a as x,b as m,c as h}from"./form-aZS_lP4z.js";import{B as $}from"./button-D307KTBQ.js";import{c as j}from"./index.esm-BH2AsJwf.js";/* empty css              */import{I as u}from"./input-Dk0wpb63.js";import{h as b}from"./moment-C5S46NFB.js";import{f as g}from"./rupiahCurrencyFormat-CnMdu_8N.js";import{C as F}from"./chevrons-up-down-B8n2YkTO.js";import"./app-HlhieNAw.js";import"./index-Ba4If0pH.js";import"./utils-DNtRlc7o.js";import"./index-Bb4qSo10.js";import"./createLucideIcon-BQ1Dm3Q6.js";function U({form:i,destinationIndex:t,allowanceField:a}){return e.jsx("table",{className:"w-full allowance-table",children:a.map((r,d)=>e.jsx(C,{form:i,allowance:r,destinationIndex:t,allowanceIndex:d}))})}function C({form:i,allowance:t,destinationIndex:a,allowanceIndex:r}){const[d,v]=N.useState(!1),f=s=>{v(l=>!l)},y=j({control:i.control,name:`destinations.${a}.allowances.${r}.detail.0.request_price`}),c=j({control:i.control,name:`destinations.${a}.allowances.${r}.detail`}),A=()=>{if(t.type==="total")return parseFloat(y||0)*1;{let s=0;return c==null||c.forEach(l=>{const n=parseFloat(l.request_price||0);s+=n}),s}},p=s=>l=>{const n=parseFloat(l.target.value)||0;t.request_value==="unlimited"?s.onChange(l):t.request_value==="up to max value"?n<=t.subtotal?s.onChange(l):alert(`Value cannot exceed the subtotal of IDR ${t.subtotal}`):t.request_value==="fixed value"&&alert("This value is fixed and cannot be changed.")};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{width:220,style:{verticalAlign:"middle"},className:"text-sm",children:t.name}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:":"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:t.type=="total"?e.jsx("span",{className:"text-sm",children:"IDR"}):e.jsx("span",{})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:t.type=="total"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{control:i.control,name:`destinations.${a}.allowances.${r}.detail.0.request_price`,render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(u,{value:s.value,onChange:p(s)})}),e.jsx(h,{})]})}),e.jsx("span",{className:"text-sm",children:"* 100%"})]}):e.jsxs("span",{className:"text-sm",children:[" ",t.detail.length," Days * ",g(t.subtotal)," * 100%"]})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm",style:{padding:"2px 5px"},children:["= IDR ",g(A())]})})}),t.type=="total"?e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}}):e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},onClick:()=>f(),children:e.jsxs($,{variant:"ghost",type:"button",size:"sm",className:"w-9 p-0",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})})]},t.id),d&&e.jsx(e.Fragment,{children:t.detail.map((s,l)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-end",style:{verticalAlign:"middle"},children:[e.jsx("span",{className:"text-sm",children:b(s.date).format("DD/MM/YYYY")})," "]}),e.jsx("td",{style:{padding:"8px 2px",verticalAlign:"middle"},children:":"}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("span",{className:"text-sm",children:"IDR"})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"},children:e.jsx("div",{className:"flex mt-1 text-sm justify-between items-center",children:e.jsx(o,{control:i.control,name:`destinations.${a}.allowances.${r}.detail.${l}.request_price`,render:({field:n})=>e.jsxs(x,{children:[e.jsx(m,{children:e.jsx(u,{value:n.value,onChange:p(n)})}),e.jsx(h,{})]})})})}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}}),e.jsx("td",{style:{verticalAlign:"middle",padding:"2px 5px"}})]},s.id))})]})}export{C as AllowanceRowInput,U as DetailAllowance};
