import{r as i,j as a}from"./app-B-4ErjWL.js";import{F as d}from"./formInput-pVfAHRhn.js";import{F as w}from"./formSwitch-Bf-FEXJt.js";import{a as I,c as p}from"./index.esm-B8uEeNnt.js";import"./app-DQK4SJPx.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./FormHelperText-0KOICH36.js";import"./DefaultPropsProvider-DkSCY4AB.js";import"./Switch-D5RbNkoJ.js";import"./createSimplePaletteValueFilter-B_LyYls9.js";import"./SwitchBase-n4VeRLpX.js";import"./useControlled-CD5EPnwQ.js";const T=({disable:c})=>{const{getValues:f,setValue:n,watch:l}=I(),[_,u]=i.useState(!0),v=p({name:"is_cashAdvance"}),m=p({name:"vendors"}),x=e=>Array.isArray(e)?e.find(s=>s&&s.winner===!0):null;i.useEffect(()=>{const e=x(m);u(!e)},[m]);const r=l("total_all_amount"),b=e=>{console.log(e);const s=f("vendors").filter(t=>(t.winner||!1)===!0),h=(s.length>0?s[0]:null).units||[],g=h.reduce((t,o)=>t+o.total_amount,0);n("total_all_amount",g);const A=h.reduce((t,o)=>o.total_amount>t?o.total_amount:t,0);n("amount_max",A);const j=parseInt(e)/100*parseInt(r);n("cash_advance_purchases.nominal",j)};return i.useEffect(()=>{if(r>0){const e=parseInt(l("cash_advance_purchases.dp"))/100*parseInt(r);n("cash_advance_purchases.nominal",e)}},[r]),a.jsxs("div",{children:[a.jsx(w,{fieldLabel:"cash Advance",fieldName:"is_cashAdvance",isRequired:!1,disabled:c}),v&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(d,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:c,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1,onChanges:e=>b(e.target.value)}),a.jsx(d,{fieldLabel:"reference",fieldName:"cash_advance_purchases.reference",isRequired:!1,disabled:c,type:"text",placeholder:"Enter reference"}),a.jsx(d,{fieldLabel:"amount cashadvance",fieldName:"cash_advance_purchases.nominal",isRequired:!0,disabled:!0,type:"number",placeholder:"Enter amount cashadvance",isRupiah:!0,note:_?"Please Chose The Propose Vendor":""})]})]})};export{T as default};
