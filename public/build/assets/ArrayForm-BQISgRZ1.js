import{r as w,j as a,a as y}from"./app-BAEExJgH.js";import{F as n}from"./formDropdown-CJv54rFu.js";import{F as l}from"./formInput-BVOqu6xj.js";import{u as d}from"./getDropdown-DcYwxQV7.js";import{a as Z,c as x}from"./index.esm-DSW7hCBv.js";import{F as j}from"./formSwitch-CwiZOofX.js";import{F as ee}from"./formTextArea--PRUcTv0.js";import{columnsItem as te}from"./listModel-C_mxWYzz.js";import{B as ae}from"./Button-Btf2dXCX.js";import{B as se}from"./Box-IXefZXrU.js";import{D as re}from"./DataGrid-C9Plfg1-.js";import"./app-DQK4SJPx.js";import"./TextField-DcrCjdOX.js";import"./createSvgIcon-vezU8J6L.js";import"./DefaultPropsProvider-B4-MuC0p.js";import"./useSlot--5vOxcwY.js";import"./createSimplePaletteValueFilter-jE7E2feH.js";import"./useControlled-DWjE0SYr.js";import"./FormHelperText-CMwRZwgv.js";import"./rupiahCurrencyFormat-CP-6egij.js";import"./axiosInstance-DhCIVE_x.js";import"./index-DtyLUhc1.js";import"./Switch-PoOAwGec.js";import"./SwitchBase-BcacD3G8.js";import"./Typography-CwKEx_AX.js";import"./CustomStatus-DHHo_kN-.js";import"./utils-BUHi-DAC.js";import"./createLucideIcon-D2cFH8-E.js";import"./page-DB73t_G4.js";import"./moment-C5S46NFB.js";import"./index-DVZLXGVS.js";import"./ListItemText-D-iwL5Gs.js";import"./FormControlLabel-DQJ4MZj_.js";import"./KeyboardArrowRight-WJIxmXpy.js";const Pe=({dataIndex:m,subAsset:v,FetchDataValue:D,disable:s})=>{const{getValues:b,setValue:t,watch:q}=Z(),{dataDropdown:A,getDropdown:L}=d(),{dataDropdown:R,getDropdown:C}=d(),{dataDropdown:M,getDropdown:F}=d(),{dataDropdown:k,getDropdown:E}=d(),{dataDropdown:T,getDropdown:I}=d(),{dataDropdown:S,getDropdown:$}=d(),{dataDropdown:P,getDropdown:V}=d(),{dataDropdown:O,getDropdown:G}=d(),{dataDropdown:B,getDropdown:U}=d();x({name:"total_item"});const W=q(`vendors[${m}].units`),u=x({name:"item_account_assignment_categories"}),g=x({name:"document_type"}),z=x({name:"item_is_cashAdvance"});w.useEffect(()=>{C("",{name:"desc",id:"cost_center",tabel:"master_cost_centers"}),L("",{name:"name_one",id:"id",tabel:"master_business_partners"}),E("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),$("",{name:"description",id:"mwszkz",tabel:"pajaks"}),V("",{name:"unit_of_measurement_text",id:"commercial",tabel:"uoms"}),G("",{name:"desc",id:"order_number",tabel:"master_orders"}),U("",{name:"desc",id:"asset",tabel:"master_assets",where:{groupBy:"asset,desc"}})},[]),w.useEffect(()=>{F("",{name:"description",id:"account",tabel:"account_assignment_categories",attribut:g})},[g]);const H=async e=>{I("",{name:"material_number",id:"material_number",tabel:"master_materials",attribut:e,where:{key:"material_group",parameter:e}})},K=async()=>{const e=b(),p={id:e.item_id??`random-generated-id-${Math.random().toString(36).substr(2,9)}`,qty:e.item_qty,unit_price:e.item_unit_price,total_amount:e.item_qty*e.item_unit_price,account_assignment_categories:e.item_account_assignment_categories,cost_center:e.item_cost_center,material_group:e.item_material_group,material_number:e.item_material_number,uom:e.item_uom,tax:e.item_tax,short_text:e.item_short_text,order_number:e.item_order_number,asset_number:e.item_asset_number,sub_asset_number:e.item_sub_asset_number,is_cashAdvance:e.item_is_cashAdvance,cash_advance_purchases:{dp:e.item_dp,reference:e.item_reference,document_header_text:e.item_document_header_text,document_date:e.item_document_date,due_on:e.item_due_on,text:e.item_text_cash_advance}},_=b(`vendors[${m}].units`)||[];let r=[];e.action==="edit"?r=_.map((i,c)=>i.id===e.indexEdit?p:i):r=[..._,p];const h=r.reduce((i,c)=>i+parseInt(c.total_amount),0),f=r.reduce((i,c)=>c.unit_price>i?parseInt(c.unit_price):i,0);t("amount_max",f),t(`vendors[${m}].units`,r),t("total_all_amount",h),t("indexEdit",0),t("item_id",null),Q()},Q=()=>{t("indexEdit",""),t("action","create"),t("item_account_assignment_categories",""),t("item_asset_number",""),t("item_cost_center",""),t("item_document_date",""),t("item_document_header_text",""),t("item_dp",""),t("item_due_on",""),t("item_id",""),t("item_is_cashAdvance",""),t("item_material_group",""),t("item_material_number",""),t("item_order_number",""),t("item_qty",""),t("item_reference",""),t("item_short_text",""),t("item_sub_asset_number",""),t("item_tax",""),t("item_text_cash_advance",""),t("item_unit_price",""),t("item_uom",""),t("cash_advance_purchases",null)},X=(e,o)=>{var _,r,h,f,i,c,N;console.log(o,e.id);const p=e.id??`random-generated-id-${Math.random().toString(36).substr(2,9)}`;t("indexEdit",p),t("action","edit"),t("item_account_assignment_categories",e.account_assignment_categories??""),t("item_asset_number",e.asset_number??""),t("item_cost_center",e.cost_center??""),t("item_id",p),t("item_is_cashAdvance",((_=e.cash_advance_purchases)==null?void 0:_.reference)!==null),t("item_material_group",e.material_group??""),t("item_material_number",e.material_number??""),t("item_order_number",e.order_number??""),t("item_qty",e.qty??"0"),t("item_short_text",e.short_text??""),t("item_sub_asset_number",e.sub_asset_number??""),t("item_tax",e.tax??""),t("item_unit_price",e.unit_price??"0"),t("item_uom",e.uom??""),t("item_reference",((r=e.cash_advance_purchases)==null?void 0:r.reference)??""),t("item_dp",((h=e.cash_advance_purchases)==null?void 0:h.dp)??""),t("item_due_on",((f=e.cash_advance_purchases)==null?void 0:f.due_on)??""),t("item_text_cash_advance",((i=e.cash_advance_purchases)==null?void 0:i.text)??""),t("item_document_date",((c=e.cash_advance_purchases)==null?void 0:c.document_date)??""),t("item_document_header_text",((N=e.cash_advance_purchases)==null?void 0:N.document_header_text)??"")},Y=(e,o)=>{const _=(b(`vendors[${m}].units`)||[]).filter((r,h)=>r.id!==e.id);t(`vendors[${m}].units`,_)},J=[{field:"actions",headerName:"Actions",width:150,renderCell:e=>a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",gap:"10px"},children:[a.jsx(y,{type:"button",onClick:o=>{o.preventDefault(),X(e.row,e)},href:"#",children:a.jsx("i",{className:" ki-duotone ki-notepad-edit text-success text-2xl"})}),a.jsx(y,{type:"button",onClick:o=>{o.preventDefault(),Y(e.row)},href:"#",children:a.jsx("i",{className:" ki-duotone ki-trash-square text-danger text-2xl"})})]})}];return a.jsxs("div",{children:[a.jsx(n,{options:A,fieldLabel:"Select Vendor",fieldName:`vendors[${m}].vendor`,isRequired:!0,style:{width:"56.5rem"},placeholder:"Select Vendor",classNames:"mt-2",disabled:s}),a.jsx(j,{fieldLabel:"Vendor Winner",fieldName:`vendors[${m}].winner`,isRequired:!1,disabled:s}),!s&&a.jsxs("div",{className:"card mt-2",children:[a.jsx("div",{className:"card-header",children:a.jsx("p",{children:"item"})}),a.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[a.jsx(l,{fieldLabel:"Qty",fieldName:"item_qty",isRequired:!1,type:"number",placeholder:"Enter your qty",disabled:s}),a.jsx(l,{fieldLabel:"Unit Price",fieldName:"item_unit_price",isRequired:!1,disabled:s,type:"number",placeholder:"Unit Price"}),a.jsx(n,{options:M,fieldLabel:"Account Assignment",fieldName:"item_account_assignment_categories",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Account Assignment",classNames:"mt-2"}),(u==="K"||u==="V"||u==="W"||u==="Y")&&a.jsx(n,{options:R,fieldLabel:"Cost Center",fieldName:"item_cost_center",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Cost Center",classNames:"mt-2"}),a.jsx(n,{options:k,fieldLabel:"Material Group",fieldName:"item_material_group",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material Group",classNames:"mt-2",onChangeOutside:async(e,o)=>{await H(e)}}),a.jsx(n,{options:T,fieldLabel:"Material number",fieldName:"item_material_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material number",classNames:"mt-2"}),a.jsx(n,{options:P,fieldLabel:"Uom",fieldName:"item_uom",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Purchase requisition unit of measure",classNames:"mt-2"}),a.jsx(n,{options:S,fieldLabel:"Tax on sales",fieldName:"item_tax",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Tax on sales",classNames:"mt-2"}),a.jsx(ee,{fieldLabel:"Short Text",fieldName:"item_short_text",isRequired:!1,disabled:s,maxLength:40,classNames:"mt-4",style:{width:"56.5rem"}}),u==="F"&&a.jsx(n,{options:O,fieldLabel:"Order Number",fieldName:"item_order_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Order Number",classNames:"mt-2"}),u==="A"&&a.jsxs(a.Fragment,{children:[a.jsx(n,{options:B,fieldLabel:"Main Asset Number",fieldName:"item_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Main Asset",classNames:"mt-2",onChangeOutside:(e,o)=>{D(e,m)}}),a.jsx(n,{options:v[m],fieldLabel:"Sub Asset",fieldName:"item_sub_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Sub Asset Number",classNames:"mt-2"})]}),a.jsx(j,{fieldLabel:"cash Advance",fieldName:"item_is_cashAdvance",isRequired:!1,disabled:s}),z&&a.jsxs(a.Fragment,{children:[a.jsx("hr",{}),a.jsx(l,{fieldLabel:"Persantase DP Number",fieldName:"cash_advance_purchases.dp",isRequired:!0,disabled:s,type:"number",placeholder:"Persantase DP Number",maxLength:100,minLength:1}),a.jsx(l,{fieldLabel:"reference",fieldName:"item_reference",isRequired:!1,disabled:s,type:"text",placeholder:"Enter reference"}),a.jsx(l,{fieldLabel:"Document Header Text",fieldName:"item_document_header_text",isRequired:!1,disabled:s,type:"text",placeholder:"Document Header Text"}),a.jsx(l,{fieldLabel:"Document Date",fieldName:"item_document_date",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Document Date"}),a.jsx(l,{fieldLabel:"Due On",fieldName:"item_due_on",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Due On"}),a.jsx(l,{fieldLabel:"text",fieldName:"item_text_cash_advance",isRequired:!1,disabled:s,type:"text",placeholder:"enter your text"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsx(ae,{type:"button",variant:"contained",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",onClick:async()=>await K(),children:"Add Item"})})]}),a.jsx(se,{sx:{width:"100%",overflowX:"auto",marginTop:"1rem"},children:a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"grid",children:a.jsx("div",{className:"card card-grid h-full min-w-full",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{"data-datatable":"true",children:a.jsx("div",{className:"scrollable-x-auto",children:a.jsx(re,{columns:[...s?[]:J,...te],rows:W,hideFooterPagination:!0})})})})})})})})]})};export{Pe as default};
