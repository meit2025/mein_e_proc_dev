import{r as m,j as e}from"./app-CMRlKEBG.js";import{c as f}from"./index.esm-CMx19ymE.js";/* empty css              */import{f as w}from"./rupiahCurrencyFormat-CP-6egij.js";function _({allowanceField:n,destinationIndex:l,form:a,setTotalAllowance:u}){const[h,o]=m.useState(0);m.useEffect(()=>{const s=n.reduce((c,i,p)=>{const j=a.getValues(`destinations.${l}.allowances.${p}.detail`),x=d(i,j);return c+x},0),r=a.getValues("destinations").reduce((c,i,p)=>{const x=(i.allowances||[]).reduce((T,b,$)=>{const N=a.getValues(`destinations.${p}.allowances.${$}.detail`),R=d(b,N);return T+R},0);return c+x},0);o(s),u(r)},[n,a.watch()]);const d=(s,t)=>{var r;return s.type==="total"?parseFloat(((r=t==null?void 0:t[0])==null?void 0:r.request_price)||0):t==null?void 0:t.reduce((c,i)=>c+parseFloat(i.request_price||0),0)};return e.jsx(e.Fragment,{children:e.jsxs("table",{className:"w-full text-sm mt-10",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[50%]",children:"Item"}),e.jsx("th",{className:"w-[50%]",children:"Sub Total"})]})}),e.jsx("tbody",{children:n.map((s,t)=>e.jsx(g,{allowance:s,destinationIndex:l,form:a,allowanceIndex:t}))}),e.jsx("tfoot",{className:"mt-4",children:e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{children:e.jsx("i",{children:"Total Allowance"})}),e.jsxs("td",{className:"flex justify-between pr-4",children:[e.jsx("span",{children:e.jsx("i",{children:"IDR"})}),e.jsx("span",{children:e.jsx("i",{children:w(h)})})]})]})})]})})}function g({allowance:n,destinationIndex:l,form:a,allowanceIndex:u}){const h=f({control:a.control,name:`destinations.${l}.allowances.${u}.detail.0.request_price`}),o=f({control:a.control,name:`destinations.${l}.allowances.${u}.detail`}),d=()=>{if(n.type==="total")return parseFloat(h||0)*1;{let s=0;return o==null||o.forEach(t=>{const r=parseFloat(t.request_price||0);s+=r}),s}};return e.jsxs("tr",{children:[e.jsx("td",{children:n.name}),e.jsxs("td",{className:"flex justify-between pr-4",children:[e.jsx("span",{children:"IDR"}),e.jsx("span",{children:w(d())})]})]},n.id)}export{g as ResultPerItem,_ as ResultTotalItem};
