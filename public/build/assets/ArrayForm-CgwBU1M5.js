import{r as x,j as t,a as b}from"./app-BEJxtjRF.js";import{F as i}from"./formDropdown-DctS0dEn.js";import{F as l}from"./formInput-Dsb-ih5y.js";import{u as n}from"./getDropdown-dJMoxdWU.js";import{a as Q,c as u}from"./index.esm-CB_EfjD8.js";import{F as g}from"./formSwitch-CSF78HMy.js";import{F as X}from"./formTextArea-BGegbMLE.js";import{columnsItem as Y}from"./listModel-DqsUgj-0.js";import{a as J,B as Z}from"./ListItemText-DuQ-XOyc.js";import{D as ee}from"./DataGrid-DmbQVBu4.js";import"./app-HlhieNAw.js";import"./TextField-7nh48nQA.js";import"./useSlot-iVBY5GI9.js";import"./FormHelperText-D-VUpKrY.js";import"./createSimplePaletteValueFilter-Dasb64u_.js";import"./axiosInstance-Cwh7YiCH.js";import"./index-CUk13UgS.js";import"./Switch-CrkfnHsm.js";import"./SwitchBase-CmEjqwHx.js";import"./Typography-BHmah5Ey.js";import"./FormControlLabel-P8XgCf8r.js";import"./KeyboardArrowRight-C3lvnP6U.js";const je=({dataIndex:m,subAsset:w,FetchDataValue:N,disable:s})=>{const{getValues:p,setValue:a,watch:y}=Q(),{dataDropdown:j,getDropdown:v}=n(),{dataDropdown:D,getDropdown:q}=n(),{dataDropdown:A,getDropdown:L}=n(),{dataDropdown:R,getDropdown:C}=n(),{dataDropdown:F,getDropdown:M}=n(),{dataDropdown:k,getDropdown:E}=n(),{dataDropdown:T,getDropdown:I}=n(),{dataDropdown:P,getDropdown:V}=n(),{dataDropdown:$,getDropdown:O}=n();u({name:"total_item"});const S=y(`vendors[${m}].units`),o=u({name:"item_account_assignment_categories"}),f=u({name:"document_type"}),G=u({name:"item_is_cashAdvance"});x.useEffect(()=>{q("",{name:"desc",id:"cost_center",tabel:"master_cost_centers"}),v("",{name:"name_one",id:"id",tabel:"master_business_partners"}),C("",{name:"material_group_desc",id:"material_group",tabel:"material_groups"}),E("",{name:"description",id:"mwszkz",tabel:"pajaks"}),I("",{name:"unit_of_measurement_text",id:"commercial",tabel:"uoms"}),V("",{name:"desc",id:"order_number",tabel:"master_orders"}),O("",{name:"desc",id:"asset",tabel:"master_assets",where:{groupBy:"asset,desc"}})},[]),x.useEffect(()=>{L("",{name:"description",id:"account",tabel:"account_assignment_categories",attribut:f})},[f]);const U=async e=>{M("",{name:"material_number",id:"material_number",tabel:"master_materials",attribut:e,where:{key:"material_group",parameter:e}})},B=async()=>{const e=p(),r={qty:e.item_qty,unit_price:e.item_unit_price,total_amount:e.item_qty*e.item_unit_price,account_assignment_categories:e.item_account_assignment_categories,cost_center:e.item_cost_center,material_group:e.item_material_group,material_number:e.item_material_number,uom:e.item_uom,tax:e.item_tax,short_text:e.item_short_text,order_number:e.item_order_number,asset_number:e.item_asset_number,sub_asset_number:e.item_sub_asset_number,is_cashAdvance:e.item_is_cashAdvance,dp:e.item_dp,reference:e.item_reference,document_header_text:e.item_document_header_text,document_date:e.item_document_date,due_on:e.item_due_on,text:e.item_text_cash_advance},h=p(`vendors[${m}].units`)||[];let d=[];e.action==="edit"?d=h.map((_,c)=>c===e.indexEdit?r:_):d=[...h,r],d=d.map((_,c)=>({id:c,..._})),a(`vendors[${m}].units`,d),a("indexEdit",0),W()},W=()=>{a("indexEdit",""),a("action","create"),a("item_account_assignment_categories",""),a("item_asset_number",""),a("item_cost_center",""),a("item_document_date",""),a("item_document_header_text",""),a("item_dp",""),a("item_due_on",""),a("item_id",""),a("item_is_cashAdvance",""),a("item_material_group",""),a("item_material_number",""),a("item_order_number",""),a("item_qty",""),a("item_reference",""),a("item_short_text",""),a("item_sub_asset_number",""),a("item_tax",""),a("item_text_cash_advance",""),a("item_unit_price",""),a("item_uom","")},z=(e,r)=>{a("indexEdit",e.id),a("action","edit"),a("item_account_assignment_categories",e.account_assignment_categories??""),a("item_asset_number",e.asset_number??""),a("item_cost_center",e.cost_center??""),a("item_document_date",e.document_date??""),a("item_document_header_text",e.document_header_text??""),a("item_dp",e.dp??""),a("item_due_on",e.due_on??""),a("item_id",e.id??`random-generated-id-${Math.random().toString(36).substr(2,9)}`),a("item_is_cashAdvance",e.is_cashAdvance??!1),a("item_material_group",e.material_group??""),a("item_material_number",e.material_number??""),a("item_order_number",e.order_number??""),a("item_qty",e.qty??"0"),a("item_reference",e.reference??""),a("item_short_text",e.short_text??""),a("item_sub_asset_number",e.sub_asset_number??""),a("item_tax",e.tax??""),a("item_text_cash_advance",e.text??""),a("item_unit_price",e.unit_price??"0"),a("item_uom",e.uom??"")},H=(e,r)=>{const d=(p(`vendors[${m}].units`)||[]).filter((_,c)=>c!==e.id);a(`vendors[${m}].units`,d)},K=[{field:"actions",headerName:"Actions",width:150,renderCell:e=>t.jsx(t.Fragment,{children:t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",gap:"10px"},children:[t.jsx(b,{type:"button",onClick:r=>{r.preventDefault(),z(e.row)},href:"#",children:t.jsx("i",{className:" ki-duotone ki-notepad-edit text-success text-2xl"})}),t.jsx(b,{type:"button",onClick:r=>{r.preventDefault(),H(e.row)},href:"#",children:t.jsx("i",{className:" ki-duotone ki-trash-square text-danger text-2xl"})})]})})}];return t.jsxs("div",{children:[t.jsx(i,{options:j,fieldLabel:"Select Vendor",fieldName:`vendors[${m}].vendor`,isRequired:!0,style:{width:"56.5rem"},placeholder:"Select Vendor",classNames:"mt-2",disabled:s}),t.jsx(g,{fieldLabel:"Vendor Winner",fieldName:`vendors[${m}].winner`,isRequired:!1,disabled:s}),!s&&t.jsxs("div",{className:"card mt-2",children:[t.jsx("div",{className:"card-header",children:t.jsx("p",{children:"item"})}),t.jsxs("div",{className:"card-body",style:{padding:"1rem"},children:[t.jsx(l,{fieldLabel:"Qty",fieldName:"item_qty",isRequired:!1,type:"number",placeholder:"Enter your qty",disabled:s}),t.jsx(l,{fieldLabel:"Unit Price",fieldName:"item_unit_price",isRequired:!1,disabled:s,type:"number",placeholder:"Unit Price"}),t.jsx(i,{options:A,fieldLabel:"Account Assignment",fieldName:"item_account_assignment_categories",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Account Assignment",classNames:"mt-2"}),(o==="K"||o==="V"||o==="W"||o==="Y")&&t.jsx(i,{options:D,fieldLabel:"Cost Center",fieldName:"item_cost_center",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Cost Center",classNames:"mt-2"}),t.jsx(i,{options:R,fieldLabel:"Material Group",fieldName:"item_material_group",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material Group",classNames:"mt-2",onChangeOutside:async(e,r)=>{await U(e)}}),o!=="K"&&t.jsx(i,{options:F,fieldLabel:"Material number",fieldName:"item_material_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Material number",classNames:"mt-2"}),t.jsx(i,{options:T,fieldLabel:"Uom",fieldName:"item_uom",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Purchase requisition unit of measure",classNames:"mt-2"}),t.jsx(i,{options:k,fieldLabel:"Tax on sales",fieldName:"item_tax",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Tax on sales",classNames:"mt-2"}),t.jsx(X,{fieldLabel:"Short Text",fieldName:"item_short_text",isRequired:!1,disabled:s,maxLength:40,classNames:"mt-4",style:{width:"56.5rem"}}),o==="F"&&t.jsx(i,{options:P,fieldLabel:"Order Number",fieldName:"item_order_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Order Number",classNames:"mt-2"}),o==="A"&&t.jsxs(t.Fragment,{children:[t.jsx(i,{options:$,fieldLabel:"Main Asset Number",fieldName:"item_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Main Asset",classNames:"mt-2",onChangeOutside:(e,r)=>{N(e,m)}}),t.jsx(i,{options:w[m],fieldLabel:"Sub Asset",fieldName:"item_sub_asset_number",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Sub Asset Number",classNames:"mt-2"})]}),t.jsx(g,{fieldLabel:"cash Advance",fieldName:"item_is_cashAdvance",isRequired:!1,disabled:s}),G&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{}),t.jsx(i,{options:[{label:"50%",value:"50"},{label:"400%",value:"40"},{label:"30%",value:"30"},{label:"20%",value:"20"},{label:"10%",value:"10"}],fieldLabel:"Persantase DP",fieldName:"item_dp",isRequired:!1,disabled:s,style:{width:"56.5rem"},placeholder:"Persantase DP Number",classNames:"mt-2"}),t.jsx(l,{fieldLabel:"reference",fieldName:"item_reference",isRequired:!1,disabled:s,type:"text",placeholder:"Enter reference"}),t.jsx(l,{fieldLabel:"Document Header Text",fieldName:"item_document_header_text",isRequired:!1,disabled:s,type:"text",placeholder:"Document Header Text"}),t.jsx(l,{fieldLabel:"Delivery Date",fieldName:"item_document_date",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Document Date"}),t.jsx(l,{fieldLabel:"Due On",fieldName:"item_due_on",isRequired:!1,disabled:s,type:"date",placeholder:"enter your Due On"}),t.jsx(l,{fieldLabel:"text",fieldName:"item_text_cash_advance",isRequired:!1,disabled:s,type:"text",placeholder:"enter your text"})]})]}),t.jsx("div",{className:"card-footer",children:t.jsx(J,{type:"button",variant:"contained",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",onClick:async()=>await B(),children:"Add Item"})})]}),t.jsx(Z,{sx:{width:"100%",overflowX:"auto",marginTop:"1rem"},children:t.jsx("div",{className:"lg:col-span-2",children:t.jsx("div",{className:"grid",children:t.jsx("div",{className:"card card-grid h-full min-w-full",children:t.jsx("div",{className:"card-body",children:t.jsx("div",{"data-datatable":"true",children:t.jsx("div",{className:"scrollable-x-auto",children:t.jsx(ee,{columns:[...K,...Y],rows:S,hideFooterPagination:!0})})})})})})})})]})};export{je as default};
