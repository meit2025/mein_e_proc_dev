import{j as s,u as v,r as E,a as u}from"./app-OCxfqGpa.js";import{F}from"./FormWrapper-CtEMoWOc.js";import{F as w}from"./index.esm-b6E6vmCw.js";import{l as N}from"./axiosInstance-CJuOVE_4.js";import{l as L}from"./loading-NyqXPFiX.js";const S=({isLoading:a})=>a&&s.jsx("div",{id:"busy-overlay",className:"busy-overlay",children:s.jsx("div",{className:"spinner",children:s.jsx("img",{src:L,width:"75px",height:"75px",alt:"loading"})})}),D=({formModel:a,url:j,redirectUrl:g,methods:o,onSave:i,isLoading:h})=>{const{setError:b}=o,{showToast:n}=v(),[f,m]=E.useState(!1),y=async t=>{var e,c,l,p;m(!0);try{const r=await N.post(j,t,{headers:{"Content-Type":"application/json"}});n(r.data.message,"success"),i&&await i(r),g&&setTimeout(()=>{},2e3)}catch(r){if(u.isAxiosError(r)&&((c=(e=r.response)==null?void 0:e.data)!=null&&c.message)&&n(r.response.data.message,"error"),u.isAxiosError(r)&&((p=(l=r.response)==null?void 0:l.data)!=null&&p.errors)){const d=r.response.data.errors;Object.keys(d).forEach(x=>{b(x,{type:"server",message:d[x].join(", ")})})}}m(!1)};return s.jsxs(w,{...o,children:[s.jsx(S,{isLoading:h||f}),s.jsxs("form",{onSubmit:o.handleSubmit(y),children:[a.map((t,e)=>s.jsx("div",{className:"mt-8",children:s.jsx(F,{model:t})},e)),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{D as F};
