import{u as v,r as E,j as e,a as i}from"./app-CNv1wH9b.js";import{F as b,a as d,b as l,d as c,e as x}from"./form-Zal1Ebfd.js";import{z as m,t as F,I as h}from"./index-DIDMXgCk.js";import{B as N}from"./button-pR9Y3bbt.js";import{u as A}from"./index.esm-CIV15JQO.js";import{S as _}from"./scroll-area-B_5qWdwW.js";import{C as I,a as L}from"./api-CEASqZ9H.js";/* empty css            */import"./index-CSig4B4g.js";var O=(t=>(t[t.create=0]="create",t[t.edit=1]="edit",t[t.update=2]="update",t))(O||{});function z({onSuccess:t,type:o=0,id:n}){var j=m.object({code:m.string().min(1,"Code is required"),name:m.string().min(1,"Name is required")});let u={code:"",name:""};async function f(){let r=L(n);try{let a=await i.get(r);s.reset({code:a.data.data.code,name:a.data.data.name})}catch{}}const s=A({resolver:F(j),defaultValues:u}),{showToast:p}=v(),g=r=>{try{const a=i.post(I,r);console.log(a),p("succesfully created data","success"),t==null||t(!0)}catch(a){const C=a;t==null||t(!1),console.log(C)}};return E.useEffect(()=>{n&&o==1&&f()},[n,o]),e.jsx(_,{className:"h-[600px] w-full",children:e.jsx(b,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(g),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(d,{control:s.control,disabled:o==1,name:"code",render:({field:r})=>e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(h,{type:"text",placeholder:"0.0",...r,value:r.value||"",onChange:a=>r.onChange(a.target.value)})}),e.jsx(x,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(d,{control:s.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(h,{type:"text",...r,value:r.value||"",onChange:a=>r.onChange(a.target.value)})}),e.jsx(x,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(N,{type:"submit",children:"Save"})})]})})})}export{z as AllowanceForm,O as AllowanceType};
