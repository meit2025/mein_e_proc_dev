import{r as p,j as e,u as F,a as y}from"./app-COJ7NqvI.js";import{B as v}from"./button-CrJwXWf_.js";import{I as N}from"./input-xPNppgkS.js";import{c as C}from"./utils-3PeL5dVk.js";import{c as k}from"./createLucideIcon-C0z9dR1i.js";import{d as M,F as c,a as m,e as g,b as d,c as x}from"./form-5BFTr8UC.js";import{C as P}from"./checkbox-CgF4gaM1.js";import{t as I,o as L,b as z,s as b}from"./types-Bu-IK2ku.js";import{u as A}from"./index.esm-fhDVJvEV.js";import{a as T}from"./axiosInstance-B-5dpWIr.js";import"./app-DGQxOE2s.js";import"./index-DVd92enL.js";import"./index-BRvlZAy3.js";import"./index-DVk3Jc1d.js";import"./index-DVBVRBfj.js";import"./index-BlqSTVBH.js";import"./index-Ds_Gmo10.js";import"./index-DIWCQZ1-.js";import"./index-CpumYFQe.js";import"./index-B1BhrPkn.js";import"./index-CTp75OH4.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=k("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),E=p.forwardRef(({className:t,...r},a)=>{const[n,l]=p.useState(!1),s=r.value===""||r.value===void 0||r.disabled;return e.jsxs("div",{className:"relative",children:[e.jsx(N,{type:n?"text":"password",className:C("hide-password-toggle pr-10",t),ref:a,...r}),e.jsxs(v,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(i=>!i),disabled:s,children:[n&&!s?e.jsx(B,{className:"h-4 w-4","aria-hidden":"true"}):e.jsx(q,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:n?"Hide password":"Show password"})]}),e.jsx("style",{children:`
					.hide-password-toggle::-ms-reveal,
					.hide-password-toggle::-ms-clear {
						visibility: hidden;
						pointer-events: none;
						display: none;
					}
				`})]})});E.displayName="PasswordInput";const O=L({username:b().min(1,{message:"Username required"}),password:b().min(1,{message:"Password required"}),remember_me:z().default(!1).optional()});function R(){const[t,r]=p.useState(!1),a=A({resolver:I(O),defaultValues:{username:"",password:"",remember_me:!1}}),{showToast:n}=F();async function l(s){var i,h,u,f;try{r(!0);const o=await T.post("/login",s);n(o.data.message,"success"),window.location.href="/portal"}catch(o){if(y.isAxiosError(o)&&((h=(i=o.response)==null?void 0:i.data)!=null&&h.message)&&n(o.response.data.message,"error"),y.isAxiosError(o)&&((f=(u=o.response)==null?void 0:u.data)!=null&&f.errors)){const j=o.response.data.errors;Object.keys(j).forEach(w=>{const S=Array.from(new Set(j[w]));a.setError(w,{type:"server",message:S.join(", ")})})}}finally{r(!1)}}return e.jsx(M,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),className:"",children:[e.jsxs("div",{className:"flex flex-col space-y-3 p-2",children:[e.jsx(c,{control:a.control,name:"username",render:({field:s})=>e.jsxs(m,{children:[e.jsx(g,{children:"Username"}),e.jsx(d,{children:e.jsx(N,{placeholder:"Username",...s})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"password",render:({field:s})=>e.jsxs(m,{children:[e.jsx(g,{children:"Password"}),e.jsx(d,{children:e.jsx(E,{placeholder:"Password",...s})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"remember_me",render:({field:s})=>e.jsxs(m,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{id:"remember",checked:s.value,onCheckedChange:s.onChange}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Remember me"})]}),e.jsx("a",{href:""})]})}),e.jsx(x,{})]})})]}),e.jsx("div",{className:"mt-4 p-2",children:e.jsx(v,{className:"w-full",variant:"blue",type:"submit",disabled:t,children:t?e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading..."]}):"Submit"})})]})})}function ie({fileImage:t,bgImage:r}){return e.jsxs("div",{className:"flex h-screen w-screen fixed md:pt-20 top-0 left-0 justify-center ",children:[r?e.jsx("img",{src:r,className:"absolute top-0 left-0 h-screen w-screen -z-1",alt:""}):null,e.jsxs("div",{className:"flex  z-10 w-full items-center flex-col space-y-4",children:[e.jsx("div",{className:"my-4",children:t?e.jsx("img",{src:t,alt:"",className:"rounded-md object-contain"}):null}),e.jsxs("div",{className:"md:w-1/4 md:my-12 bg-white rounded-md shadow-md md:p-6 ",children:[e.jsx("div",{className:"text-center text-xl mb-4",children:"Sign In"}),e.jsx(R,{})]})]})]})}export{R as LoginForm,ie as default};
