import{u as A,r as S,j as e}from"./app-BIOi_O7g.js";import{z as c,F as V,a as o,b as l,d as n,I as _,e as i,c as j,t as L}from"./index-xVSCDvl5.js";import{B as R}from"./button-D9RCpmB9.js";import{u as P}from"./index.esm-BVoG1Nd3.js";import{T as G}from"./textarea-B3h3MJF8.js";import{S as N}from"./scroll-area-D2vZFU-X.js";/* empty css              */import{S as u,a as p,b as g,c as f,d}from"./select-BQEeHfE3.js";import{a as y}from"./axiosInstance-DV-uprs0.js";import{a as D}from"./api-CEASqZ9H.js";import{R as O,a as v}from"./radio-group-B1_1TYJd.js";import{C as B}from"./api-DCFLeO7i.js";import{G as M}from"./api-CqnfnBNR.js";/* empty css            */import"./index-Dox7fKga.js";import"./react-icons.esm-Bx38emjL.js";import"./Combination-v-JBI_-j.js";import"./index-CTfkAyHj.js";import"./index-CUsis8Jc.js";import"./index-B1DW66uR.js";var U=(a=>(a[a.create=0]="create",a[a.edit=1]="edit",a[a.update=2]="update",a))(U||{});function ie({onSuccess:a,type:x=0,id:h,listCurrency:w,listAllowanceCategory:E}){var F=c.object({code:c.string().min(1,"Code is required"),name:c.string().min(1,"Name is required"),type:c.string().min(1,"Type is required"),currency_id:c.string().min(1,"Currency is required"),formula:c.string().min(1,"Formula is required"),allowance_category_id:c.string().min(1,"Allowance Category is required"),request_value:c.string().min(1,"Required")});let I={code:"",name:"",type:"",currency_id:"",fixed_value:"",max_value:"",request_value:"unlimited",formula:"",allowance_category_id:""};async function T(){let r=D(h);try{let s=await y.get(r);t.reset({code:s.data.data.code,name:s.data.data.name})}catch{}}async function b(r){console.log(r);let s=M(r);try{let m=await y.get(s);console.log(m)}catch(m){console.log(m)}}const t=P({resolver:L(F),defaultValues:I}),{showToast:C}=A(),q=async r=>{console.log(r);try{const s=await y.post(B,r);console.log("response",s),C("success","success"),a==null||a(!0)}catch{a==null||a(!1),C("Please Check the input","error")}};return S.useEffect(()=>{h&&x==1&&T()},[h,x]),e.jsx(N,{className:"h-[600px] w-full",children:e.jsx(V,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(o,{control:t.control,disabled:x==1,name:"code",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(_,{type:"text",placeholder:"Insert code",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(_,{type:"text",...r,value:r.value||"",onChange:s=>r.onChange(s.target.value)})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Business Purpose Type"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:b,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select type"})}),e.jsxs(f,{children:[e.jsx(d,{value:"Day",children:"Day"},"day"),e.jsx(d,{value:"total",children:"Total"},"total")]})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Currency"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"currency_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select Currency"})}),e.jsx(f,{children:w.map(s=>e.jsxs(d,{value:s.code,children:[s.name," ",s.code]},s.code))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowance Category"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"allowance_category_id",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsxs(u,{onValueChange:s=>r.onChange(s),value:r.value,children:[e.jsx(p,{className:"w-[200px]",children:e.jsx(g,{placeholder:"Select Allowance Category"})}),e.jsx(f,{children:E.map(s=>e.jsx(d,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Purpose Type"}),e.jsx("td",{children:e.jsx(N,{className:"h-[250px] border rounded-lg p-6 w-full"})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Formula"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"formula",render:({field:r})=>e.jsxs(l,{children:[e.jsx(n,{children:e.jsx(G,{placeholder:"Insert formula",...r})}),e.jsx(i,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Request Value"}),e.jsx("td",{children:e.jsx(o,{control:t.control,name:"request_value",render:({field:r})=>e.jsx(l,{children:e.jsx(n,{children:e.jsxs(O,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex space-x-1",children:[e.jsxs(l,{className:"flex text-xs items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"unlimited"})}),e.jsx(j,{className:"text-xs",children:"Unlimited"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"up to max value"})}),e.jsx(j,{className:"text-xs",children:"Up To Max Value"})]}),e.jsxs(l,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(n,{children:e.jsx(v,{value:"fixed value"})}),e.jsx(j,{className:"text-xs",children:"Fixed Value"})]})]})})})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(R,{type:"submit",children:"Save"})})]})})})}export{U as AllowanceType,ie as default};
