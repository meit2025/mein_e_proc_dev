import{u as A,r as R,j as e}from"./app-DYXD3EX6.js";import{F as _,a as i,b as o,c as d,d as c}from"./form-GOUxazQD.js";import{z as l,t as P}from"./index-CGfa4er-.js";import{F as h,B as U}from"./button-DVK5eS8I.js";import{u as V}from"./index.esm-CDnEN_go.js";import{S as B}from"./scroll-area-D7o3zFP-.js";import{S as j,a as u,b as p,c as g,d as f}from"./select-C3teCrVG.js";import{I as v}from"./input-Cs8XgmnE.js";import{a as C}from"./axiosInstance-DxCNASqb.js";import"./app-wnGHkkFm.js";import"./index-DGSpRV6m.js";import"./react-icons.esm-B54UoypB.js";import"./index-cT_ms_yg.js";import"./Combination-C-Xv4M6e.js";import"./index-BDwmgrWd.js";import"./index-DJ4vfpRt.js";const w="/api/master/reimburse-quota",D=`${w}/create`,G=a=>`${w}/detail/${a}`;function re({onSuccess:a,type:m=h.create,id:x,listTypeReimburse:E,listPeriodReimburse:S,listGrade:F}){var T=l.object({period:l.string("Period must choose"),type:l.string("Type must choose"),grade:l.string("Grade must choose"),limit:l.number("Limit must set"),plafon:l.number("Plafon must set")});let I={period:"",type:"",grade:"",limit:0,plafon:0};async function N(){let r=G(x);try{let t=await C.get(r);n.reset({id:t.data.data.id})}catch{}}const n=V({resolver:P(T),defaultValues:I}),{showToast:b}=A(),y=async r=>{try{const t=await C.post(D,r);a==null||a(!0),b(t.message,"success")}catch(t){a==null||a(!1),b(t.message,"error")}};return R.useEffect(()=>{x&&m==h.edit&&N()},[x,m]),e.jsx(B,{className:"h-[600px] w-full",children:e.jsx(_,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(y),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Period"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"period",render:({field:r})=>{var t;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:(t=r.value)==null?void 0:t.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:S.map(s=>e.jsxs(f,{value:s.id.toString(),children:[s.start," - ",s.end]},s.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Type"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"type",render:({field:r})=>{var t;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:(t=r.value)==null?void 0:t.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:E.map(s=>e.jsx(f,{value:s.id.toString(),children:s.name},s.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Grade"}),e.jsx("td",{children:e.jsx(i,{control:n.control,name:"grade",render:({field:r})=>{var t;return e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(j,{onValueChange:s=>r.onChange(s),value:(t=r.value)==null?void 0:t.toString(),children:[e.jsx(u,{className:"w-[200px]",children:e.jsx(p,{placeholder:"-"})}),e.jsx(g,{children:F.map(s=>e.jsx(f,{value:s.id.toString(),children:s.grade},s.id))})]})}),e.jsx(c,{})]})}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Limit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:n.control,disabled:m==h.edit,name:"limit",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(v,{type:"number",placeholder:"0.0",onChange:t=>r.onChange(Number(t.target.value)),value:r.value||0})}),e.jsx(c,{})]})})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Plafon ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:n.control,disabled:m==h.edit,name:"plafon",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(v,{type:"number",placeholder:"0",...r,onChange:t=>r.onChange(Number(t.target.value)),value:r.value||0})}),e.jsx(c,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(U,{type:"submit",children:"Save"})})]})})})}export{re as default};
