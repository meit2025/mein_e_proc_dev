import{u as b,r as v,j as e}from"./app-nYBTD1fo.js";import{F as T,a as i,b as c,c as d,d as m}from"./form-B2JPCxtq.js";import{z as r,t as A}from"./index-C4FlvXrp.js";import{F as x,B as S}from"./button-CA57fXNi.js";import{u as E}from"./index.esm-CzPujvt0.js";import{S as F}from"./scroll-area-B3JJXvHI.js";import{S as y,a as N,b as _,c as I,d as B}from"./select-BuyTLcdg.js";import{I as j}from"./input-CIuB1FEo.js";import{a as p}from"./axiosInstance-DMOvDrDW.js";import{a as P}from"./api-CEASqZ9H.js";import{C as V}from"./api-Bq-9vnaq.js";import{M as R}from"./MultiSelect-DoGaWrOq.js";import"./app-wnGHkkFm.js";import"./index-BSuWIByC.js";import"./react-icons.esm-BAorqhyx.js";import"./index-DNwV2EHT.js";import"./Combination-BAhh-Owy.js";import"./index-DH1bLLJk.js";import"./index-DeE_HkxL.js";function te({onSuccess:n,type:l=x.create,id:o,listAllowanceModel:u}){var f=r.object({code:r.string().min(1,"Code is required"),name:r.string().min(1,"Name is required"),all:r.boolean().optional(),allowances:r.array(r.number()).optional(),attedance_status:r.string().min(1,"Attedance Status is required")});let g={code:"",name:"",all:!1,allowances:[],attedance_status:""};async function C(){let t=P(o);try{let a=await p.get(t);s.reset({code:a.data.data.code,name:a.data.data.name})}catch{}}const s=E({resolver:A(f),defaultValues:g}),{showToast:h}=b(),w=async t=>{console.log(t);try{const a=await p.post(V,t);console.log("response",a),h("success","success"),n==null||n(!0)}catch{n==null||n(!1),h("Please Check the input","error")}};return v.useEffect(()=>{o&&l==x.edit&&C()},[o,l]),e.jsx(F,{className:"h-[600px] w-full",children:e.jsx(T,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(w),children:[e.jsxs("table",{className:"text-xs mt-4 table font-thin",children:[e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:s.control,disabled:l==x.edit,name:"code",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(j,{type:"text",placeholder:"Insert code",...t,value:t.value||"",onChange:a=>t.onChange(a.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Name"}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:"name",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(j,{type:"text",...t,value:t.value||"",onChange:a=>t.onChange(a.target.value)})}),e.jsx(m,{})]})})})]}),e.jsxs("tr",{children:[e.jsx("td",{width:200,children:"Allowances"}),e.jsx("td",{children:e.jsx(R,{value:s.getValues("allowances"),id:"id",label:"name",options:u,onSelect:t=>{s.setValue("allowances",t.map(a=>a.id))}})})]}),e.jsxs("tr",{children:[e.jsxs("td",{width:200,children:["Attendance Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("td",{children:e.jsx(i,{control:s.control,name:"attedance_status",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(y,{onValueChange:a=>t.onChange(a),value:t.value,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(_,{placeholder:"Select Attedance status"})}),e.jsx(I,{children:e.jsx(B,{value:"Business Trip",children:"Business Trip (BST)"},"BST")})]})}),e.jsx(m,{})]})})})]})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(S,{type:"submit",children:"Save"})})]})})})}export{te as default};
