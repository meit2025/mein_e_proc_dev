import{r as q,j as s,c as E,u as z,a as T}from"./app-BPgN461A.js";import{a as S,C as y,F as A}from"./index.esm-D2thtaJK.js";import{g as P,a as R,s as N,c as $,S as L,m as C,n as I,p as O,q as D,r as U,u as V,b as X,F as w,A as B,t as M,v as _,C as H,w as W,I as G,T as J,l as K}from"./axiosInstance-DEZOgC51.js";import{L as Q}from"./Loading-DRy0Mi_H.js";function Y(e){return R("MuiSwitch",e)}const v=P("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Z=e=>{const{classes:a,edge:r,size:p,color:h,checked:b,disabled:x}=e,g={root:["root",r&&`edge${$(r)}`,`size${$(p)}`],switchBase:["switchBase",`color${$(h)}`,b&&"checked",x&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},n=X(g,Y,a);return{...a,...n}},ee=N("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,r.edge&&a[`edge${$(r.edge)}`],a[`size${$(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${v.thumb}`]:{width:16,height:16},[`& .${v.switchBase}`]:{padding:4,[`&.${v.checked}`]:{transform:"translateX(16px)"}}}}]}),se=N(L,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.switchBase,{[`& .${v.input}`]:a.input},r.color!=="default"&&a[`color${$(r.color)}`]]}})(C(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${v.checked}`]:{transform:"translateX(20px)"},[`&.${v.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${v.checked} + .${v.track}`]:{opacity:.5},[`&.${v.disabled} + .${v.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${v.input}`]:{left:"-100%",width:"300%"}})),C(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(O(["light"])).map(([a])=>({props:{color:a},style:{[`&.${v.checked}`]:{color:(e.vars||e).palette[a].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:I(e.palette[a].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${a}DisabledColor`]:`${e.palette.mode==="light"?D(e.palette[a].main,.62):U(e.palette[a].main,.55)}`}},[`&.${v.checked} + .${v.track}`]:{backgroundColor:(e.vars||e).palette[a].main}}}))]}))),ae=N("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,a)=>a.track})(C(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),re=N("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,a)=>a.thumb})(C(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),te=q.forwardRef(function(a,r){const p=V({props:a,name:"MuiSwitch"}),{className:h,color:b="primary",edge:x=!1,size:g="medium",sx:n,...l}=p,o={...p,color:b,edge:x,size:g},i=Z(o),d=s.jsx(re,{className:i.thumb,ownerState:o});return s.jsxs(ee,{className:E(i.root,h),sx:n,ownerState:o,children:[s.jsx(se,{type:"checkbox",icon:d,checkedIcon:d,ref:r,ownerState:o,...l,classes:{...i,root:i.switchBase}}),s.jsx(ae,{className:i.track,ownerState:o})]})}),le=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,type:b="text",requiredMessage:x,placeholder:g,minLength:n,maxLength:l,classNames:o,icon:i})=>{var t;const{control:d,formState:{errors:f}}=S();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(y,{name:a,control:d,rules:{required:r?x??`${e} is required`:!1,...n!==void 0?{minLength:{value:n,message:`Minimum length is ${n} characters`}}:{},...l!==void 0?{maxLength:{value:l,message:`Maximum length is ${l} characters`}}:{}},render:({field:c})=>s.jsx(s.Fragment,{children:s.jsxs("label",{className:`input ${r&&f[a]?"border-danger":""} ${o}`,style:h,children:[i,s.jsx("input",{placeholder:g,type:b,required:r,disabled:p,...c,...n!==void 0?{minLength:n}:{},...l!==void 0?{maxLength:l}:{}}),s.jsx("br",{})]})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),f[a]&&s.jsx(w,{error:!0,children:String((t=f[a])==null?void 0:t.message)})]})]})},ie=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,options:x,placeholder:g,classNames:n,onChangeOutside:l})=>{var d;const{control:o,formState:{errors:i}}=S();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(y,{name:a,control:o,rules:{required:r?b??`${e} is required`:!1},render:({field:f})=>s.jsx("div",{className:`${n}`,children:s.jsx(B,{...f,options:x,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,c)=>t.value===c,onChange:(t,c)=>{f.onChange(c?c.value:null),l&&l(c?c.value:null)},sx:h,disabled:p,renderInput:t=>s.jsx(M,{...t,placeholder:g,error:!!i[a],required:r,InputProps:{...t.InputProps,sx:{height:"36px"}}})})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),i[a]&&s.jsx(w,{error:!0,children:String((d=i[a])==null?void 0:d.message)})]})]})},ne=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,classNames:x})=>{const{control:g,formState:{errors:n}}=S();return s.jsx(y,{name:a,control:g,rules:{required:r?b??`${e} is required`:!1},render:({field:l})=>{var o;return s.jsxs("div",{style:h,className:x,children:[s.jsx(_,{control:s.jsx(H,{...l,checked:!!l.value,disabled:p}),label:e}),n[a]&&s.jsx(w,{error:!0,children:String((o=n[a])==null?void 0:o.message)})]})}})},oe=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,options:x=[],placeholder:g,classNames:n,onChangeOutside:l})=>{const{control:o,formState:{errors:i}}=S();return s.jsx(y,{name:a,control:o,rules:{required:r?b??`${e} is required`:!1},render:({field:d})=>{var f;return s.jsxs("div",{style:h,className:n,children:[s.jsx(B,{...d,multiple:!0,options:x,getOptionLabel:t=>t.label,isOptionEqualToValue:(t,c)=>t.value===c,onChange:(t,c)=>{d.onChange(c.map(u=>u.value)),l&&l(c.map(u=>u.value))},value:x.filter(t=>{var c;return(c=d.value)==null?void 0:c.includes(t.value)}),disabled:p,renderInput:t=>s.jsx(M,{...t,label:e,placeholder:g,error:!!i[a],required:r}),renderTags:(t,c)=>t.map((u,m)=>q.createElement(W,{label:u.label,...c({index:m}),key:m}))}),i[a]&&s.jsx(w,{error:!0,children:String((f=i[a])==null?void 0:f.message)})]})}})},ce=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,allowedExtensions:x=[],classNames:g,onFileChangeOutside:n})=>{const[l,o]=q.useState(null),{control:i,formState:{errors:d},setError:f,clearErrors:t}=S(),c=(u,m)=>{var k;const j=u.target.files?u.target.files[0]:null;if(j){const F=(k=j.name.split(".").pop())==null?void 0:k.toLowerCase();if(x.length>0&&F&&!x.includes(F)){m(null),o(null),f(a,{type:"manual",message:`Invalid file type. Allowed types: ${x.join(", ")}`});return}t(a),o(j.name),m(j),n&&n(j)}else m(null),o(null),t(a)};return s.jsx(y,{name:a,control:i,rules:{required:r?b??`${e} is required`:!1},render:({field:u})=>{var m;return s.jsxs("div",{style:h,className:g,children:[s.jsx("label",{children:e}),s.jsx(G,{type:"file",disabled:p,onChange:j=>c(j,u.onChange)}),l&&s.jsxs("p",{children:["Selected file: ",l]}),d[a]&&s.jsx(w,{error:!0,children:String((m=d[a])==null?void 0:m.message)})]})}})},de=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,placeholder:x,rows:g=10,maxRows:n=10,maxLength:l,classNames:o})=>{var u;const[i,d]=q.useState(0),{control:f,formState:{errors:t}}=S(),c=m=>{d(m.target.value.length)};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(y,{name:a,control:f,rules:{required:r?b??`${e} is required`:!1},render:({field:m})=>{var j;return s.jsxs("div",{style:h,className:o,children:[s.jsx(M,{...m,multiline:!0,rows:g,style:h,maxRows:n,placeholder:x,disabled:p,error:!!t[a],required:r,variant:"outlined",inputProps:{...l?{maxLength:l}:{}},onChange:k=>{m.onChange(k),c(k)}}),l&&s.jsxs(J,{variant:"caption",style:{textAlign:"right",display:"block",marginTop:4},children:[i,"/",l," characters"]}),t[a]&&s.jsx(w,{error:!0,children:String((j=t[a])==null?void 0:j.message)})]})}})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),t[a]&&s.jsx(w,{error:!0,children:String((u=t[a])==null?void 0:u.message)})]})]})},ue=({fieldLabel:e,fieldName:a,isRequired:r=!1,disabled:p=!1,style:h,requiredMessage:b,classNames:x,defaultChecked:g=!1})=>{var o;const{control:n,formState:{errors:l}}=S();return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsxs("label",{className:"form-label max-w-32",children:[e," ",s.jsxs("span",{className:"text-red-700",children:[" ",r?"*":""]})]}),s.jsx(y,{name:a,control:n,rules:{required:r?b??`${e} is required`:!1},render:({field:i})=>s.jsx("div",{style:h,className:x,children:s.jsx(te,{...i,checked:!!(i.value??g),onChange:d=>i.onChange(d.target.checked),disabled:p})})})]}),s.jsxs("div",{className:"flex items-baseline flex-wrap lg:flex-nowrap gap-2.5",children:[s.jsx("label",{className:"form-label max-w-32",children:""}),l[a]&&s.jsx(w,{error:!0,children:String((o=l[a])==null?void 0:o.message)})]})]})},pe=({model:e,onChangeOutside:a})=>{switch(e.type){case"input":return s.jsx(le,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,type:e.texttype,requiredMessage:e.requiredMessage,placeholder:e.placeholder,minLength:e.minLength,maxLength:e.maxLength,classNames:e.classNames,icon:e.icon,iconPosition:e.iconPosition});case"textarea":return s.jsx(de,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames});case"select":return s.jsx(ie,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"checkbox":return s.jsx(ne,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"multiselect":return s.jsx(oe,{options:e.options??[],fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,placeholder:e.placeholder,classNames:e.classNames,onChangeOutside:a});case"switch":return s.jsx(ue,{fieldLabel:e.label,fieldName:e.name,isRequired:e.required,disabled:e.disabled,style:e.style,requiredMessage:e.requiredMessage,classNames:e.classNames});case"file":return s.jsx(ce,{fieldLabel:e.label,fieldName:e.name,allowedExtensions:e.allowedExtensions,disabled:e.disabled,onFileChangeOutside:a});default:return null}},me=({formModel:e,url:a,redirectUrl:r,methods:p,onSave:h,isLoading:b})=>{const{setError:x}=p,{showToast:g}=z(),[n,l]=q.useState(!1),o=async i=>{var d,f,t,c;l(!0);try{const u=await K.post(a,i,{headers:{"Content-Type":"application/json"}});g(u.data.message,"success"),h&&await h(u),r&&setTimeout(()=>{window.location.href=r},2e3)}catch(u){if(T.isAxiosError(u)&&((f=(d=u.response)==null?void 0:d.data)!=null&&f.message)&&g(u.response.data.message,"error"),T.isAxiosError(u)&&((c=(t=u.response)==null?void 0:t.data)!=null&&c.errors)){const m=u.response.data.errors;Object.keys(m).forEach(j=>{x(j,{type:"server",message:m[j].join(", ")})})}}l(!1)};return s.jsxs(A,{...p,children:[s.jsx(Q,{isLoading:b||n}),s.jsxs("form",{onSubmit:p.handleSubmit(o),children:[e.map((i,d)=>s.jsx("div",{className:"mt-8",children:s.jsx(pe,{model:i})},d)),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition-all",children:"Submit"})})]})]})};export{me as F};
